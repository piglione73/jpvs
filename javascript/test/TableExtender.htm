<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <title>TableExtender</title>
    <style>
        table, th, td 
        {
            border: 1px solid #000;
            border-collapse: collapse;
            padding: 3pt;
            margin: 3pt;
        }
    </style>
    <script type="text/javascript" src="../libs/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="../src/jpvs.js"></script>
    <script type="text/javascript" src="../src/Core.js"></script>
    <script type="text/javascript" src="../src/JSON.js"></script>
    <script type="text/javascript" src="../src/Event.js"></script>
    <script type="text/javascript" src="../src/widgets/Table.js"></script>
    <script type="text/javascript" src="../src/widgets/TableExtender.js"></script>
    <script type="text/javascript">
        jpvs(function (w) {
            var tblExt = jpvs.TableExtender.create("#tbl1");

            tblExt.afterResize(function (params) {
                if (params.resizing) {
                    console.log("New table width: " + params.newTableWidth + " - Column " + params.columnIndex + " - New col. width: " + params.newColumnWidth);
                    $("#lbl").text("New table width: " + params.newTableWidth + " - Column " + params.columnIndex + " - New col. width: " + params.newColumnWidth);
                }
                else {
                    //Expand the container, so resizing on the last column beyond page size is made easy
                    $("#pnl").css("width", (params.newTableWidth + 200) + "px");
                }
            });

            tblExt.resizableColumns(true).persistColumnSizes(true).apply();
        });
    </script>
</head>
<body>
    <div id="lbl">Event info will be written here</div>
    <div id="pnl">
        <table id="tbl1" data-table-name="TestTable1">
            <colgroup>
                <col data-col-name="Test1" style="background-color: #ffa" />
                <col data-col-name="Test2" style="width: 15em" />
            </colgroup>
            <thead>
                <tr>
                    <th colspan="2">Group 1</th>
                    <th colspan="3">Group 2</th>
                </tr>
                <tr>
                    <th>Col 1</th>
                    <th>Col 2</th>
                    <th>Col 3</th>
                    <th>Col 4</th>
                    <th>Col 5</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>
                        Test 
                        <select>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                        with elements inside
                        <select>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>
