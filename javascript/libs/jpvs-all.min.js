/*! jpvs 2015-09-09 */
var jpvs=function(){function a(a,b){var c=document.getElementsByTagName("head")[0]||document.documentElement,d=document.createElement("script");d.src=a;var e=!1;d.onload=d.onreadystatechange=function(){e||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e=!0,b())},c.insertBefore(d,c.firstChild)}function b(a,b){var c=!1;for(var d in a){var e=a[d];if(e==b){c=!0;break}}return c?!1:(a.push(b),!0)}function c(a,c){var d=[];if(a)for(var e in a){var f=a[e],g=tree.ClassToModule[f];b(d,g)}if(c)for(var e in c){var g=c[e];b(d,g)}for(var h=!0;h;){h=!1;for(var e in d){var g=d[e],i=tree.ModuleToDepends[g];for(var j in i){var k=i[j];b(d,k)&&(h=!0)}}}var l=jpvs.baseUrl||"jpvs",m=[];for(var e in d){var g=d[e],n=tree.ModuleToFiles[g];for(var j in n){var o=n[j];b(m,l+"/"+o)}}return m.reverse(),m}return function(b,d){function e(){f.TotalCount||(f.TotalCount=f.length);var b=f.shift();b?setTimeout(function(){a(b,e)},10):(jpvs.createAllWidgets(),d&&d(jpvs.widgets))}if(b)if("function"==typeof b)d=b,$(document).ready(function(){jpvs.createAllWidgets(),d(jpvs.widgets)});else{var f=c(b.classes,b.modules);$(document).ready(e)}else;}}();!function(){function a(){i||(g(b),i=!0)}function b(){if(null==j){if(!(h.length>0))return void(i=!1);j=h.shift()}try{var a=(new Date).getTime();if(null==j.startTime&&(j.startTime=a,j.endTime=j.startTime+j.duration),j.step){var e=d(a);j.animFunc(e)}else{var e=c(a);j.animFunc(e)}a>=j.endTime&&(j=null)}finally{g(b)}}function c(a){return a<=j.startTime?j.t0:a>=j.endTime?j.t1:j.easingFunc(j.startTime,j.endTime,j.t0,j.t1,a)}function d(a){var b=j.t0,c=j.t1,d=j.step,e=j.startTime,f=j.endTime,g=Math.ceil(Math.abs((c-b)/d)),h=c>b?1:-1,i=(f-e)/g,k=Math.floor((a-e)/i);return e>=a?b:a>=f?c:b+h*k*d}function e(a,b,c,d,e){var f=(e-a)/(b-a),g=.5-Math.cos(f*Math.PI)/2,h=c+g*(d-c);return h}function f(a,b,c,d,e){var f=(e-a)/(b-a),g=f,h=c+g*(d-c);return h}var g=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1e3/60)};jpvs.requestAnimationFrame=function(){g.apply(window,arguments)};var h=[],i=!1,j=null;jpvs.animate=function(b,c){var d=b&&null!=b.t0?b.t0:0,f=b&&null!=b.t1?b.t1:1,g=Math.abs(b&&b.step||0),i=Math.abs(b&&b.duration||1e3),j=b&&b.easingFunction||e,k=c||b;h.push({t0:d,t1:f,step:g,duration:i,animFunc:k,easingFunc:j,startTime:null,endTime:null}),a()},jpvs.animate.harmonicEasing=e,jpvs.animate.linearEasing=f,jpvs.flashClass=function(a,b,c,d,e){var f=$(a),g=d||15,h=2*g;jpvs.animate({t0:0,t1:h,step:1,duration:c||2e3},function(a){a%2==0?f.addClass(b):f.removeClass(b)}),jpvs.animate({t0:0,t1:1,step:1,duration:e||4e3},function(a){1==a&&f.removeClass(b)})}}(),function(){function a(a,b,d,e){var f={};try{for(;;){var g=a(f),h=c(g);if(!h.keepRunning)return b&&b(f.returnValue),f.returnValue;d&&h.progress&&d(h.progress)}}catch(i){e&&e(i)}}function b(a,b,d,e){function f(){j=!0}function g(){if(!j)try{for(var f=(new Date).getTime(),k=f+i;!j;){var l=a(h),m=c(l);if(!m.keepRunning)return void(b&&b(h.returnValue));var n=(new Date).getTime();if(!(k>n)){i=m.minRunTimeMs;var o=n-f,p=o*(1-m.cpu)/m.cpu;return setTimeout(g,p),void(d&&m.progress&&d(m.progress))}}}catch(q){e&&e(q)}}var h={},i=0,j=!1;return{run:g,cancel:f}}function c(a){return null===a||void 0===a||a===!1?{keepRunning:!1}:a===!0?{keepRunning:!0,cpu:d,minRunTimeMs:e,progress:null}:{keepRunning:!0,cpu:a.cpu||d,minRunTimeMs:a.minRunTimeMs||e,progress:a.progress}}var d=.5,e=50;jpvs.runTask=function(a,b,c,d,e){return a?jpvs.runBackgroundTask(b,c,d,e):jpvs.runForegroundTask(b,c,d,e)},jpvs.runBackgroundTask=function(a,c,d,e){var f=b(a,c,d,e);return setTimeout(f.run,0),{cancel:f.cancel}},jpvs.runForegroundTask=function(b,c,d,e){return a(b,c,d,e)}}(),function(){function a(){this.buffer=[]}function b(a){this._input=a,this._index=-1,this._buffer=[]}function c(a){this._input=a,this._index=-1,this._buffer=[]}a.prototype.append=function(a){return this.buffer.push(a),this},a.prototype.toString=function(){return this.buffer.join("")};var d={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){for(var d=new a,e=new b(c);e.moveNext();){var f=e.current;e.moveNext();var g=e.current;e.moveNext();var h=e.current,i=f>>2,j=(3&f)<<4|g>>4,k=(15&g)<<2|h>>6,l=63&h;isNaN(g)?k=l=64:isNaN(h)&&(l=64),d.append(this.codex.charAt(i)+this.codex.charAt(j)+this.codex.charAt(k)+this.codex.charAt(l))}return d.toString()},decode:function(b){for(var d=new a,e=new c(b);e.moveNext();){var f=e.current;if(128>f)d.append(String.fromCharCode(f));else if(f>191&&224>f){e.moveNext();var g=e.current;d.append(String.fromCharCode((31&f)<<6|63&g))}else{e.moveNext();var g=e.current;e.moveNext();var h=e.current;d.append(String.fromCharCode((15&f)<<12|(63&g)<<6|63&h))}}return d.toString()}};b.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=Number.NaN,!1;var a=this._input.charCodeAt(++this._index);return 13==a&&10==this._input.charCodeAt(this._index+1)&&(a=10,this._index+=2),128>a?this.current=a:a>127&&2048>a?(this.current=a>>6|192,this._buffer.push(63&a|128)):(this.current=a>>12|224,this._buffer.push(a>>6&63|128),this._buffer.push(63&a|128)),!0}},c.prototype={current:64,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=64,!1;var a=d.codex.indexOf(this._input.charAt(++this._index)),b=d.codex.indexOf(this._input.charAt(++this._index)),c=d.codex.indexOf(this._input.charAt(++this._index)),e=d.codex.indexOf(this._input.charAt(++this._index)),f=a<<2|b>>4,g=(15&b)<<4|c>>2,h=(3&c)<<6|e;return this.current=f,64!=c&&this._buffer.push(g),64!=e&&this._buffer.push(h),!0}},jpvs.encodeUtf8Base64=function(a){return d.encode(a)},jpvs.decodeBase64Utf8=function(a){return d.decode(a)}}(),function(){function a(a,f,i,k,l){var m=g(i,k),n=j(a,f);n(m());var o={idFrom:b(a)+"/"+f,idTo:c(i)+"/"+k};d(o,a,f,h(i,k),l),o={idTo:b(a)+"/"+f,idFrom:c(i)+"/"+k},e(o,i,k,a,j(a,f),l)}function b(a){var b=a.data("jpvs.binding.id");return b||(b=jpvs.randomString(20),a.data("jpvs.binding.id",b)),b}function c(a){var b=a["jpvs.binding.id"];return b||(b=jpvs.randomString(20),a["jpvs.binding.id"]=b),b}function d(a,b,c,d,e){var f=i(b,c);q.put(a.idFrom,a.idTo,b,f,function(a){d(a)&&e&&e(!1,!0)})}function e(a,b,c,d,e,f){var h=g(b,c);q.put(a.idFrom,a.idTo,d,h,function(a){e(a)&&f&&f(!0,!1)})}function f(a){function b(a){return this.mustInvert?!a:a}var c=a,d=!1;return 0==a.indexOf("!")&&(d=!0,c=a.substring(1)),{name:c,mustInvert:d,translate:b}}function g(a,b){var c=f(b),d=a[c.name];return"function"==typeof d?function(){var a=d();return c.translate(a)}:function(){var b=a[c.name];return c.translate(b)}}function h(a,b){var c=f(b),d=a[c.name];return"function"==typeof d?function(a){var b=d(),e=c.translate(a);return d(e),!k(e,b)}:function(b){var d=a[c.name],e=c.translate(b);return a[c.name]=e,!k(e,d)}}function i(a,b){var c=jpvs.find(a);if(c){var d=c[b];if("function"==typeof d)return function(){return d.call(c)}}return"jquery."==b.toLowerCase().substring(0,7)?function(){return a[b.substring(7)]()}:"#visible"==b?function(){return"none"!=a.css("display")&&"hidden"!=a.css("visibility")}:"#"!=b.substring(0,1)?function(){return a.attr(b)}:void alert("Invalid jpvs data-binding directive: "+b)}function j(a,b){var c=jpvs.find(a);if(c){var d=c[b];if("function"==typeof d)return function(a){return k(a,d.call(c))?!1:(d.call(c,a),!0)}}return"jquery."==b.toLowerCase().substring(0,7)?function(c){return k(c,a[b.substring(7)]())?!1:(a[b.substring(7)](c),!0)}:"#visible"==b?function(b){var c="none"!=a.css("display")&&"hidden"!=a.css("visibility");return b?a.show():a.hide(),b!=c}:"#"!=b.substring(0,1)?function(c){return k(c,a.attr(b))?!1:(a.attr(b,c),!0)}:void alert("Invalid jpvs data-binding directive: "+b)}function k(a,b){return jpvs.equals(a,b)}function l(){p||(p=setInterval(o,200))}function m(){p&&(clearInterval(p),p=null)}function n(){this.relations={}}function o(){for(var a,b=!0;b;)a={},b=!1,$.each(q.relations,function(c,d){var e=d.getter();k(e,d.curValue)||(a[d.idFrom]=d.getter,b=!0)}),$.each(a,function(a,b){var c=b();$.each(q.relations,function(b,d){d.idFrom==a&&(d.onChangeAction(c),d.curValue=c)})})}jpvs.resetAllBindings=function(){q.clearAll(),m()},jpvs.bindContainer=function(a,b,c,d){a&&(a=jpvs.getElementIfWidget(a),jpvs.bindElements(a.find("*"),b,c,d))},jpvs.bindElements=function(a,b,c,d){if(a)for(var e=0;e<a.length;e++){var f=a[e],g=$(f),h=g.data(d||"bind");h&&jpvs.bind(g,b,h,c)}},jpvs.bind=function(b,c,d,e){if(l(),c){var f=$.trim(d).split(",");$.each(f,function(d,f){var g=f.split("="),h=$.trim(g[0]),i=$.trim(g[1]);a(b,h,c,i,e)})}},jpvs.findElementsBoundTo=function(a,b){var d=[],e=c(a)+"/"+b;return $.each(q.relations,function(a,b){b.idTo==e&&d.push(b.element)}),d};var p;n.prototype.clearAll=function(){this.relations={}},n.prototype.put=function(a,b,c,d,e){this.relations[a+"ยง"+b]={idFrom:a,idTo:b,element:c,getter:d,onChangeAction:e,curValue:d()}};var q=new n}(),function(){function a(a){return a?a.getMainContentElement?a.getMainContentElement():$(a):a}jpvs.getElementIfWidget=a,jpvs.widgetDefs=[],jpvs.widgets={},jpvs.find=function(a){var b=$(a);if(0==b.length)return null;if(1==b.length)return b.data("jpvs-widget");var c=[];return b.each(function(){c.push($(this).data("jpvs-widget"))}),c.each=function(a){for(var b=0;b<c.length;b++){var d=c[b];a.call(d,d)}},c},jpvs.states={HOVER:"Hover",FOCUS:"Focus",ERROR:"Error",DISABLED:"Disabled"},jpvs.property=function(a){return function(b,c,d,e,f){if(void 0===b)return a.get.call(this);if(c)if(a.setTask){var g=a.setTask.call(this,b);jpvs.runBackgroundTask(g,d,e,f)}else if(a.set)try{a.set.call(this,b),d&&d()}catch(h){f&&f(h)}else d&&d();else if(a.set)a.set.call(this,b);else if(a.setTask){var g=a.setTask.call(this,b);jpvs.runForegroundTask(g)}return this}},jpvs.currentLocale=function(){var a="en";return jpvs.property({get:function(){return a},set:function(b){a=b}})}(),jpvs.event=function(a){return new jpvs.Event(a)},jpvs.makeWidget=function(b){function c(b){return function(c){var d=[];return c=c||document.body,c=a(c),$(c).each(function(a,c){var e=b.create(c);d.push(b.widget.attach(e))}),1==d.length?d[0]:0==d.length?void 0:d}}function d(a){return function(b){return new a.widget(b)}}function e(b){return function(c){c&&(c=a(c),this.__WIDGET__=b.type,this.element=$(c),this.element.addClass("Widget"),this.element.addClass(b.cssClass),h(this),b.init.call(this,this),jpvs.widgets[this.element.attr("id")]=this,this.element.data("jpvs-widget",this))}}function f(a){return function(){var b=!0;a.destroy&&(b=a.destroy.call(this,this)),b&&this.element.remove()}}function g(a){return function(){return a.getMainContentElement?a.getMainContentElement.call(this,this):this.element}}function h(a){a.element.hover(function(){a.addState(jpvs.states.HOVER)},function(){a.removeState(jpvs.states.HOVER)}),a.element.focusin(function(){a.addState(jpvs.states.FOCUS)}),a.element.focusout(function(){a.removeState(jpvs.states.FOCUS)})}function i(a){return function(){return a.focus?a.focus.call(this,this):this.element.focus(),this}}function j(a){return function(b){return this.element.addClass("Widget-"+b),this.element.addClass(a.cssClass+"-"+b),this}}function k(a){return function(b){return this.element.removeClass("Widget-"+b),this.element.removeClass(a.cssClass+"-"+b),this}}jpvs.widgetDefs.push(b);var l=b.widget;if(!l)throw"Missing widget field in widget definition";if(!b.create)throw"Missing create function in widget definition";if(!b.init)throw"Missing init function in widget definition";if(l.__WIDGET__=b.type,!l.__WIDGET__)throw"Missing type field in widget definition";if(!b.cssClass)throw"Missing cssClass field in widget definition";l.create=c(b),l.attach=d(b),l.prototype.toString=function(){return this.__WIDGET__},l.prototype.attach=e(b),l.prototype.destroy=f(b),l.prototype.focus=i(b),l.prototype.addState=j(b),l.prototype.removeState=k(b),l.prototype.getMainContentElement=g(b),l.prototype.id=jpvs.property({get:function(){return this.element.attr("id")},set:function(a){this.element.attr("id",a)}}),l.prototype.ensureId=function(){this.id()&&""!=this.id()||this.id(jpvs.randomString(20))},b.prototype&&$.each(b.prototype,function(a,b){l.prototype[a]=b})},jpvs.createAllWidgets=function(){$("*").each(function(){var a=this,b=$(a),c=b.data("jpvsType");if(c){var d=jpvs[c];if(d)return void d.attach(this)}$.each(jpvs.widgetDefs,function(b,c){return c.canAttachTo&&c.canAttachTo(a)?(c.widget.attach(a),!1):void 0})})},jpvs.write=function(b,c){if(b&&(b=a(b),c)){c=c.replace("\r","");var d=c.split("\n");1==d.length?$(b).append(document.createTextNode(d[0])):d.length>1&&$.each(d,function(a,c){$(b).append(document.createTextNode(c)),$(b).append(document.createElement("br"))})}},jpvs.writeln=function(b,c){b&&(b=a(b),jpvs.write(b,c),$(b).append(document.createElement("br")))},jpvs.writeTag=function(b,c,d){if(b&&c){b=a(b);var e=document.createElement(c);return $(b).append(e),jpvs.write(e,d),$(e)}},jpvs.applyTemplate=function(b,c,d){if(b&&c){if(b=a(b),c.template)return jpvs.applyTemplate(b,c.template,d);if("string"==typeof c)return void jpvs.write(b,c);if(c.fieldName){var e=d&&d[c.fieldName];return e=c.selector?c.selector(e,d):e&&e.toString(),c.tagName?jpvs.writeTag(b,c.tagName,e):jpvs.write(b,e),void(c.css&&b.css(c.css))}return"function"==typeof c?c.call($(b),d):void jpvs.alert("JPVS Error","The specified template is not valid.")}},jpvs.readDataSource=function(a,b,c,d,e){function f(){e({total:0,start:0,count:0,data:[]})}function g(a){a.total&&a.data?e({total:a.total,start:a.start||0,count:a.data.length||0,data:a.data}):a.length?e({total:a.length,start:0,count:a.length,data:a}):f()}if(a)if("function"==typeof a){var h=a(b,c,d,g);void 0===h||(null===h?f():g(h))}else if(a.length){var i,j=a.length,k=Math.max(0,b||0);if(void 0===c||null===c)i=a.slice(k);else{var l=Math.max(0,c||0),m=k+l;i=a.slice(k,m)}e({total:j,start:k,count:i.length,data:i})}else f();else f()},jpvs.showDimScreen=function(a,b,c){function d(){jpvs.showDimScreen.timeout=null,jpvs.showDimScreen.element||(jpvs.showDimScreen.element=jpvs.writeTag("body","div").addClass("DimScreen").css({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",display:"none"}),jpvs.applyTemplate(jpvs.showDimScreen.element,c),jpvs.showDimScreen.element.fadeIn(null!=b?b:250))}jpvs.showDimScreen.timeout||(jpvs.showDimScreen.timeout=setTimeout(d,null!=a?a:500))},jpvs.hideDimScreen=function(a){if(jpvs.showDimScreen.timeout&&(clearTimeout(jpvs.showDimScreen.timeout),jpvs.showDimScreen.timeout=null),jpvs.showDimScreen.element){var b=jpvs.showDimScreen.element;jpvs.showDimScreen.element=null,b.fadeOut(null!=a?a:250,function(){b.remove()})}},jpvs.fitInWindow=function(b){function c(a,b,c,d){return a>c?a-c:d>b?b-d:0}if(b){b=a(b);var d=b.offset(),e=d.left,f=d.top,g=b.outerWidth(),h=b.outerHeight(),i=$(window),j=i.scrollLeft(),k=i.scrollTop(),l=i.width(),m=i.height(),n=c(j,j+l,e,e+g),o=c(k,k+m,f,f+h);if(0!=n||0!=o){var p=e+n,q=f+o;b.show().css({position:"absolute",left:p+"px",top:q+"px"})}}},jpvs.fixTableHeader=function(b){function c(){if(!r){f();var a=h&&h.css("position"),b="absolute"==a||"fixed"==a||"relative"==a,c=m.position().left,d=m.position().top,g=0;h&&(b||(g=h.position().top),c+=h.scrollLeft(),d+=h.scrollTop()),o=d-g;var i=(parseFloat(m.css("margin-left"))+parseFloat(m.css("border-left-width")),parseFloat(m.css("margin-top"))+parseFloat(m.css("border-top-width")));q=function(){return h?b?h.scrollTop()-i:g-i:$(window).scrollTop()-i},p=function(){return h?c:c},e()}}function d(){var a=h||$(window);return{top:a.scrollTop(),left:a.scrollLeft()}}function e(){if(!r){var a=d();a.top>o?g():f()}}function f(){n.hide(),m.css({position:"static"})}function g(){n.show(),m.css({position:"absolute",top:q()+"px",left:p()+"px","z-index":99999})}if(b){b=a(b);for(var h=b;;){h=h.parent();h[0].nodeName;if(!h||0==h.length||"body"==h[0].nodeName.toLowerCase()){h=null;break}var i=h.css("overflow");if("auto"==i||"scroll"==i||"hidden"==i)break}var j=[];b.find("tbody > tr:first").each(function(){$(this).children("td").each(function(a,b){j[a]=$(b).outerWidth()})});var k=0;$.each(j,function(a,b){k+=b}),b.css({"table-layout":"fixed",width:k+"px"}),b.children("colgroup, col").remove();var l=jpvs.writeTag(b,"colgroup");$.each(j,function(a,b){jpvs.writeTag(l,"col").css("width",b+"px")});var m=b.clone().attr("id",b.attr("id")+"_header");m.insertBefore(b),m.children("tbody, tfoot").remove(),b.children("caption, thead").remove(),m.css("margin-bottom","0px"),b.css("margin-top","0px");var n=jpvs.writeTag(b.parent(),"div");n.insertBefore(b),n.css({width:k+"px",height:m.outerHeight()+"px"});var o,p,q;c(),(h||$(window)).resize(c).scroll(e);var r=!1;return{refresh:function(){c()},deactivate:function(){r=!0,n.remove();var a=m.children("thead"),c=b.children("tbody");a.insertBefore(c),b.css("margin-top",m.css("margin-top")),m.remove()}}}}}(),jpvs.Event=function(a){var b=function(a,c){return b.bind(a,c)};return b.bind=jpvs.Event.prototype.bind,b.unbind=jpvs.Event.prototype.unbind,b.fire=jpvs.Event.prototype.fire,b.widget=a,b.handlers={},b},jpvs.Event.prototype.bind=function(a,b){return b||(b=a,a=(new Date).toString()),this.handlers[a]=b,this.widget},jpvs.Event.prototype.unbind=function(a){return delete this.handlers[a],this.widget},jpvs.Event.prototype.fire=function(a,b,c,d){function e(b){if(b){a&&(a.currentBrowserEvent=d);var e=b.call(a,c);return a&&(a.currentBrowserEvent=null),e}}if(b)return e(this.handlers[b]);var f=!0;for(var g in this.handlers){var h=this.handlers[g],i=e(h);f=f&&i}return f},function(){function a(a){return a.match(b)?'"'+a.replace(b,function(a){var b=c[a];return"string"==typeof b?b:(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})+'"':'"'+a+'"'}jpvs.parseJSON=function(a){return $.parseJSON(a)};var b=/["\\\x00-\x1f\x7f-\x9f]/g,c={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};jpvs.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(b){if(null===b)return"null";var c=typeof b;if("undefined"===c)return void 0;if("number"===c||"boolean"===c)return""+b;if("string"===c)return a(b);if("object"===c){if("function"==typeof b.toJSON)return jpvs.toJSON(b.toJSON());if(b.constructor===Date){var d=b.getUTCMonth()+1,e=b.getUTCDate(),f=b.getUTCFullYear(),g=b.getUTCHours(),h=b.getUTCMinutes(),i=b.getUTCSeconds(),j=b.getUTCMilliseconds();return 10>d&&(d="0"+d),10>e&&(e="0"+e),10>g&&(g="0"+g),10>h&&(h="0"+h),10>i&&(i="0"+i),100>j&&(j="0"+j),10>j&&(j="0"+j),'"'+f+"-"+d+"-"+e+"T"+g+":"+h+":"+i+"."+j+'Z"'}if(b.constructor===Array){for(var k=[],l=0;l<b.length;l++)k.push(jpvs.toJSON(b[l])||"null");return"["+k.join(",")+"]"}var m,n,o=[];for(var p in b){if(c=typeof p,"number"===c)m='"'+p+'"';else{if("string"!==c)continue;m=a(p)}c=typeof b[p],"function"!==c&&"undefined"!==c&&(n=jpvs.toJSON(b[p]),o.push(m+":"+n))}return"{"+o.join(",")+"}"}}}(),function(){var a={};jpvs.runLazyTask=function(b,c,d){function e(){delete a[b],d&&d()}d&&(jpvs.cancelLazyTask(b),a[b]=setTimeout(e,c))},jpvs.cancelLazyTask=function(b){var c=a[b];null!==c&&void 0!==c&&clearTimeout(c),delete a[b]}}(),function(){var a="QWERTYUIOPLKJHGFDSAZXCVBNM1234567890",b=a.length,c=10*b;jpvs.randomString=function(d){for(var e="",f=0;d>f;f++){var g=Math.floor(Math.random()*c)%b,h=a[g];e+=h}return e}}(),jpvs.Resources={images:{empty16x16:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAA2SURBVDhPpcixEQAgAAMh9186LkDhnwUNZ9sXZsEsmAWzYBbMglkwC2bBLJgFs2AWzIL5bucCxa39H+iOy+4AAAAASUVORK5CYII=",loading:"data:image/gif;base64,R0lGODlhGAAIAPcAAAAAAP8A3ICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgABACwAAAAAGAAIAAAIRAADCBxIsKBBggASKhSocGGAhgkZCpgoAADDARgHWHyYUaNEihsBdAw58uNEkhlRYgxJseLFlC9XMoQ4s2FNhwdz5gwIACH5BAkKAAEALAAAAAAYAAgAAAhDAAMIHEiwoEGCABIqFKhwYYCGCRkOmDgAAEMBGAVYfEixokSKGwFk1PhxYsiOIUeeBFnS40OVLUNCZDjzYc2DOHEGBAAh+QQJCgABACwAAAAAGAAIAAAIQwADCBxIsKBBggASKhSocGGAhgkZDpg4AIBEihYfCtgoICMAihUvTvTIsaPIkA9BkuToUeXJlRs9QmQ482HNgzhxBgQAIfkECQoAAQAsAAAAABgACAAACEMAAwgcSLCgQYIAEioUqHBhgIYJGQ6YOAAAQwEYBVh8SLGiRIobAWTU+HFiyI4hR54EWdLjQ5UtQ0JkOPNhzYM4cQYEADs=",closeButton:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADzSURBVDhPY2BmZv7EwMDwn1zMyMrK+uXnz5/7gQaQDJiYmHyYSNaFpgHDAD09PSuQyRcvXuRCVtvW1iYHEgfRKGaAvPDv37/NyBgUHjo6Om9hYufPn98LEmtpabmIrg6rF1avXn38ypUrQjDbYmNjDYAGvquqqnqE4WVsLgDZEhUVdQ9kK4wGuQKbS/HGAig8QC4BuSg4OPgtuu0EYwGkGaRp/fr1ErhiC2c0gmwH+Rtk+7JlyxTXrl0rjNUQbGEACm2Q/2H+hoUDtjBgQDcAX5QhRy3IMHDyRzYAphldIUgx0CvHYLECcwmIP/B5gYHS7AwAM9IzlWy9T8kAAAAASUVORK5CYII=",closeButtonHover:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAENSURBVDhPY9TW1v6rqqrKxEAGuHHjBgOjo6Pjn717994lQz+Dk5OTGlk2I1uGYcDs2bNlm5qa1N6+fcuKrPDUqVP8IHEQjdeA1NTUxyAF69atk4ApBBm2Y8cOcQ8Pj5dmZmYf8RoAkoyMjHzy/PlzTphtIMMkJSW/o2sGqcUaBsBY+WZkZPQBZOuWLVvEQIYFBQW9wBbQOAPRx8fnFcjWc+fOCYBcJCws/JskA0CKQTaD6Js3b/LgimacLgDFBsgFINtBrrh9+zYX0S4ABR7M37DwWL58uQxRBiBHGczfoPAAaQa5Ct0QFC+ANE+dOlURW5TBohYUK8iGDHxeYFRRUfkrIyNDVqZ68OABAwDuhIRQ92DTiAAAAABJRU5ErkJggg==",subMenuMarker:"data:image/gif;base64,R0lGODlhBAAHAPAAAAAAAP///yH5BAEAAAEALAAAAAAEAAcAAAIIRA4WaeyrVCgAOw==",dataGridColumnButton:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAICAYAAAArzdW1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAP0lEQVQoU2NsaGjYwkAIgBT9//8/ChcGGwI1CWQaVgxXBDIFmyKQOIoidIUw6zEUwRQiuw+rInQPwBWBGPgwACtpkpAwaQ17AAAAAElFTkSuQmCC",dataGridColumnButtonHover:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAICAYAAAArzdW1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAPklEQVQoU2NsaGj4z0AIgBQBAYjAisGGQE0CmYYVwxWBTMGmCCSOoghdIcx6DEUwhcjuw6oI3QNwRSAGPgwAytOhjjbmr7UAAAAASUVORK5CYII=",moveButton:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAADlSURBVHjapFLRDsIgDLxuU598WvgAfdXo/3+Xr7BaGDDoGDGxySUb9NrrFQLu2IIFSwEnB44EqGHDPbPFAMh9QCJzJp/My39zUTCT129gWjtXXSPJSfVMkH9Lmoy19a1VIMkV4kdyzmqEODCzV6CJSyN5T04xKdkNw6DJHE0LMcSuvCUdKaiCiwLe7Tcu2XGXcQ1nITljNk/M5pGLiBST9o3GCHI+klKQupM3MY7giVr6oXwoD9JuLfXcbpHjFlzzhf0aw0berSoYVhjYK5AeUC2TNh51RIw9hdy9lC2EVfwTXwEGAJ3OoklJmLc2AAAAAElFTkSuQmCC",nodeClosed:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAABl0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuNtCDrVoAAABrSURBVDhP7ZI9CsAgDEY9fM7g6iReJYcIuAXUwSN8kkLHgj+FLs0cHo+XOPfPYwFmRu8d24lijEgpIee8BzFArRUhBIjIOsQApl9KgfcerbU1yA0wiKqCiC6j6SavGBw3OLrC8R9Mx/p8cQCaS2KwCQA20AAAAABJRU5ErkJggg==",nodeOpen:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAABl0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuNtCDrVoAAABCSURBVDhPY2AYBfQJgV27dv3v6Oj4T5ZtIM1qampgTLIBMM2RkZGkG4CsmWQD0DWTbAAowGD+htFkByLJATcCNQAAuT01LwirJNQAAAAASUVORK5CYII=",nodeNoChildren:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAABl0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuNtCDrVoAAABlSURBVDhP7ZAxCoAhCIW7/zl0ChcHIQiiwQt0IX9sCNoy+LcEF/F9Pl9Kr/5JgIgMAAwRV4uIHV9zYSllCcYYExQC+HKt1VR1Cq8ALmbmO0BrbVnuvcdeyDlvAbp9nx1n8BZjCXzXd1UGM4buRAAAAABJRU5ErkJggg==",down:"data:image/png;base64,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",minus:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAXhSURBVHhe7dQxahhADEXBnN0nzI0cpxCkeM0mGCI0A6/53RbaH5+fn5KOlqOkG+Uo6UY5SrpRjpJulKOkG+Uo6UY5SrpRjpJulKOkG+Uo6UY5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOU4ATvVPVc5TsBOdc9VjhOwU91zleME7FT3XOX4HX35+OqnpL/qo+7qX8vxO/r9gD8eI+ktH4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHQ4H4B0OB+AdDgfgHS4//MDAHbI+63xJWCHvN8aXwJ2yPut8SVgh7zfGl8Cdsj7rfElYIe83xpfAnbI+63xJWCHvN8aXwJ2yPut8SVgh7zfGl8Cdsj7rfElYIe83xpfAnbI+63xJWCHvN8aXwJ2yPut8SVgh7zfGl8Cdsj7rfElYIe83xpfAnbI+63xJWCHvN8aXwJ2yPut8SVgh7zfGl8Cdsj7rfElYIe83xpfAnbI+63xJWCHvN8aXwJ2yPut8SVgh7zfGl8Cdsj7rfElYIe83xpfAnbI+63xJWCHvN8aXwJ2yPut8SVgh7zfGl8Cdsj7rfElYIe83xpfAnbI+63xJWCHvN8aXwJ2yPut8SVgh7zfGl8Cdsj7rfElYIe83xpfAnbI+63xJWCHvN8aXwJ2yPut8SVgh7zfGl8Cdsj7rfElYIe83xpfAnbI+63xJWCHvN8aXwJ2yPut8SVgh7zfGl8Cdsj7rfElYIe83xpfAnbI+63xJWCHvN8aXwJ2yPut8SVgh7zfGl8Cdsj7rfElYIe83xpfAnbI+63xJWCHvN8aXwJ2yPut8SVgh7zfGl8Cdsj7rfElYIe83xpfAnbI+63xJWCHvN8aXwJ2yPut8SVgh7zfGl8Cdsj7rfElYIe83xpfAnbI+63xJWCHvN8aXwJ2yPutUdKNcpR0oxwl3ShHSTfKUdKNcpR0oxwl3ShHSTfKUdKNcpR0oxwl3ShHSTfKUdKNcpR0oxwlXejzxy+8PqQAvdktbgAAAABJRU5ErkJggg==",plus:"data:image/png;base64,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",
up:"data:image/png;base64,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"}},function(){var a,b="jpvs.SessionID";jpvs.getSessionID=function(){if(!a)try{a=sessionStorage[b]}catch(c){}if(!a){a=jpvs.randomString(50);try{sessionStorage[b]=a}catch(c){}}return a}}(),function(){jpvs.addGestureListener=function(a,b,c){function d(a){function d(a){c&&c(a)}function g(){var a=[];for(var c in e){var f=e[c];a.push(f)}if(1==a.length){var g=a[0].current.clientX-a[0].start.clientX,h=a[0].current.clientY-a[0].start.clientY,i=Math.sqrt(g*g+h*h);if(i>b.tapMaxDistance&&(a[0].dragging=!0),a[0].dragging){var j={target:a[0].start.target,isDrag:!0,dragX:a[0].current.clientX-a[0].previous.clientX,dragY:a[0].current.clientY-a[0].previous.clientY,totalDragX:a[0].current.clientX-a[0].start.clientX,totalDragY:a[0].current.clientY-a[0].start.clientY,current:{clientX:a[0].current.clientX,clientY:a[0].current.clientY,pageX:a[0].current.pageX,pageY:a[0].current.pageY},start:{clientX:a[0].start.clientX,clientY:a[0].start.clientY,pageX:a[0].start.pageX,pageY:a[0].start.pageY}};j.toString=function(){return"Drag: "+this.dragX+"; "+this.dragY+" - Total drag: "+this.totalDragX+"; "+this.totalDragY},d(j)}}else if(2==a.length){var k=a[0].start.clientX-a[1].start.clientX,l=a[0].start.clientY-a[1].start.clientY,m=Math.sqrt(k*k+l*l),n=Math.atan2(l,k),o=a[0].current.clientX-a[1].current.clientX,p=a[0].current.clientY-a[1].current.clientY,q=Math.sqrt(o*o+p*p),r=Math.atan2(p,o),s=a[0].previous.clientX-a[1].previous.clientX,t=a[0].previous.clientY-a[1].previous.clientY,u=Math.sqrt(s*s+t*t),v=Math.atan2(t,s),w=q-m,x=r-n;if(Math.abs(x)>b.rotationThreshold){a[0].rotating=!0,a[1].rotating=!0;var y=a[0].rotateTracker||a[1].rotateTracker||{};a[0].rotateTracker=y,a[1].rotateTracker=y}if(Math.abs(w)>b.tapMaxDistance){a[0].zooming=!0,a[1].zooming=!0;var z=a[0].zoomTracker||a[1].zoomTracker||{};a[0].zoomTracker=z,a[1].zoomTracker=z}if(a[0].rotating&&a[1].rotating){var j={target1:a[0].start.target,target2:a[1].start.target,isRotate:!0,angle:r-v,totalAngle:r-n,current1:{clientX:a[0].current.clientX,clientY:a[0].current.clientY,pageX:a[0].current.pageX,pageY:a[0].current.pageY},start1:{clientX:a[0].start.clientX,clientY:a[0].start.clientY,pageX:a[0].start.pageX,pageY:a[0].start.pageY},current2:{clientX:a[1].current.clientX,clientY:a[1].current.clientY,pageX:a[1].current.pageX,pageY:a[1].current.pageY},start2:{clientX:a[1].start.clientX,clientY:a[1].start.clientY,pageX:a[1].start.pageX,pageY:a[1].start.pageY}};j.toString=function(){return"Rotate: "+this.angle+" - Total angle: "+this.totalAngle},a[0].rotateTracker.totalAngle=j.totalAngle,a[0].rotateTracker.target1=j.target1,a[0].rotateTracker.target2=j.target2,a[0].rotateTracker.start1=j.start1,a[0].rotateTracker.start2=j.start2,a[0].rotateTracker.current1=j.current1,a[0].rotateTracker.current2=j.current2,d(j)}if(a[0].zooming&&a[1].zooming){var j={target1:a[0].start.target,target2:a[1].start.target,isZoom:!0,zoomFactor:q/u,totalZoomFactor:q/m,current1:{clientX:a[0].current.clientX,clientY:a[0].current.clientY,pageX:a[0].current.pageX,pageY:a[0].current.pageY},start1:{clientX:a[0].start.clientX,clientY:a[0].start.clientY,pageX:a[0].start.pageX,pageY:a[0].start.pageY},current2:{clientX:a[1].current.clientX,clientY:a[1].current.clientY,pageX:a[1].current.pageX,pageY:a[1].current.pageY},start2:{clientX:a[1].start.clientX,clientY:a[1].start.clientY,pageX:a[1].start.pageX,pageY:a[1].start.pageY}};j.toString=function(){return"Zoom: "+this.zoomFactor+" - Total zoom: "+this.totalZoomFactor},a[0].zoomTracker.totalZoomFactor=j.totalZoomFactor,a[0].zoomTracker.target1=j.target1,a[0].zoomTracker.target2=j.target2,a[0].zoomTracker.start1=j.start1,a[0].zoomTracker.start2=j.start2,a[0].zoomTracker.current1=j.current1,a[0].zoomTracker.current2=j.current2,d(j)}}}function h(){for(var a={},c=0;c<i.touches.length;c++){var g=i.touches[c],h=e[g.identifier];a[g.identifier]=!0,h||(h={start:{target:g.target,time:j,clientX:g.clientX,clientY:g.clientY,pageX:g.pageX,pageY:g.pageY},current:{target:g.target,time:j,clientX:g.clientX,clientY:g.clientY,pageX:g.pageX,pageY:g.pageY}},e[g.identifier]=h),h.previous=h.current,h.current={target:g.target,time:j,clientX:g.clientX,clientY:g.clientY,pageX:g.pageX,pageY:g.pageY}}for(var k in e)if(!a[k]){var h=e[k];if(delete e[k],h.rotating){var l={target1:h.rotateTracker.target1,target2:h.rotateTracker.target2,isRotate:!1,isEndRotate:!0,totalAngle:h.rotateTracker.totalAngle,start1:h.rotateTracker.start1,start2:h.rotateTracker.start2,current1:h.rotateTracker.current1,current2:h.rotateTracker.current2};l.toString=function(){return"End of rotation: total angle "+this.totalAngle},d(l)}if(h.zooming){var l={target1:h.zoomTracker.target1,target2:h.zoomTracker.target2,isZoom:!1,isEndZoom:!0,totalZoomFactor:h.zoomTracker.totalZoomFactor,start1:h.zoomTracker.start1,start2:h.zoomTracker.start2,current1:h.zoomTracker.current1,current2:h.zoomTracker.current2};l.toString=function(){return"End of zoom: total factor "+this.totalZoomFactor},d(l)}if(h.dragging){var l={target:h.start.target,isDrag:!1,isEndDrag:!0,totalDragX:h.current.clientX-h.start.clientX,totalDragY:h.current.clientY-h.start.clientY,current:{clientX:h.current.clientX,clientY:h.current.clientY,pageX:h.current.pageX,pageY:h.current.pageY},start:{clientX:h.start.clientX,clientY:h.start.clientY,pageX:h.start.pageX,pageY:h.start.pageY}};l.toString=function(){return"End of drag"},d(l)}if(!h.rotating&&!h.zooming&&!h.dragging&&0==i.touches.length){var m=h.current.clientX-h.start.clientX,n=h.current.clientY-h.start.clientY,o=Math.sqrt(m*m+n*n);if(o<b.tapMaxDistance){var p=j-h.start.time,l={target:h.start.target,isTap:!0,isLongTap:p>=b.longTapThreshold,clientX:h.start.clientX,clientY:h.start.clientY,pageX:h.start.pageX,pageY:h.start.pageY};if(l.isLongTap)f=null;else{if(f&&(p=h.start.time-f.time,p<b.doubleTapThreshold)){m=h.start.clientX-f.clientX,n=h.start.clientY-f.clientY;var o=Math.sqrt(m*m+n*n);o<b.tapMaxDistance&&(l.isDoubleTap=!0,f=null)}l.isDoubleTap||(f={time:j,clientX:h.start.clientX,clientY:h.start.clientY})}l.toString=function(){return"Tap: "+(this.isLongTap?"long":"short")+" - "+(this.isDoubleTap?"double":"simple")},d(l)}}}}var i=a.originalEvent;if(b.allowedEventTargets(i.target)){var j=(new Date).getTime();return h(),g(),a.stopPropagation(),a.preventDefault(),!1}}b=b||{},b.tapMaxDistance=b.tapMaxDistance||15,b.longTapThreshold=b.longTapThreshold||500,b.doubleTapThreshold=b.doubleTapThreshold||250,b.rotationThreshold=b.rotationThreshold||10*Math.PI/180,b.allowedEventTargets=b.allowedEventTargets||function(a){return!$(a).is("a, a *, select, select *, input, input *, button, button *, .jpvs-Ignore-Touch, .jpvs-Ignore-Touch *")},a=jpvs.getElementIfWidget(a),a.on("touchstart",d),a.on("touchmove",d),a.on("touchend",d),a.on("touchcancel",d);var e={},f=null}}(),function(){var a=["p","th","td"];!function(b){function c(a,b,c,d){if(!a.tag.isInline&&c.length>0)for(c.push("\n"),i=0;i<d;i++)c.push("	")}function d(a,e){var f,g=[],h=0==a.attributes.length,i=(this.name.concat(void 0==a.tag.rawAttributes?"":a.tag.rawAttributes),a.tag.render&&(0==e.allowedTags.length||b.inArray(a.tag.name,e.allowedTags)>-1)&&(0==e.removeTags.length||-1==b.inArray(a.tag.name,e.removeTags)));if(!a.isRoot&&i&&(g.push("<"),g.push(a.tag.name),b.each(a.attributes,function(){if(-1==b.inArray(this.name,e.removeAttrs)){var c=RegExp(/^(['"]?)(.*?)['"]?$/).exec(this.value),d=c[2],f=c[1]||'"';"class"==this.name&&(d=b.grep(d.split(" "),function(c){return b.grep(e.allowedClasses,function(d){return d[0]==c&&(1==d.length||b.inArray(a.tag.name,d[1])>-1)}).length>0}).join(" "),f='"'),null!=d&&(d.length>0||b.inArray(this.name,a.tag.requiredAttributes)>-1)&&(g.push(" "),g.push(this.name),g.push("="),g.push(f),g.push(d),g.push(f))}})),a.tag.isSelfClosing)i&&g.push(" />"),h=!1;else if(a.tag.isNonClosing)h=!1;else{!a.isRoot&&i&&g.push(">");var f=e.formatIndent++;if(a.tag.toProtect){var n=b.htmlClean.trim(a.children.join("")).replace(/<br>/gi,"\n");g.push(n),h=0==n.length}else{for(var n=[],p=0;p<a.children.length;p++){var q=a.children[p],r=b.htmlClean.trim(o(l(q)?q:q.childrenToString()));m(q)&&p>0&&r.length>0&&(j(q)||k(a.children[p-1]))&&n.push(" "),l(q)?r.length>0&&n.push(r):(p!=a.children.length-1||"br"!=q.tag.name)&&(e.format&&c(q,e,n,f),n=n.concat(d(q,e)))}e.formatIndent--,n.length>0&&(e.format&&"\n"!=n[0]&&c(a,e,g,f),g=g.concat(n),h=!1)}!a.isRoot&&i&&(e.format&&c(a,e,g,f-1),g.push("</"),g.push(a.tag.name),g.push(">"))}return!a.tag.allowEmpty&&h?[]:g}function e(a,c,d){return d=d||1,b.inArray(a[a.length-d].tag.name,c)>-1?!0:a.length-(d+1)>0&&e(a,c,d+1)?(a.pop(),!0):!1}function f(a){return a?(this.tag=a,this.isRoot=!1):(this.tag=new h("root"),this.isRoot=!0),this.attributes=[],this.children=[],this.hasAttribute=function(a){for(var b=0;b<this.attributes.length;b++)if(this.attributes[b].name==a)return!0;return!1},this.childrenToString=function(){return this.children.join("")},this}function g(a,b){return this.name=a,this.value=b,this}function h(a,c,d,e){if(this.name=a.toLowerCase(),this.isSelfClosing=b.inArray(this.name,u)>-1,this.isNonClosing=b.inArray(this.name,v)>-1,this.isClosing=void 0!=c&&c.length>0,this.isInline=b.inArray(this.name,p)>-1,this.disallowNest=b.inArray(this.name,q)>-1,this.requiredParent=s[b.inArray(this.name,s)+1],this.allowEmpty=b.inArray(this.name,r)>-1,this.toProtect=b.inArray(this.name,t)>-1,this.rawAttributes=d,this.requiredAttributes=x[b.inArray(this.name,x)+1],e){if(e.tagAttributesCache||(e.tagAttributesCache=[]),-1==b.inArray(this.name,e.tagAttributesCache)){for(var f=w[b.inArray(this.name,w)+1].slice(0),g=0;g<e.allowedAttributes.length;g++){var h=e.allowedAttributes[g][0];(1==e.allowedAttributes[g].length||b.inArray(this.name,e.allowedAttributes[g][1])>-1)&&-1==b.inArray(h,f)&&f.push(h)}e.tagAttributesCache.push(this.name),e.tagAttributesCache.push(f)}this.allowedAttributes=e.tagAttributesCache[b.inArray(this.name,e.tagAttributesCache)+1]}return this.render=!0,this}function j(a){for(;n(a)&&a.children.length>0;)a=a.children[0];return l(a)&&a.length>0&&b.htmlClean.isWhitespace(a.charAt(0))}function k(a){for(;n(a)&&a.children.length>0;)a=a.children[a.children.length-1];return l(a)&&a.length>0&&b.htmlClean.isWhitespace(a.charAt(a.length-1))}function l(a){return a.constructor==String}function m(a){return l(a)||a.tag.isInline}function n(a){return a.constructor==f}function o(a){return a.replace(/&nbsp;|\n/g," ").replace(/\s\s+/g," ")}b.fn.htmlClean=function(a){return this.each(function(){b(this);this.value?this.value=b.htmlClean(this.value,a):this.innerHTML=b.htmlClean(this.innerHTML,a)})},b.htmlClean=function(a,c){c=b.extend({},b.htmlClean.defaults,c);var i,j=/<(\/)?(\w+:)?([\w]+)([^>]*)>/gi,k=/(\w+)=(".*?"|'.*?'|[^\s>]*)/gi,m=new f,n=[m],o=m;c.bodyOnly&&(i=/<body[^>]*>((\n|.)*)<\/body>/i.exec(a))&&(a=i[1]),a=a.concat("<xxx>");for(var p;i=j.exec(a);){var q=new h(i[3],i[1],i[4],c),r=a.substring(p,i.index);if(r.length>0){var s=o.children[o.children.length-1];o.children.length>0&&l(s=o.children[o.children.length-1])?o.children[o.children.length-1]=s.concat(r):o.children.push(r)}if(p=j.lastIndex,q.isClosing)e(n,[q.name])&&(n.pop(),o=n[n.length-1]);else{for(var t,u=new f(q);t=k.exec(q.rawAttributes);){if("style"==t[1].toLowerCase()&&c.replaceStyles)for(var v=!q.isInline,w=0;w<c.replaceStyles.length;w++)c.replaceStyles[w][0].test(t[2])&&(v||(q.render=!1,v=!0),o.children.push(u),n.push(u),o=u,q=new h(c.replaceStyles[w][1],"","",c),u=new f(q));null!=q.allowedAttributes&&(0==q.allowedAttributes.length||b.inArray(t[1],q.allowedAttributes)>-1)&&u.attributes.push(new g(t[1],t[2]))}b.each(q.requiredAttributes,function(){var a=this.toString();u.hasAttribute(a)||u.attributes.push(new g(a,""))});for(var x=0;x<c.replace.length;x++)for(var y=0;y<c.replace[x][0].length;y++){var z="string"==typeof c.replace[x][0][y];if(z&&c.replace[x][0][y]==q.name||!z&&c.replace[x][0][y].test(i)){q.render=!1,o.children.push(u),n.push(u),o=u,q=new h(c.replace[x][1],i[1],i[4],c),u=new f(q),u.attributes=o.attributes,x=c.replace.length;break}}var A=!0;if(o.isRoot||(o.tag.isInline&&!q.isInline?A=!1:o.tag.disallowNest&&q.disallowNest&&!q.requiredParent?A=!1:q.requiredParent&&(A=e(n,q.requiredParent))&&(o=n[n.length-1])),A)if(o.children.push(u),q.toProtect)for(;tagMatch2=j.exec(a);){var B=new h(tagMatch2[3],tagMatch2[1],tagMatch2[4],c);if(B.isClosing&&B.name==q.name){u.children.push(RegExp.leftContext.substring(p)),p=j.lastIndex;break}}else q.isSelfClosing||q.isNonClosing||(n.push(u),o=u)}}return b.htmlClean.trim(d(m,c).join(""))},b.htmlClean.defaults={bodyOnly:!0,allowedTags:[],removeTags:["basefont","center","dir","font","frame","frameset","iframe","isindex","menu","noframes","s","strike","u"],allowedAttributes:[],removeAttrs:[],allowedClasses:[],format:!1,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]]},b.htmlClean.trim=function(a){return b.htmlClean.trimStart(b.htmlClean.trimEnd(a))},b.htmlClean.trimStart=function(a){return a.substring(b.htmlClean.trimStartIndex(a))},b.htmlClean.trimStartIndex=function(a){for(var c=0;c<a.length-1&&b.htmlClean.isWhitespace(a.charAt(c));c++);return c},b.htmlClean.trimEnd=function(a){return a.substring(0,b.htmlClean.trimEndIndex(a))},b.htmlClean.trimEndIndex=function(a){for(var c=a.length-1;c>=0&&b.htmlClean.isWhitespace(a.charAt(c));c--);return c+1},b.htmlClean.isWhitespace=function(a){return-1!=b.inArray(a,y)};var p=["a","abbr","acronym","address","b","big","br","button","caption","cite","code","del","em","font","hr","i","input","img","ins","label","legend","map","q","s","samp","select","small","span","strike","strong","sub","sup","tt","u","var"],q=["h1","h2","h3","h4","h5","h6","p","th","td"],r=a||["th","td"],s=[null,"li",["ul","ol"],"dt",["dl"],"dd",["dl"],"td",["tr"],"th",["tr"],"tr",["table","thead","tbody","tfoot"],"thead",["table"],"tbody",["table"],"tfoot",["table"]],t=["script","style","pre","code"],u=["br","hr","img","link","meta"],v=["!doctype","?xml"],w=[["class"],"?xml",[],"!doctype",[],"a",["accesskey","class","href","name","title","rel","rev","type","tabindex"],"abbr",["class","title"],"acronym",["class","title"],"blockquote",["cite","class"],"button",["class","disabled","name","type","value"],"del",["cite","class","datetime"],"font",["face","size","color"],"form",["accept","action","class","enctype","method","name"],"input",["accept","accesskey","alt","checked","class","disabled","ismap","maxlength","name","size","readonly","src","tabindex","type","usemap","value"],"img",["alt","class","height","src","width"],"ins",["cite","class","datetime"],"label",["accesskey","class","for"],"legend",["accesskey","class"],"link",["href","rel","type"],"meta",["content","http-equiv","name","scheme","charset"],"map",["name"],"optgroup",["class","disabled","label"],"option",["class","disabled","label","selected","value"],"q",["class","cite"],"script",["src","type"],"select",["class","disabled","multiple","name","size","tabindex"],"style",["type"],"table",["class","summary"],"th",["class","colspan","rowspan"],"td",["class","colspan","rowspan"],"textarea",["accesskey","class","cols","disabled","name","readonly","rows","tabindex"]],x=[[],"img",["alt"]],y=["ย"," ","	","\n","\r","\f"]}(jQuery),jpvs.cleanHtml=function(a,b){var c={bodyOnly:!1,allowedTags:["h1","h2","h3","h4","h5","h6","br","hr","div","span","img","p","font","ul","ol","li","i","em","b","strong","u","sup","sub","table","thead","tbody","tfoot","tr","td","th"],removeTags:[null],allowedAttributes:[["style"],["align"],["src",["img"]]],removeAttrs:[],allowedClasses:[],format:!1,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]]};return jQuery.htmlClean(a||"",b||c)},jpvs.stripHtml=function(a){var b={bodyOnly:!1,allowedTags:[null],removeTags:[],allowedAttributes:[],removeAttrs:[],allowedClasses:[],format:!1,formatIndent:0,replace:[],replaceStyles:[]};return jQuery.htmlClean(a||"",b)}}();var SvgParser=function(){function a(a){var c=XmlParser.parseString(a,b);return c?{ids:c.__$ids$__,elements:c.children}:null}function b(a,b){function f(a,b,c){if("style"==b)k(a,c);else if("fill"==b)h(a,c);else if("stroke"==b)j(a,c);else if("d"==b)g(a,c);else{var d=/%$/g.test(c),e=parseFloat(c),f=isFinite(e)&&!d;a[b]=f?e:c}}function g(a,b){var c=e(b);a.d=c}function h(a,e){if(!e)return void(a.fill={});if(e=c(e),""==e||"none"==e.toLowerCase())return void(a.fill={});var f=/^url *\( *#(.+) *\) *$/gi,g=f.exec(e);if(g){var h=g[1],j=b.__$ids$__[h];if("linearGradient"==j.name){var k=i(j.x1),l=i(j.x2),m=i(j.y1),n=i(j.y2);a.fill={linearGradient:{x1:k,y1:m,x2:l,y2:n,stops:[]}};for(var o in j.children){var p=j.children[o];if("stop"==p.name){var q=p.offset,r=d(p["stop-color"]),s=p["stop-opacity"];null!=s&&(r.a*=s),a.fill.linearGradient.stops.push({color:r,offset:q})}}}}else a.fill={color:d(e)}}function i(a){return/%$/g.test(a)?parseFloat(a.substring(0,a.length-1))/100:parseFloat(a)}function j(a,b){return b?(b=c(b),""==b||"none"==b.toLowerCase()?void(a.stroke={}):void(a.stroke={color:d(b)})):void(a.stroke={})}function k(a,b){b=c(b);var d=b.split(";");for(var e in d){var g=d[e],h=g.split(":"),i=c(h[0]),j=c(h[1]);f(a,i,j)}}b.__$ids$__||(b.__$ids$__={}),a.attributes.id&&(b.__$ids$__[a.attributes.id]=a);for(var l=0;l<a.children.length;l++){var m=a.children[l];"#COMMENT"==m.name&&a.children.splice(l--,1)}delete a.value;for(var l in a.attributes){var n=a.attributes[l];f(a,l,n)}delete a.attributes}function c(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function d(a){function b(a){return a=c(a),3==a.length&&(a=String.fromCharCode(a.charCodeAt(0),a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(2))),{r:parseInt(a.substring(0,2),16),g:parseInt(a.substring(2,4),16),b:parseInt(a.substring(4,6),16),a:1}}function e(a){if(a=c(a),/^\(.*\)$/gi.test(a)){a=a.substring(1,a.length-1);var b=c(a).split(","),d=parseInt(b[0]),e=parseInt(b[1]),g=parseInt(b[2]),h=1;return{r:d,g:e,b:g,a:h}}return f}function h(a){if(a=c(a),/^\(.*\)$/gi.test(a)){a=a.substring(1,a.length-1);var b=c(a).split(","),d=parseInt(b[0]),e=parseInt(b[1]),g=parseInt(b[2]),h=parseFloat(b[3]);return{r:d,g:e,b:g,a:h}}return f}return a?(a=c(a),""==a?f:/^#/gi.test(a)?b(a.substring(1)):/^RGB[^A]/gi.test(a)?e(a.substring(3)):/^RGBA/gi.test(a)?h(a.substring(4)):(a=a.toLowerCase(),a=g[a],d(a))):f}function e(a){if(!a)return null;if(a=c(a),""==a)return null;for(var b,d,e=0,f=1,g=2,j=[],k=e,l=0;l<a.length;l++){var m=a[l];k==e?i.indexOf(m)>=0&&(b={cmd:m,params:[]},j.push(b),k=f):k==f?i.indexOf(m)>=0?(b={cmd:m,params:[]},j.push(b),k=f):h.indexOf(m)>=0&&(d=m,k=g):k==g&&(h.indexOf(m)>=0?d+=m:i.indexOf(m)>=0?(b.params.push(parseFloat(d)),d=null,b={cmd:m,params:[]},j.push(b),k=f):(b.params.push(parseFloat(d)),d=null,k=f))}return d&&b.params.push(parseFloat(d)),j}var f={r:0,g:0,b:0,a:1},g={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",green:"#008000",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},h="1234567890.-+",i="qwertyuioplkjhgfdsazxcvbnmQWERTYUIOPLKJHGFDSAZXCVBNM";return{parseString:a,parseColor:d,parsePathDefinition:e}}(),XmlParser=function(){function a(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function b(){return{name:"",attributes:{},children:[],value:null}}function c(a){return{name:"#TEXT",attributes:{},children:[],value:a}}function d(d,m,n){function o(a){if(a&&(m(a,C),a.children))for(var b in a.children){var c=a.children[b];o(c)}}function p(){throw"Invalid character: "+z}function q(){throw"Unexpected parser state: "+u}if(!d||""==d)return null;for(var r,s,t,u=e,v=[],w="",x="",y=0;y<d.length;y++){var z=d[y];if(u==e)if("<"==z){if(u=f,n||(w=a(w)),w.length>0){var A=c(w);r.children.push(A)}w="";var B=r;r=b(),v.push(r),B&&B.children.push(r)}else w+=z;else u==f?" "==z?u=g:"/"==z?""==r.name?r.closing=!0:u=k:">"==z?(u=e,r.closing&&(v.length>1&&(v.pop(),r=v[v.length-1],r.children.pop()),v.length>1&&(v.pop(),r=v[v.length-1]))):(r.name+=z,"!--"==r.name&&(x="",u=l)):u==g?" "==z||("/"==z?u=k:">"==z?u=e:(u=h,s=z,t="")):u==h?"="==z?u=i:s+=z:u==i?" "==z||('"'==z?u=j:p()):u==j?'"'==z?(u=g,r.attributes[a(s)]=t):t+=z:u==k?" "==z||(">"==z?(u=e,v.length>1&&(v.pop(),r=v[v.length-1])):p()):u==l?(x+=z,/-->$/gi.test(x)&&(x=a(x.substring(0,x.length-3)),r.name="#COMMENT",r.value=x,v.pop(),r=v[v.length-1],u=e)):q()}var C=v[0]||null;return m&&o(C),C}var e=0,f=1,g=2,h=3,i=4,j=5,k=6,l=7;return{parseString:d}}();!function(){function a(a,b,c){var d=a[g+b];if(!d)return c;var e=$.parseJSON(d);return e}function b(a,b,c){var d=jpvs.toJSON(c);a[g+b]=d}function c(a,b){a.removeItem(g+b)}function d(a,b){for(var c=a.length,d=0;c>d;d++){var e=a.key(d);if(0==e.indexOf(g)){var f=e.substring(h),i=a.getItem(f),j=$.parseJSON(i);if(b(f,j)===!1)return}}}function e(a,b){return a+"."+b}function f(a,b){this.storage=a,this.id=b.id,this.name=b.name}var g="jpvs.Storage.",h=g.length;f.prototype.getCount=function(){if(this.deleted)return 0;var a=this.name+".",b=a.length,c=0;return d(this.storage,function(d,e){if(0==d.indexOf(a)){var f=d.substring(b),g=parseInt(f);isFinite(g)&&(c=Math.max(c,g+1))}}),c},f.prototype.getItem=function(b){if(this.deleted)return null;var c=e(this.name,b),d=a(this.storage,c,null);return d},f.prototype.setItem=function(a,c){if(!this.deleted){var d=e(this.name,a);b(this.storage,d,c)}},f.prototype.removeItem=function(a){if(!this.deleted){var b=e(this.name,a);c(this.storage,b)}},f.prototype.removeAllItems=function(){if(!this.deleted)for(var a=this.getCount(),b=0;a>b;b++)this.removeItem(b)},f.prototype.listItems=function(){if(this.deleted)return[];var a=[];return this.each(function(b,c){a.push(c)}),a},f.prototype.each=function(a){if(!this.deleted)for(var b=this.getCount(),c=0;b>c;c++)if(a(c,this.getItem(c))===!1)return},f.prototype.deleteDomain=function(){if(!this.deleted){this.removeAllItems();var c=a(this.storage,"Domains",{});delete c[this.id],b(this.storage,"Domains",c),this.deleted=!0}},jpvs.Storage={listDomains:function(b){var c=a(b,"Domains",{}),d=[];return $.each(c,function(a,c){d.push(new f(b,c))}),d},getDomain:function(c,d){var e,g=a(c,"Domains",{});if($.each(g,function(a,b){return b.name==d?(e=new f(c,b),!1):void 0}),e)return e;var h={id:jpvs.randomString(20),name:d},i=new f(c,h);return g[h.id]=h,b(c,"Domains",g),i}}}(),function(){function a(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++){var d=a[c],e=b[c];if(!jpvs.equals(d,e))return!1}return!0}function b(a,b){if(a.getTime&&b.getTime)return a.getTime()==b.getTime();if(!a.getTime&&b.getTime)return!1;if(a.getTime&&!b.getTime)return!1;var c={};for(var d in a){var e=a[d],f=b[d];if(!jpvs.equals(e,f))return!1;c[d]=!0}for(var d in b)if(!c[d]){var e=a[d],f=b[d];if(!jpvs.equals(e,f))return!1}return!0}jpvs.equals=function(c,d){return c===d?!0:null===c&&null===d?!0:null===c&&null!==d?!1:null!==c&&null===d?!1:void 0===c&&void 0===d?!0:void 0===c&&void 0!==d?!1:void 0!==c&&void 0===d?!1:c===!0&&d===!0?!0:c===!0&&d!==!0?!1:c!==!0&&d===!0?!1:c===!1&&d===!1?!0:c===!1&&d!==!1?!1:c!==!1&&d===!1?!1:typeof c!=typeof d?!1:"number"==typeof c?isNaN(c)&&isNaN(d)?!0:isNaN(c)&&!isNaN(d)?!1:!isNaN(c)&&isNaN(d)?!1:c==d:"string"==typeof c?c==d:void 0!==c.length&&void 0!==d.length?a(c,d):void 0!==c.length&&void 0===d.length?!1:void 0===c.length&&void 0!==d.length?!1:b(c,d)}}(),function(){function a(a,b,c){return"EQ"==b?a==c:"NEQ"==b?a!=c:"CONTAINS"==b?a.indexOf(c)>=0:"NCONTAINS"==b?a.indexOf(c)<0:"STARTS"==b?0==a.indexOf(c):"NSTARTS"==b?0!=a.indexOf(c):"LT"==b?c>a:"LTE"==b?c>=a:"GT"==b?a>c:"GTE"==b?a>=c:!1}jpvs.filter=function(b,c){for(var d=[],e=0;e<b.length;e++){for(var f=b[e],g=!1,h=0;h<c.length;h++){var i=c[h],j=(i.selector(f)||"").toString().toUpperCase(),k=(i.value||"").toString().toUpperCase(),l=i.operand.toUpperCase(),m=a(j,l,k);if(!m){g=!0;break}}g||d.push(f)}return d}}(),function(){function a(a){return function(b,c){for(var d=0;d<a.length;d++){var e=a[d],f=e.selector(b),g=e.selector(c),h=jpvs.compare(f,g);if(0!=h)return e.descending?-h:h}return 0}}jpvs.sort=function(b,c){for(var d=[],e=0;e<b.length;e++)d.push(b[e]);return d.sort(a(c)),d},jpvs.compare=function(a,b){if(void 0===a)return void 0===b?0:-1;if(null===a)return void 0===b?1:null===b?0:-1;if(void 0===b)return 1;if(null===b)return 1;var c="number"==typeof a,d="number"==typeof b;if(c&&d)return a-b;if(c&&!d)return-1;if(!c&&d)return 1;var e=a.toString().toUpperCase(),f=b.toString().toUpperCase();return e>f?1:f>e?-1:0}}(),jpvs.Button=function(a){this.attach(a),this.click=jpvs.event(this)},jpvs.makeWidget({widget:jpvs.Button,type:"Button",cssClass:"Button",create:function(a){var b=document.createElement("button");return $(b).attr("type","button"),$(a).append(b),b},init:function(a){this.element.click(function(){return a.click.fire(a)})},canAttachTo:function(a){return $(a).is('button,input[type="button"]')},prototype:{text:jpvs.property({get:function(){return this.element.text()},set:function(a){this.element.text(a)}})}}),jpvs.writeButtonBar=function(a,b){if(a&&b){a=jpvs.getElementIfWidget(a);var c=$(document.createElement("div"));return $(c).addClass("ButtonBar").appendTo(a),$.each(b,function(a,b){var d=jpvs.Button.create(c);d.text(b.text||"OK").click.bind(b.click)}),c}},jpvs.CheckBox=function(a){this.attach(a),this.change=jpvs.event(this)},jpvs.makeWidget({widget:jpvs.CheckBox,type:"CheckBox",cssClass:"CheckBox",create:function(a){var b=document.createElement("input");return $(b).attr("type","checkbox"),$(a).append(b),b},init:function(a){this.element.click(function(){return a.change.fire(a)}),this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is('input[type="checkbox"]')},prototype:{checked:jpvs.property({get:function(){return this.element.prop("checked")},set:function(a){this.element.prop("checked",a?!0:!1)}}),text:jpvs.property({get:function(){this.ensureId();var a=$('label[for="'+this.id()+'"]');return a.text()},set:function(a){this.ensureId();var b=$('label[for="'+this.id()+'"]');
0==b.length&&(b=$(document.createElement("label")),b.attr("for",this.id()),b.insertAfter(this.element)),b.text(a)}})}}),function(){function a(a,b,c){var d=a.binder()||jpvs.DataGrid.defaultBinder;d.call(a,b,c)}function b(a,b){var c=a.element.children(b);return 0==c.length&&(c=$(document.createElement(b)),a.element.append(c)),c}function c(a,b,c,d,f){var h=$(document.createElement("tr"));if(null===f||void 0===f)c.append(h),a.enableEvenOdd()&&e(-1,c);else{var i=c.children("tr");0==i.length?c.append(h):i.eq(f).before(h),a.enableEvenOdd()&&e(f,c)}var j=a.template(),k=a.emptyRowTemplate();j&&g(h,b,j,k,d)}function d(a,b,c,d){(null===d||void 0===d)&&(d=1),1==d?b.children("tr").eq(c).remove():d>1&&b.children("tr").slice(c,c+d).remove(),a.enableEvenOdd()&&e(c,b)}function e(a,b){var c=b.children("tr");0>a&&(a+=c.length);for(var d=a%2==0,e=a;e<c.length;e++){var f=c.eq(e);f.removeClass("Even Odd").addClass(d?"Even":"Odd"),d=!d}}function f(a){return"thead"==a?"header":"tfoot"==a?"footer":"body"}function g(a,b,c,d,e){a.empty(),e?($.each(c,function(c,d){var f=d;(d.header||d.body||d.footer)&&(f=d[b]);var g="td";(f&&f.isHeader||"header"==b||"footer"==b)&&(g="th");var h=$(document.createElement(g));a.append(h),jpvs.applyTemplate(h,f,e)}),a.data("fromEmptyRowTemplate",!1),a.data("dataItem",e)):(jpvs.applyTemplate(a,d||h(c.length),e),a.data("fromEmptyRowTemplate",!0))}function h(a){return function(b){var c=jpvs.writeTag(this,"td").attr("colspan",a);jpvs.writeTag(c,"img").attr("src",jpvs.Resources.images.loading),jpvs.writeTag(c,"span",".").css("visibility","hidden")}}function i(a,b){var c=$(b).data("dataItem");return c?a.dataItemClick.fire(a,null,c):void 0}function j(a,b){var c=a.enableSorting(),d=a.enableFiltering();if(c||d){var e="";c&&d?e=jpvs.DataGrid.strings.clickToSortAndFilter:c?e=jpvs.DataGrid.strings.clickToSort:d&&(e=jpvs.DataGrid.strings.clickToFilter);var f=a.sortAndFilterExpressions(),g=$(b).data("jpvsColButtons")||[];0==g.length&&($(b).find("td,th").each(function(b){if(f[b]){var c=$(this),d=c.position(),h=d.left,i=d.top,j=c.innerWidth(),k=(c.outerHeight(),i),m=h+j,n=jpvs.ImageButton.create(c).imageUrls({normal:jpvs.Resources.images.dataGridColumnButton,hover:jpvs.Resources.images.dataGridColumnButtonHover});m-=n.element.width(),n.element.css({position:"absolute",left:m+"px",top:k+"px"}).attr("title",e),n.click(l(a,b)),g.push(n)}}),$(b).data("jpvsColButtons",g))}}function k(a,b){var c=$(b).data("jpvsColButtons");c&&setTimeout(function(){$.each(c,function(a,b){b.destroy()})},5e3),$(b).data("jpvsColButtons",null)}function l(a,b){return function(){m(a,b)}}function m(a,b){function c(){l.destroy()}function d(){if(i){for(var b=[],c=0;c<p.length;c++){var d=p[c].cmbSort,e=p[c].chkDesc,f=d.selectedValue(),g=e.checked();f&&""!=f&&b.push({name:f,descending:g})}a.currentSort(b)}if(j){for(var h=[],c=0;c<v.length;c++){var k=v[c].cmbFilter,m=v[c].cmbOp,n=v[c].txtValue,f=k.selectedValue(),o=m.selectedValue(),q=n.text();f&&""!=f&&o&&""!=o&&h.push({name:f,operand:o,value:q})}a.currentFilter(h)}a.changedSortFilter.fire(a),l.destroy()}function e(b,c){var d=b.writeRow();d.writeCell(c+": ");var e=jpvs.DropDownList.create(d.writeCell()),f=jpvs.CheckBox.create(d.writeCell());return f.text(jpvs.DataGrid.strings.descending),e.addItem(""),e.addItems(a.sortAndFilterExpressions()),{cmbSort:e,chkDesc:f}}function f(a,b){b&&(a.cmbSort.selectedValue(b.name),a.chkDesc.checked(b.descending))}function g(b,c){var d=b.writeRow(),e=jpvs.DropDownList.create(d.writeCell()),f=jpvs.DropDownList.create(d.writeCell()),g=jpvs.TextBox.create(d.writeCell());return e.addItem(""),e.addItems(a.sortAndFilterExpressions()),f.addItem(""),f.addItems(jpvs.DataGrid.getFilteringOperands()),{cmbFilter:e,cmbOp:f,txtValue:g}}function h(a,b){b&&(a.cmbFilter.selectedValue(b.name),a.cmbOp.selectedValue(b.operand),a.txtValue.text(b.value))}var i=a.enableSorting(),j=a.enableFiltering();if(i||j){var k="";i&&j?k=jpvs.DataGrid.strings.titleSortAndFilter:i?k=jpvs.DataGrid.strings.titleSort:j&&(k=jpvs.DataGrid.strings.titleFilter);var l=jpvs.Popup.create().title(k).show(),m=i&&j,n=l,o=l;m&&(n=jpvs.writeTag(l,"fieldset"),o=jpvs.writeTag(l,"fieldset"),jpvs.writeTag(n,"legend",jpvs.DataGrid.strings.titleSort),jpvs.writeTag(o,"legend",jpvs.DataGrid.strings.titleFilter));var p=[];if(i){var q=jpvs.Table.create(n);p.push(e(q,jpvs.DataGrid.strings.orderBy)),p.push(e(q,jpvs.DataGrid.strings.thenBy)),p.push(e(q,jpvs.DataGrid.strings.thenBy)),p.push(e(q,jpvs.DataGrid.strings.thenBy));var r=a.currentSort();if(!r){var s=a.sortAndFilterExpressions(),t=s&&s[b]&&s[b].value;r=t?[{name:t}]:[]}for(var u=0;u<p.length;u++)f(p[u],r[u])}var v=[];if(j){var w=jpvs.Table.create(o);v.push(g(w)),v.push(g(w)),v.push(g(w)),v.push(g(w));for(var x=a.currentFilter()||[],u=0;u<v.length;u++)h(v[u],x[u])}jpvs.writeButtonBar(l,[{text:jpvs.DataGrid.strings.ok,click:d},{text:jpvs.DataGrid.strings.cancel,click:c}]),l.close(c)}}function n(a){return{sort:a.currentSort(),filter:a.currentFilter()}}jpvs.DataGrid=function(a){this.attach(a),this.dataItemClick=jpvs.event(this),this.changedSortFilter=jpvs.event(this)},jpvs.DataGrid.allStrings={en:{column:"Column",currentColumn:"Selected column",addFilter:"Add filtering rule",addSort:"Add sorting rule",clickToSortAndFilter:"Click here for sorting/filtering options",clickToSort:"Click here for sorting options",clickToFilter:"Click here for filtering options",titleSortAndFilter:"Sorting/filtering options",titleSort:"Sorting options",titleFilter:"Filtering options",noFilterSpecified:"No filtering criteria specified",noSortSpecified:"No sorting specified",ok:"OK",cancel:"Cancel",remove:"Remove",condition:"Condition",orderBy:"Order by",thenBy:"Then by",descending:"Descending",op_EQ:"is equal to",op_NEQ:"is not equal to",op_CONTAINS:"contains",op_NCONTAINS:"does not contain",op_STARTS:"starts with",op_NSTARTS:"does not start with",op_LT:"is less than",op_LTE:"is less than or equal to",op_GT:"is greater than",op_GTE:"is greater than or equal to"},it:{column:"Colonna",currentColumn:"Colonna selezionata",addFilter:"Aggiungi criterio di filtro",addSort:"Aggiungi criterio di ordinamento",clickToSortAndFilter:"Clicca qui per ordinare/filtrare i dati",clickToSort:"Clicca qui per ordinare i dati",clickToFilter:"Clicca qui per filtrare i dati",titleSortAndFilter:"Ordinamento/filtro",titleSort:"Ordinamento",titleFilter:"Filtro",noFilterSpecified:"Nessun criterio di filtro specificato",noSortSpecified:"Nessun ordinamento specificato",ok:"OK",cancel:"Annulla",remove:"Rimuovi",condition:"Condizione",orderBy:"Ordina per",thenBy:"Poi per",descending:"Ordine inverso",op_EQ:"รจ uguale a",op_NEQ:"รจ diverso da",op_CONTAINS:"contiene",op_NCONTAINS:"non contiene",op_STARTS:"inizia per",op_NSTARTS:"non inizia per",op_LT:"รจ minore di",op_LTE:"รจ minore o uguale a",op_GT:"รจ maggiore di",op_GTE:"รจ maggiore o uguale a"}},jpvs.DataGrid.getFilteringOperands=function(){return[{value:"EQ",text:jpvs.DataGrid.strings.op_EQ},{value:"NEQ",text:jpvs.DataGrid.strings.op_NEQ},{value:"CONTAINS",text:jpvs.DataGrid.strings.op_CONTAINS},{value:"NCONTAINS",text:jpvs.DataGrid.strings.op_NCONTAINS},{value:"STARTS",text:jpvs.DataGrid.strings.op_STARTS},{value:"NSTARTS",text:jpvs.DataGrid.strings.op_NSTARTS},{value:"LT",text:jpvs.DataGrid.strings.op_LT},{value:"LTE",text:jpvs.DataGrid.strings.op_LTE},{value:"GT",text:jpvs.DataGrid.strings.op_GT},{value:"GTE",text:jpvs.DataGrid.strings.op_GTE}]},jpvs.makeWidget({widget:jpvs.DataGrid,type:"DataGrid",cssClass:"DataGrid",create:function(a){var b=document.createElement("table");return $(a).append(b),b},init:function(a){jpvs.DataGrid.strings=jpvs.DataGrid.allStrings[jpvs.currentLocale()],this.element.on("click","tr",function(b){return i(a,b.currentTarget)}),this.element.on("mouseenter","thead > tr",function(b){j(a,b.currentTarget)}),this.element.on("mouseleave","thead > tr",function(b){k(a,b.currentTarget)})},canAttachTo:function(a){return!1},prototype:{template:jpvs.property({get:function(){return this.element.data("template")},set:function(a){this.element.data("template",a)}}),emptyRowTemplate:jpvs.property({get:function(){return this.element.data("emptyRowTemplate")},set:function(a){this.element.data("emptyRowTemplate",a)}}),binder:jpvs.property({get:function(){return this.element.data("binder")},set:function(a){this.element.data("binder",a)}}),caption:jpvs.property({get:function(){var a=this.element.children("caption");return 0!=a.length?a.text():null},set:function(a){var b=this.element.children("caption");0==b.length&&(b=$(document.createElement("caption")),this.element.prepend(b)),b.text(a)}}),enableEvenOdd:jpvs.property({get:function(){var a=this.element.data("enableEvenOdd");return a===!0||a===!1?a:!0},set:function(a){this.element.data("enableEvenOdd",a)}}),enableSorting:jpvs.property({get:function(){var a=this.element.data("enableSorting");return a===!0||a===!1?a:!1},set:function(a){this.element.data("enableSorting",a)}}),enableFiltering:jpvs.property({get:function(){var a=this.element.data("enableFiltering");return a===!0||a===!1?a:!1},set:function(a){this.element.data("enableFiltering",a)}}),sortAndFilterExpressions:jpvs.property({get:function(){var a=this.element.data("sortAndFilterExpressions");return a||(a=[],this.element.find("thead > tr > th").each(function(){var b=$(this).text();a.push({value:b,text:b})})),a},set:function(a){this.element.data("sortAndFilterExpressions",a)}}),currentSort:jpvs.property({get:function(){return this.element.data("currentSort")||null},set:function(a){this.element.data("currentSort",a)}}),currentFilter:jpvs.property({get:function(){return this.element.data("currentFilter")||null},set:function(a){this.element.data("currentFilter",a)}}),clear:function(){return this.element.find("tr").remove(),this},dataBind:function(b){return a(this,"tbody",b),this},dataBindHeader:function(b){return a(this,"thead",b),this},dataBindFooter:function(b){return a(this,"tfoot",b),this},addBodyRow:function(a,d){var e="tbody",g=b(this,e),h=f(e);return c(this,h,g,a,d),this},addHeaderRow:function(a,d){var e="thead",g=b(this,e),h=f(e);return c(this,h,g,a,d),this},addFooterRow:function(a,d){var e="tfoot",g=b(this,e),h=f(e);return c(this,h,g,a,d),this},removeBodyRow:function(a){var c="tbody",e=b(this,c);return d(this,e,a),this},removeHeaderRow:function(a){var c="thead",e=b(this,c);return d(this,e,a),this},removeFooterRow:function(a){var c="tfoot",e=b(this,c);return d(this,e,a),this},removeBodyRows:function(a,c){var e="tbody",f=b(this,e);return d(this,f,a,c),this},removeHeaderRows:function(a,c){var e="thead",f=b(this,e);return d(this,f,a,c),this},removeFooterRows:function(a,c){var e="tfoot",f=b(this,e);return d(this,f,a,c),this}}}),jpvs.DataGrid.defaultBinder=function(a,d){function e(){function e(a){h.empty(),$.each(a.data,function(a,b){c(g,i,h,b)})}var h=b(g,a),i=f(a);jpvs.readDataSource(d,null,null,n(g),e)}var g=this;e(),g.changedSortFilter.unbind("binder"),g.changedSortFilter.bind("binder",e)},jpvs.DataGrid.pagingBinder=function(a){function d(a,d){function e(){var a,b=l.element.data("pagerId");if(b)a=jpvs.find("#"+b);else{var c=document.createElement("div");l.element.before(c),a=jpvs.Pager.create(c),b=jpvs.randomString(20),a.element.attr("id",b),l.element.data("pagerId",b)}return a.change.unbind("DataGrid"),a.change.bind("DataGrid",j),a}function j(){var b=this.page();p=b,i=p,k(l,a,d,q)}function k(){function a(a){m.empty(),$.each(a.data,function(a,b){c(l,o,m,b)});var b=Math.floor((a.total+g-1)/g);q.totalPages(b),q.page(p)}var b=p*g;jpvs.readDataSource(d,b,g,n(l),a)}var l=this,m=b(l,a),o=f(a),p=h?i:0;i=p;var q=e();k(),l.changedSortFilter.unbind("binder"),l.changedSortFilter.bind("binder",k)}function e(){return i}var g=a&&a.pageSize||10,h=a&&a.preserveCurrentPage,i=0;return d.currentPage=jpvs.property({get:e}),d},jpvs.DataGrid.scrollingBinder=function(a){function d(a,d){function m(a){for(var b,c=a,d=c+e,f=!0,g=c;d>g&&E>g;g++){var i=D[g];if(!i){f=!1,b=g;break}}if(f)u();else{var c=Math.max(0,b-h),d=Math.min(b+h,E);o(c,d)}}function o(a,b){k.push({start:a,end:b}),p()}function p(){if(!l&&0!=k.length){for(var a,b,c=k[0].start,e=k[0].end,f=0;f<k.length;f++){var g=k[f];a=g.start,b=g.end,c=Math.min(c,a),e=Math.max(e,b)}k=[],l=!0,jpvs.readDataSource(d,c,e-c,n(z),q(u))}}function q(a){return function(b){l=!1,null===E&&(E=b.total);for(var c=b.start,d=b.count;D.length<E;)D.push(void 0);for(var e=c,f=0;d>f;)D[e++]=b.data[f++];a&&a()}}function r(a){if(null===C)s(a);else{var b=a-C;Math.abs(b)<e?t(a,b):s(a)}C=a}function s(a){A.empty();for(var b=Math.min(a+e,E),d=a;b>d;d++)c(z,B,A,D[d]);y()}function t(a,b){if(b>0){z.removeBodyRows(0,b);for(var d=a+e-b,f=0;f++<b;)E>d&&c(z,B,A,D[d++])}else if(0>b){b=-b,z.removeBodyRows(e-b,b);for(var d=a,f=0;b>f;)E>d&&c(z,B,A,D[d++],f++)}y()}function u(){for(var a=z.template(),b=z.emptyRowTemplate(),c=A.children("tr"),d=C,e=d+c.length,f=!1,h=0,i=d;e>i;i++){var j=D[i],k=c.eq(h++);j&&k.data("fromEmptyRowTemplate")&&a&&(g(k,B,a,b,j),f=!0)}f&&y(),p()}function v(){var a,b=z.element.data("scrollerId");if(b)a=jpvs.find("#"+b);else{var c=document.createElement("div");z.element.after(c),a=jpvs.Scroller.create(c),b=jpvs.randomString(20),a.element.attr("id",b),z.element.data("scrollerId",b),a.content.append(z.element),a.contentSize({width:"1000%",height:"200%"}),x(),a.objectSize({width:F+a.scrollbarW,height:G+a.scrollbarH})}return a.change.unbind("DataGrid"),a.change.bind("DataGrid",w),a}function w(){var a=this.scrollPosition(),b=a.left,c=0;this.contentPosition({top:c,left:b});var d=G/e*E-G,f=Math.min(E,Math.floor(a.top/d*(E-e+5)));r(f),m(f)}function x(){var a={width:z.element.outerWidth(),height:z.element.outerHeight()};G=Math.max(G,a.height),F=Math.max(F,a.width)}function y(){if(H){x();var a=G/e*E;H.scrollableSize({width:F,height:a}),H.objectSize({width:i||F+H.scrollbarW,height:j||G+H.scrollbarH})}}var z=this,A=b(z,a),B=f(a),C=null,D=[],E=null,F=0,G=0,H=v();jpvs.readDataSource(d,0,e,n(z),q(function(){r(0),jpvs.readDataSource(d,e,h,n(z),q(u))})),z.changedSortFilter.unbind("binder"),z.changedSortFilter.bind("binder",function(){D=[],E=null,jpvs.readDataSource(d,C,e,n(z),q(function(){s(C)}))})}var e=a&&a.pageSize||10,h=a&&a.chunkSize||5*e,i=a&&a.width,j=a&&a.height,k=[],l=!1;return d}}(),jQuery(function(a){a.datepicker.regional.it={closeText:"Chiudi",prevText:"&#x3c;Prec",nextText:"Succ&#x3e;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Luned&#236","Marted&#236","Mercoled&#236","Gioved&#236","Venerd&#236","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}}),function(){function a(a){if(!a)return"";var c=a.getFullYear(),d=a.getMonth()+1,e=a.getDate();return b(c,4)+b(d,2)+b(e,2)}function b(a,b){for(a=$.trim(a.toString());a.length<b;)a="0"+a;return a}function c(a){if(a=$.trim(a),""==a||8!=a.length)return null;var b=parseInt(a.substring(0,4)),c=parseInt(a.substring(4,6)),d=parseInt(a.substring(6,8));return new Date(b,c-1,d)}jpvs.DateBox=function(a){this.attach(a),this.change=jpvs.event(this)},jpvs.makeWidget({widget:jpvs.DateBox,type:"DateBox",cssClass:"DateBox",create:function(a){var b=document.createElement("input");return $(b).attr("type","text"),$(a).append(b),b},init:function(a){this.element.datepicker({onSelect:function(b,c){return a.change.fire(a)}}),this.element.change(function(){return a.change.fire(a)}),this.element.datepicker("option",$.datepicker.regional[jpvs.currentLocale()]),this.element.datepicker("hide")},canAttachTo:function(a){return!1},prototype:{date:jpvs.property({get:function(){return this.element.datepicker("getDate")},set:function(a){this.element.datepicker("setDate",a)}}),dateString:jpvs.property({get:function(){return a(this.date())},set:function(a){this.date(c(a))}})}})}(),function(){function a(a,b){var c=a.document(),d=c&&c.fields,e=$();a.element.find("span.Field").each(function(){var c=$(this),f=c.data("jpvs.DocumentEditor.fieldInfo"),g=f&&f.fieldName;if(g){var h=b[g];if(h){d[g]={value:h.value};var i=function(a){return a},j=a.fieldDisplayMapper()||i,k=j(h.value);jpvs.write(c.empty(),k),h.highlight&&(e=e.add(c))}}}),e.length&&jpvs.flashClass(e,"Field-Highlight")}function b(a,b){var c=e();i(a,b,c),j(a,c)}function c(a){var b=d(a);jpvs.runBackgroundTask(b)}function d(a){return function(b){if(b.executionState=b.executionState||1,1==b.executionState)return b.elem=a.element,b.doc=a.document(),b.sections=b.doc&&b.doc.sections,b.fields=b.doc&&b.doc.fields,b.fieldHighlightList=e(),b.executionState=2,{progress:"0%"};if(2==b.executionState)return b.domElems=[],b.elem.empty(),$.each(b.sections,function(a,c){var d=jpvs.writeTag(b.elem,"div");d.addClass("Section").css("position","relative"),d.data("jpvs.DocumentEditor.sectionNum",a),f(d,c);var e=jpvs.writeTag(d,"div");e.addClass("Header"),g(e,c);var i=jpvs.writeTag(d,"div");i.addClass("Footer"),h(i,c);var j=jpvs.writeTag(i,"div");j.css("position","absolute"),j.css("bottom","0px"),j.css("left","0px"),j.css("right","0px");var k=jpvs.writeTag(d,"div");k.addClass("Body"),jpvs.writeTag(k,"img").attr("src",jpvs.Resources.images.loading),b.domElems.push({sectionElement:d,headerElement:e,bodyElement:k,footerElementInside:j,footerElement:i}),d.data("jpvs.DocumentEditor.domElem",{headerElement:e,bodyElement:k,footerElementInside:j,footerElement:i})}),b.executionState=3,{progress:"1%"};if(3==b.executionState){if(null==b.sectionNum?b.sectionNum=0:b.sectionNum++,b.sectionNum>=b.sections.length)return b.sectionNum=null,b.executionState=4,{progress:"90%"};var c=b.sections[b.sectionNum],d=b.domElems[b.sectionNum];i(a,b.sectionNum,b.fieldHighlightList),c.header&&(c.header.highlight=!1),c.body&&(c.body.highlight=!1),c.footer&&(c.footer.highlight=!1);var l=1+Math.floor(b.sectionNum/(b.sections.length-1)*89);return{progress:l+"%"}}if(4==b.executionState){if(null==b.sectionNum?b.sectionNum=0:b.sectionNum++,b.sectionNum>=b.sections.length)return b.sectionNum=null,b.executionState=5,{progress:"99%"};var c=b.sections[b.sectionNum],d=b.domElems[b.sectionNum],m=jpvs.writeTag(d.sectionElement,"div");m.addClass("MenuContainer").css({position:"absolute",top:"0px",right:"0px",zIndex:(1e4-b.sectionNum).toString()}),k(a,m,b.sections,b.sectionNum,c);var l=90+Math.floor(b.sectionNum/(b.sections.length-1)*9);return{progress:l+"%"}}return 5==b.executionState?(j(a,b.fieldHighlightList),!1):void 0}}function e(){return{list:$()}}function f(a,b){var c=b&&b.margins,d=l(c,"left","2cm"),e=l(c,"top","2cm"),f=l(c,"right","2cm"),g=l(c,"bottom","2cm");a.css("padding-left",d),a.css("padding-top",e),a.css("padding-right",f),a.css("padding-bottom",g)}function g(a,b){var c=b&&b.margins,d=l(c,"left","2cm"),e=l(c,"right","2cm"),f=b&&b.header&&b.header.margins,g=l(f,"top","0.5cm"),h=l(f,"left",d),i=l(f,"right",e),j=b&&b.header&&b.header.height||"1cm";a.css("position","absolute"),a.css("overflow","hidden"),a.css("top",g),a.css("left",h),a.css("right",i),a.css("height",j)}function h(a,b){var c=b&&b.margins,d=l(c,"left","2cm"),e=l(c,"right","2cm"),f=b&&b.footer&&b.footer.margins,g=l(f,"bottom","0.5cm"),h=l(f,"left",d),i=l(f,"right",e),j=b&&b.footer&&b.footer.height||"1cm";a.css("position","absolute"),a.css("overflow","hidden"),a.css("bottom",g),a.css("left",h),a.css("right",i),a.css("height",j)}function i(a,b,c){var d=a.element.find("div.Section").eq(b),e=d.data("jpvs.DocumentEditor.domElem"),i=a.document(),j=i&&i.sections,k=i&&i.fields,l=j&&j[b];f(d,l),g(e.headerElement,l),h(e.footerElement,l),m(a,e.headerElement,e.headerElement,l&&l.header&&l.header.content,k,"Header-Hover",l&&l.header&&l.header.highlight?"Header-Highlight":"",function(a){l.header=l.header||{},l.header.content=a,l.header.highlight=!0},c,jpvs.DocumentEditor.strings.clickToEditHeader),m(a,e.bodyElement,e.bodyElement,l&&l.body&&l.body.content,k,"Body-Hover",l&&l.body&&l.body.highlight?"Body-Highlight":"",function(a){l.body=l.body||{},l.body.content=a,l.body.highlight=!0},c,jpvs.DocumentEditor.strings.clickToEdit),m(a,e.footerElementInside,e.footerElement,l&&l.footer&&l.footer.content,k,"Footer-Hover",l&&l.footer&&l.footer.highlight?"Footer-Highlight":"",function(a){l.footer=l.footer||{},l.footer.content=a,l.footer.highlight=!0},c,jpvs.DocumentEditor.strings.clickToEditFooter)}function j(a,b){if(b.list.length){jpvs.flashClass(b.list,"Field-Highlight");var c=a.document(),d=c&&c.fields;d&&$.each(d,function(a,b){b.highlight=!1})}}function k(a,b,c,d,e){var f=jpvs.Menu.create(b);f.template(["HorizontalMenuBar","VerticalMenuBar"]),f.itemTemplate(["HorizontalMenuBarItem","VerticalMenuBarItem"]),f.menuItems([{text:"...",tooltip:jpvs.DocumentEditor.strings.sectionOptions,items:[{text:jpvs.DocumentEditor.strings.sectionMargins,click:t(a,e,d)},jpvs.Menu.Separator,{text:jpvs.DocumentEditor.strings.addSectionBefore,click:u(a,c,d)},{text:jpvs.DocumentEditor.strings.addSectionAfter,click:u(a,c,d+1)},{text:jpvs.DocumentEditor.strings.removeSection,click:v(a,c,d)},jpvs.Menu.Separator,{text:jpvs.DocumentEditor.strings.sortSections,click:w(a,c)}]}])}function l(a,b,c){if(a){var d=a[b]||a.all;if(d)return d}return c}function m(a,b,c,d,e,f,g,h,i,j){var k=d;d||(k=""),b.empty();var l=c.parent(),m=l.data("jpvs.DocumentEditor.sectionNum");k=jpvs.cleanHtml(k),""==$.trim(k)&&(k=j),c.css("cursor","pointer").attr("title",jpvs.DocumentEditor.strings.clickToEdit).unbind(".writeContent").bind("click.writeContent",function(){return r(a,d,h,m),!1}).bind("mouseenter.writeContent",function(){c.parent().addClass("Section-Hover"),c.addClass(f)}).bind("mouseleave.writeContent",function(){c.parent().removeClass("Section-Hover"),c.removeClass(f)});var o=XmlParser.parseString("<root>"+k+"</root>",null,!0);n(a,b,o,e,i),""!=g&&jpvs.flashClass(b,g)}function n(a,b,c,d,e){if("#TEXT"==c.name)o(a,b,c.value||"",d,e);else if("root"==c.name)c.children&&$.each(c.children,function(c,f){n(a,b,f,d,e)});else{var f=c.name,g=jpvs.writeTag(b,f);c.attributes&&$.each(c.attributes,function(a,b){g.attr(a,b)}),c.children&&($.each(c.children,function(b,c){n(a,g,c,d,e)}),"p"==f&&jpvs.writeTag(g,"br"))}}function o(a,b,c,d,e){for(var f=/\$\{(.*?)\}/g,g=0,h=f.exec(c);null!=h;h=f.exec(c)){var i=h[0],j=h[1],k=f.lastIndex,l=k-i.length,m=c.substring(g,l);p(b,m),q(a,b,d,j,e),g=k}var n=c.substring(g);p(b,n)}function p(a,b){var c=b;$.each(z,function(a,b){c=c.replace(a,b)}),jpvs.write(a,c)}function q(a,b,c,d,e){var f=c&&c[d],g=f&&f.value,h=f&&f.highlight,i=function(a){return a},j=a.fieldDisplayMapper()||i;g=j(g),""==$.trim(g)&&(g=jpvs.DocumentEditor.strings.clickToEditField);var k=jpvs.writeTag(b,"span",g);k.addClass("Field").attr("title",jpvs.DocumentEditor.strings.clickToEditField).click(function(){return s(a,c,d),!1}).hover(function(){k.addClass("Field-Hover")},function(){k.removeClass("Field-Hover")}),k.data("jpvs.DocumentEditor.fieldInfo",{fieldName:d}),h&&(e.list=e.list.add(k))}function r(a,c,d,e){function f(f){void 0!==f&&f!=c&&(d(f),b(a,e),a.change.fire(a))}var g=a.richTextEditor()||x();g.editText.call(g,c,f)}function s(b,c,d){function e(c){if(void 0!==c&&c!=h){var e={};e[d]={value:c,highlight:!0},a(b,e),b.change.fire(b)}}var f=b.fieldEditor()||y(),g=c&&c[d],h=g&&g.value;f.editField.call(f,c,d,e)}function t(a,c,d){function e(a){var b=$.trim(a.text().replace(" ",""));if(""==b)return null;var c=/^\+?[0-9]{1,2}(\.[0-9]{1,3})?(cm)?$/gi;return c.test(b)?(b.indexOf("cm")<0&&(b+="cm"),a.text(b),b):void 0}function f(a,b,c){var d=a.writeRow();d.writeCell(jpvs.DocumentEditor.strings[b]);var e=jpvs.TextBox.create(d.writeCell());e.text(c);var f=jpvs.DocumentEditor.strings[b+"_Notes"];return f&&d.writeCell(f),e}return function(){function g(a){if(!a)return g([m,n,o,p,q,r,s,t,u,v,w,x,y,z,A]);for(var b=!1,c=[],d=0;d<a.length;d++){var f=a[d];f.removeState(jpvs.states.ERROR);var h=e(a[d]);void 0===h&&(f.addState(jpvs.states.ERROR),c.push(f),b=!0)}return b&&jpvs.alert(jpvs.DocumentEditor.strings.error,jpvs.DocumentEditor.strings.invalidValuesFound,c[0]),!b}function h(){g()&&k.hide(function(){i(),k.destroy()})}function i(){g()&&(c.margins.all=e(m),c.margins.top=e(n),c.margins.bottom=e(o),c.margins.left=e(p),c.margins.right=e(q),c.header.margins.all=e(r),c.header.margins.top=e(s),c.header.margins.left=e(t),c.header.margins.right=e(u),c.header.height=e(v),c.footer.margins.all=e(w),c.footer.margins.bottom=e(x),c.footer.margins.left=e(y),c.footer.margins.right=e(z),c.footer.height=e(A),b(a,d),a.change.fire(a))}function j(){k.destroy()}var k=jpvs.Popup.create().title(jpvs.DocumentEditor.strings.sectionMargins).close(function(){this.destroy()});c.margins=c.margins||{},c.header=c.header||{},c.header.margins=c.header.margins||{},c.footer=c.footer||{},c.footer.margins=c.footer.margins||{};var l=jpvs.Table.create(k).caption(jpvs.DocumentEditor.strings.bodyMargins),m=f(l,"defaultMargin",c.margins.all),n=f(l,"topMargin",c.margins.top),o=f(l,"bottomMargin",c.margins.bottom),p=f(l,"leftMargin",c.margins.left),q=f(l,"rightMargin",c.margins.right);l=jpvs.Table.create(k).caption(jpvs.DocumentEditor.strings.headerMargins);var r=f(l,"defaultMargin",c.header.margins.all),s=f(l,"topMargin",c.header.margins.top),t=f(l,"leftMargin",c.header.margins.left),u=f(l,"rightMargin",c.header.margins.right),v=f(l,"height",c.header.height);l=jpvs.Table.create(k).caption(jpvs.DocumentEditor.strings.footerMargins);var w=f(l,"defaultMargin",c.footer.margins.all),x=f(l,"bottomMargin",c.footer.margins.bottom),y=f(l,"leftMargin",c.footer.margins.left),z=f(l,"rightMargin",c.footer.margins.right),A=f(l,"height",c.footer.height);jpvs.writeButtonBar(k,[{text:jpvs.DocumentEditor.strings.ok,click:h},{text:jpvs.DocumentEditor.strings.apply,click:i},{text:jpvs.DocumentEditor.strings.cancel,click:j}]),k.show()}}function u(a,b,d){return function(){var e={margins:{},header:{margins:{}},footer:{margins:{}},body:{highlight:!0}};d>=b.length?b.push(e):b.splice(d,0,e),c(a),a.change.fire(a)}}function v(a,b,d){function e(){b.splice(d,1),c(a),a.change.fire(a)}return function(){return b.length<2?void jpvs.alert(jpvs.DocumentEditor.strings.error,jpvs.DocumentEditor.strings.removeSection_Forbidden):void jpvs.confirm(jpvs.DocumentEditor.strings.removeSection,jpvs.DocumentEditor.strings.removeSection_Warning,e)}}function w(a,b){return function(){function d(a){jpvs.writeTag(this,"img").attr("src",jpvs.Resources.images.moveButton),this.parent().css("cursor","move").data("section",a)}function e(a){function b(a){return a.length>150?a.substring(0,147)+"...":a}jpvs.write(this,b(jpvs.stripHtml(a&&a.body&&a.body.content)))}function f(){i.hide(function(){g(),i.destroy()})}function g(){var d=j.element.find("tbody > tr");b.splice(0,b.length),d.each(function(){var a=$(this).data("section");b.push(a)}),c(a),a.change.fire(a)}function h(){i.destroy()}var i=jpvs.Popup.create().title(jpvs.DocumentEditor.strings.sortSections).close(function(){this.destroy()});jpvs.writeln(i,jpvs.DocumentEditor.strings.sortSections_Prompt),jpvs.writeTag(i,"hr");var j=jpvs.DataGrid.create(i);j.template([d,e]),j.dataBind(b),j.element.sortable({items:"tbody > tr"}),jpvs.writeTag(i,"hr"),jpvs.writeButtonBar(i,[{text:jpvs.DocumentEditor.strings.ok,click:f},{text:jpvs.DocumentEditor.strings.apply,click:g},{text:jpvs.DocumentEditor.strings.cancel,click:h}]),i.show()}}function x(){function a(a,b){function c(){e.hide(function(){b(f.text()),e.destroy()})}function d(){e.destroy(),b()}var e=jpvs.Popup.create().title(jpvs.DocumentEditor.strings.textEditor).close(function(){this.destroy()}),f=jpvs.MultiLineTextBox.create(e);f.text(a),f.element.attr({rows:10,cols:50}),jpvs.writeButtonBar(e,[{text:jpvs.DocumentEditor.strings.ok,click:c},{text:jpvs.DocumentEditor.strings.cancel,click:d}]),e.show(function(){f.focus()})}return{editText:a}}function y(){function a(a,b,c){function d(){f.hide(function(){c(g.text()),f.destroy()})}function e(){f.destroy(),c()}var f=jpvs.Popup.create().title(jpvs.DocumentEditor.strings.fieldEditor).close(function(){this.destroy()}),g=jpvs.TextBox.create(f),h=a&&a[b],i=h&&h.value;g.text(i||""),jpvs.writeButtonBar(f,[{text:jpvs.DocumentEditor.strings.ok,click:d},{text:jpvs.DocumentEditor.strings.cancel,click:e}]),f.show(function(){g.focus()})}return{editField:a}}jpvs.DocumentEditor=function(a){this.attach(a),this.change=jpvs.event(this)},jpvs.DocumentEditor.allStrings={en:{clickToEdit:"Click here to edit",clickToEditField:"Click here to edit this field",clickToEditHeader:"Click here to edit the header",clickToEditFooter:"Click here to edit the footer",textEditor:"Text editor",fieldEditor:"Field editor",sectionOptions:"Options",sectionMargins:"Set margins",removeSection:"Remove section",removeSection_Warning:"The section will be removed. Do you wish to continue?",removeSection_Forbidden:"The section may not be removed. There must be at least one section in the document.",addSectionBefore:"Insert new section before",addSectionAfter:"Insert new section after",sortSections:"Reorder sections",sortSections_Prompt:"Please reorder the sections of the document by dragging them up and down.",invalidValuesFound:"Invalid values found. Please correct and try again.",bodyMargins:"Page margins",defaultMargin:"Default margin",defaultMargin_Notes:"Example: 2.5cm. Used only when any of left/right/bottom/top is missing.",topMargin:"Top margin",topMargin_Notes:"Example: 2cm. If missing, the default margin is used.",bottomMargin:"Bottom margin",bottomMargin_Notes:"Example: 2cm. If missing, the default margin is used.",leftMargin:"Left margin",leftMargin_Notes:"Example: 2cm. If missing, the default margin is used.",rightMargin:"Right margin",rightMargin_Notes:"Example: 2cm. If missing, the default margin is used.",headerMargins:"Header margins and height",footerMargins:"Footer margins and height",height:"Height",error:"Error",ok:"OK",cancel:"Cancel",apply:"Apply"},it:{clickToEdit:"Clicca qui per modificare",clickToEditField:"Clicca qui per modificare il campo",clickToEditHeader:"Clicca qui per modificare l'intestazione",clickToEditFooter:"Clicca qui per modificare il piรจ di pagina",textEditor:"Modifica testo",fieldEditor:"Modifica campo",sectionOptions:"Opzioni",sectionMargins:"Imposta margini",removeSection:"Elimina sezione",removeSection_Warning:"Confermi l'eliminazione della sezione?",removeSection_Forbidden:"La sezione non puรฒ essere rimossa. Il documento deve contenere almeno una sezione.",addSectionBefore:"Inserisci sezione prima",addSectionAfter:"Inserisci sezione dopo",sortSections:"Cambia ordine sezioni",sortSections_Prompt:"Riordinare le sezioni trascinandole su e giรน.",invalidValuesFound:"Trovati valori non validi. Correggere e riprovare.",bodyMargins:"Margini pagina",defaultMargin:"Margine predefinito",defaultMargin_Notes:"Esempio: 2.5cm. Usato solo quando manca almeno uno dei margini sinistro/destro/inferiore/superiore.",topMargin:"Margine superiore",topMargin_Notes:"Esempio: 2cm. Se non specificato, viene usato il margine predefinito.",bottomMargin:"Margine inferiore",bottomMargin_Notes:"Esempio: 2cm. Se non specificato, viene usato il margine predefinito.",leftMargin:"Margine sinistro",leftMargin_Notes:"Esempio: 2cm. Se non specificato, viene usato il margine predefinito.",rightMargin:"Margine destro",rightMargin_Notes:"Esempio: 2cm. Se non specificato, viene usato il margine predefinito.",headerMargins:"Margini ed altezza dell'intestazione",footerMargins:"Margini ed altezza del piรจ di pagina",height:"Altezza",error:"Errore",ok:"OK",cancel:"Annulla",apply:"Applica"}},jpvs.makeWidget({widget:jpvs.DocumentEditor,type:"DocumentEditor",cssClass:"DocumentEditor",create:function(a){var b=document.createElement("div");return $(a).append(b),b},init:function(a){jpvs.DocumentEditor.strings=jpvs.DocumentEditor.allStrings[jpvs.currentLocale()]},canAttachTo:function(a){return!1},prototype:{document:jpvs.property({get:function(){return this.element.data("document")},setTask:function(a){return this.element.data("document",a),
this.element.empty(),d(this)}}),fields:jpvs.property({get:function(){var a=this.document();return a&&a.fields},set:function(b){a(this,b)}}),richTextEditor:jpvs.property({get:function(){return this.element.data("richTextEditor")},set:function(a){this.element.data("richTextEditor",a)}}),fieldEditor:jpvs.property({get:function(){return this.element.data("fieldEditor")},set:function(a){this.element.data("fieldEditor",a)}}),fieldDisplayMapper:jpvs.property({get:function(){return this.element.data("fieldDisplayMapper")},set:function(a){this.element.data("fieldDisplayMapper",a)}})}});var z={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"}}(),jpvs.DropDownList=function(a){this.attach(a),this.change=jpvs.event(this)},jpvs.makeWidget({widget:jpvs.DropDownList,type:"DropDownList",cssClass:"DropDownList",create:function(a){var b=document.createElement("select");return $(a).append(b),b},init:function(a){this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is("select")},prototype:{clearItems:function(){return this.element.empty(),this},addItem:function(a,b){var c=a,d=null!=b?b:a;if(null!=c&null!=d){var e=document.createElement("option");$(e).attr("value",c).text(d).appendTo(this.element)}return this},addItems:function(a){var b=this;return $.each(a,function(a,c){null!=c&&(null!=c.value?b.addItem(c.value,c.text):b.addItem(c))}),this},count:function(){return this.element.find("option").length},selectedValue:jpvs.property({get:function(){return this.element.val()},set:function(a){this.element.val(a)}})}}),jpvs.ImageButton=function(a){this.attach(a),this.click=jpvs.event(this)},jpvs.makeWidget({widget:jpvs.ImageButton,type:"ImageButton",cssClass:"ImageButton",create:function(a){var b=document.createElement("img");return $(b).attr("src",jpvs.Resources.images.empty16x16),$(a).append(b),b},init:function(a){var b=this.element.attr("src"),c=this.element.data("jpvsHover");this.imageUrls({normal:b,hover:c}),this.element.hover(function(){a.element.attr("src",a.getHoverImage())},function(){a.element.attr("src",a.getNormalImage())}),this.element.click(function(){return a.click.fire(a)})},canAttachTo:function(a){return!1},prototype:{imageUrls:jpvs.property({get:function(){return this.element.data("images")},set:function(a){this.element.data("images",a),this.element.attr("src",this.getNormalImage())}}),getNormalImage:function(){var a=this.imageUrls();return a?"string"==typeof a?a:a.normal||"":""},getHoverImage:function(){var a=this.imageUrls();return a?"string"==typeof a?a:a.hover||a.normal||"":""}}}),jpvs.LinkButton=function(a){this.attach(a),this.click=jpvs.event(this)},jpvs.makeWidget({widget:jpvs.LinkButton,type:"LinkButton",cssClass:"LinkButton",create:function(a){var b=document.createElement("a");return $(a).append(b),b},init:function(a){a.element.attr("href","#"),this.element.click(function(b){return b.preventDefault(),a.click.fire(a)})},canAttachTo:function(a){return!1},prototype:{text:jpvs.property({get:function(){return this.element.text()},set:function(a){this.element.text(a)}})}}),function(){function a(a){return jpvs.property({get:function(){var b=this.element.data(a);if(!b)return[];if("string"==typeof b){var c=b.split(",");return c}return b},set:function(b){this.element.data(a,b)}})}function b(a){function b(a,c,e){var f=$(a).contents();f.each(function(){var a=this,f=$(this);if(3==a.nodeType)c&&(c.text=d(c.text,f.text()));else if(1==a.nodeType){var g=a.nodeName.toLowerCase();if("ul"==g||"ol"==g)b(a,null,e);else if("a"==g)c&&(c.text=d(c.text,f.text()),c.href=f.attr("href"));else if("button"==g)c&&(c.text=d(c.text,f.text()),c.click=a.onclick);else{var h=c;c={text:"",items:[]},e.push(c),b(a,c,c.items),c=h}}})}function c(a){if(a)for(var b=0;b<a.length;b++){var d=a[b],e=null!=d.text&&""!=$.trim(d.text),f=null!=d.items&&0!=d.items.length;e||f||(a[b]=jpvs.Menu.Separator),c(d.items)}}function d(a,b){return a=$.trim(a)+" "+$.trim(b),$.trim(a)}var e=[];return b(a,null,e),c(e),e}function c(a,b){function c(a,b){if(b){b.parentElement=a;var d=b.getChildren();$.each(d,function(a,d){c(b,d)})}}function e(a,b,c,f,g){if(g&&0!=g.length){var h=d(b[f],f,jpvs.Menu.Templates),i=d(c[f],f,jpvs.Menu.ItemTemplates),j=jpvs.applyTemplate(a,h,{items:g,itemTemplate:i,level:f});0==f?j.show():j.hide();var k=j.element.find(".Item");return $.each(g,function(d,g){var h=k[d];if(h){var i=$(h);i.data("menuItem",g);var j=e(a,b,c,f+1,g&&g.items);j&&i.data("subMenu",j)}}),j}}a.element.empty();var f=a.template(),g=a.itemTemplate();a.rootElement=e(a.element,f,g,0,b),c(null,a.rootElement)}function d(a,b,c){var d;return"function"==typeof a?d=a:"string"==typeof a&&(d=c[a]),d||(d=0==b?c.Default_Level0:c.Default_OtherLevels),d}function e(a){function b(a){if(a){a.hideIfNonRoot();var c=a.getChildren();$.each(c,function(a,c){b(c)})}}var c=a.rootElement;b(c)}function f(a){var b=$(a.currentTarget),c=b.data("menuItem");c!==jpvs.Menu.Separator&&b.addClass("Item-Hover")}function g(a){var b=$(a.currentTarget);b.removeClass("Item-Hover")}function h(a){var b=$(a.target),c=b.closest(".Menu .Item"),d=c.closest(".Menu");if(0==c.length)$.each(i,function(a,b){e(b)});else{var f=c.data("menuItem");if(f===jpvs.Menu.Separator)return;var g=jpvs.find(d),h=c.data("subMenu");h?h.show():e(g),g.click.fire(g,null,f),f&&f.click&&f.click.call(f,f),f&&f.href&&(window.location=f.href)}}var i={};$(document).ready(function(){try{$(document).on("mouseover.jpvsMenu",".Menu .Item",f),$(document).on("mouseout.jpvsMenu",".Menu .Item",g),$(document).on("click.jpvsMenu",h)}catch(a){}}),jpvs.Menu=function(a){this.attach(a),this.click=jpvs.event(this)},jpvs.Menu.Separator={},jpvs.Menu.MenuElement=function(a,b,c,d,e){this.element=a,this.menuItems=b,this.level=c,this.isPopup=d,this.childrenAlignment=e,this.itemElements=a.find(".Item"),this.parentElement=null},jpvs.Menu.MenuElement.prototype.show=function(){function a(a,b){for(var c=0;c<a.itemElements.length;c++){var d=$(a.itemElements[c]),e=d.data("subMenu");if(e===b)return d}}function b(a){var b=a.offset(),c=a.outerWidth(),d=a.outerHeight();return{x:b.left,y:b.top,w:c,h:d}}function c(a,b){return"right"==b?{x:a.x+a.w,y:a.y}:"bottom"==b?{x:a.x,y:a.y+a.h}:a}$.each(i,function(a,b){e(b)});for(var d=[],f=this;null!=f;f=f.parentElement)d.unshift(f);for(var g=0;g<d.length;g++){var h=d[g];if(h.element.show(),h.isPopup&&h.parentElement){var j=h.parentElement,k=a(j,h),l=b(k),m=c(l,j.childrenAlignment);h.element.css({position:"absolute",left:m.x+"px",top:m.y+"px"}),jpvs.fitInWindow(h.element)}}},jpvs.Menu.MenuElement.prototype.hide=function(){this.element.hide()},jpvs.Menu.MenuElement.prototype.hideIfNonRoot=function(){0!=this.level&&this.element.hide()},jpvs.Menu.MenuElement.prototype.getChildren=function(){var a=[];return $.each(this.itemElements,function(b,c){var d=$(c).data("subMenu");a.push(d)}),a},jpvs.Menu.Templates={HorizontalMenuBar:function(a){var b=a.items,c=a.itemTemplate,d=a.level,e=jpvs.Table.create(this).addClass("HorizontalMenuBar").addClass("HorizontalMenuBar-Level"+d),f=e.writeBodyRow();return $.each(b,function(a,b){var d=f.writeCell().addClass("Item");jpvs.applyTemplate(d,c,b)}),new jpvs.Menu.MenuElement(e.element,b,0!=d,!1,"bottom")},VerticalMenuBar:function(a){var b=a.items,c=a.itemTemplate,d=a.level,e=jpvs.Table.create(this).addClass("VerticalMenuBar").addClass("VerticalMenuBar-Level"+d);return $.each(b,function(a,b){var d=e.writeBodyRow();d.element.addClass("Item"),jpvs.applyTemplate(d,c,b)}),new jpvs.Menu.MenuElement(e.element,b,0!=d,!1,"right")},PopupMenu:function(a){var b=a.items,c=a.itemTemplate,d=a.level,e=jpvs.Table.create(this).addClass("PopupMenu").addClass("PopupMenu-Level"+d);return $.each(b,function(a,b){var d=e.writeBodyRow();d.element.addClass("Item"),jpvs.applyTemplate(d,c,b)}),new jpvs.Menu.MenuElement(e.element,b,0!=d,!0,"right")}},jpvs.Menu.ItemTemplates={HorizontalMenuBarItem:function(a){a===jpvs.Menu.Separator?(this.addClass("Separator"),jpvs.write(this,"|")):(jpvs.write(this,a&&a.text),a&&a.tooltip&&this.attr("title",a.tooltip))},VerticalMenuBarItem:function(a){jpvs.Menu.ItemTemplates.PopupMenuItem.call(this,a)},PopupMenuItem:function(a){if(a===jpvs.Menu.Separator){this.addClass("Separator");var b=jpvs.writeTag(this,"td").attr("colspan",3);jpvs.writeTag(b,"hr")}else{var c=jpvs.writeTag(this,"td").addClass("Icon"),d=jpvs.writeTag(this,"td",a&&a.text).addClass("Text"),e=jpvs.writeTag(this,"td").addClass("SubMenu");if(a&&a.tooltip&&d.attr("title",a.tooltip),a&&a.icon){var f=jpvs.writeTag(c,"img");f.attr("src",a.icon)}if(a&&a.items&&a.items.length){var g=jpvs.writeTag(e,"img");g.attr("src",jpvs.Resources.images.subMenuMarker)}}}},jpvs.Menu.Templates.Default_Level0=jpvs.Menu.Templates.HorizontalMenuBar,jpvs.Menu.Templates.Default_OtherLevels=jpvs.Menu.Templates.PopupMenu,jpvs.Menu.ItemTemplates.Default_Level0=jpvs.Menu.ItemTemplates.HorizontalMenuBarItem,jpvs.Menu.ItemTemplates.Default_OtherLevels=jpvs.Menu.ItemTemplates.PopupMenuItem,jpvs.makeWidget({widget:jpvs.Menu,type:"Menu",cssClass:"Menu",create:function(a){var b=document.createElement("div");return $(a).append(b),b},init:function(a){var c=b(this.element);this.element.empty(),this.menuItems(c),this.ensureId(),i[this.id()]=this},canAttachTo:function(a){return!1},prototype:{template:a("jpvsTemplate"),itemTemplate:a("jpvsItemTemplate"),menuItems:jpvs.property({get:function(){return this.element.data("menuItems")},set:function(a){this.element.data("menuItems",a),c(this,a)}})}})}(),jpvs.MultiLineTextBox=function(a){this.attach(a),this.change=jpvs.event(this)},jpvs.makeWidget({widget:jpvs.MultiLineTextBox,type:"MultiLineTextBox",cssClass:"MultiLineTextBox",create:function(a){var b=document.createElement("textarea");return $(a).append(b),b},init:function(a){this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is("textarea")},prototype:{text:jpvs.property({get:function(){return this.element.val()},set:function(a){this.element.val(a)}})}}),function(){function a(a){return a.element.data("items")}function b(a,b){a.element.data("items",b)}function c(b){var c=a(b),d=[];return $.each(c,function(a,b){b.selected&&d.push(b)}),d}function d(a){var b=c(a),d=[];return $.each(b,function(a,b){d.push(b.text)}),d}function e(a){var b=c(a),d=[];return $.each(b,function(a,b){d.push(b.value)}),d}function f(c,d){var e=a(c),f={};$.each(e,function(a,b){b.selected=!1,f[b.value]=b}),$.each(d,function(a,b){var c=f[b];c&&(c.selected=!0)}),b(c,e),g(c)}function g(a){var b=d(a);jpvs.write(a.label.empty(),b.join(", "))}function h(c){function d(){f(!0)}function e(){f(!1)}function f(a){for(var b=0;b<l.length;b++){var c=l[b],d=r[b];d.selected(a),c.selected=a}i()}function h(a,b){return function(){b.selected=a.selected(),i()}}function i(){b(c,l),g(c),c.change.fire(c)}function j(){return jpvs.writeTag(this,"ul")}function k(a){function b(){f.change.fire(f)}var d=jpvs.writeTag(this,"li"),e=jpvs.CheckBox.create(d).text(a.text).change(b),f={selected:jpvs.property({get:function(){return e.checked()},set:function(a){e.checked(a)}}),change:jpvs.event(c)};return f}var l=a(c),m=jpvs.Popup.create().addState("MultiSelectBox").title(null).modal(!1).position({my:"left top",at:"left bottom",of:c.label,collision:"fit",position:"absolute"});m.autoDestroy(!0);var n=c.prompt();n&&jpvs.writeln(m,n),jpvs.LinkButton.create(m).text(jpvs.MultiSelectBox.strings.selectAll).click(d),jpvs.write(m," "),jpvs.LinkButton.create(m).text(jpvs.MultiSelectBox.strings.unselectAll).click(e),jpvs.writeln(m);var o=c.containerTemplate()||j,p=jpvs.applyTemplate(m,o),q=c.itemTemplate()||k,r=[];$.each(l,function(a,b){var c=jpvs.applyTemplate(p,q,b);r.push(c),c.selected(!!b.selected),c.change(h(c,b))}),m.show()}jpvs.MultiSelectBox=function(a){this.attach(a),this.change=jpvs.event(this)},jpvs.MultiSelectBox.allStrings={en:{selectAll:"Select all",unselectAll:"Unselect all"},it:{selectAll:"Seleziona tutto",unselectAll:"Deseleziona tutto"}},jpvs.makeWidget({widget:jpvs.MultiSelectBox,type:"MultiSelectBox",cssClass:"MultiSelectBox",create:function(a){var b=document.createElement("table");return $(a).append(b),b},init:function(a){jpvs.MultiSelectBox.strings=jpvs.MultiSelectBox.allStrings[jpvs.currentLocale()];var c=[];this.element.find("option").each(function(){var a=$(this),b=a.val(),d=a.text(),e=a.prop("selected");c.push({value:b,text:d,selected:e})});var d=jpvs.writeTag(this.element.parent(),"table");d.insertAfter(this.element),this.element.remove(),d.attr("id",this.element.attr("id")),d.attr("class",this.element.attr("class")),this.element=d,b(a,c);var e=jpvs.writeTag(a,"tbody"),f=jpvs.writeTag(e,"tr");this.label=jpvs.writeTag(f,"td"),this.label.addClass("Label");var i=jpvs.writeTag(f,"td");i.addClass("ButtonContainer"),this.button=jpvs.Button.create(i).text("...").click(function(){h(a)}),g(a)},canAttachTo:function(a){return!1},prototype:{caption:jpvs.property({get:function(){return this.element.data("caption")},set:function(a){this.element.data("caption",a)}}),prompt:jpvs.property({get:function(){return this.element.data("prompt")},set:function(a){this.element.data("prompt",a)}}),containerTemplate:jpvs.property({get:function(){return this.element.data("containerTemplate")},set:function(a){this.element.data("containerTemplate",a)}}),itemTemplate:jpvs.property({get:function(){return this.element.data("itemTemplate")},set:function(a){this.element.data("itemTemplate",a)}}),clearItems:function(){return b(this,[]),g(this),this},addItem:function(c,d,e){var f=c,h=null!=d?d:c;if(null!=f&null!=h){var i=a(this);i.push({value:f,text:h,selected:!!e}),b(this,i),g(this)}return this},addItems:function(a){var b=this;return $.each(a,function(a,c){null!=c&&(null!=c.value?b.addItem(c.value,c.text,c.selected):b.addItem(c))}),this},count:function(){var b=a(this);return b.length},selectedValues:jpvs.property({get:function(){return e(this)},set:function(a){f(this,a)}}),selectedValuesString:jpvs.property({get:function(){return this.selectedValues().join(",")},set:function(a){var b=$.trim(a);""!=b?this.selectedValues(b.split(",")):this.selectedValues([])}})}})}(),function(){jpvs.Pager=function(a){this.attach(a),this.change=jpvs.event(this)},jpvs.Pager.allStrings={en:{firstPage:"First page",previousPage:"Previous page",nextPage:"Next page",lastPage:"Last page",pag:"Page"},it:{firstPage:"Prima pagina",previousPage:"Pagina precedente",nextPage:"Pagina successiva",lastPage:"Ultima pagina",pag:"Pag."}},jpvs.makeWidget({widget:jpvs.Pager,type:"Pager",cssClass:"Pager",create:function(a){var b=document.createElement("table");return $(a).append(b),b},init:function(a){var b=jpvs.writeTag(a.element,"tbody"),c=jpvs.writeTag(b,"tr"),d=jpvs.writeTag(c,"td"),e=jpvs.writeTag(c,"td"),f=jpvs.writeTag(c,"td"),g=jpvs.writeTag(c,"td"),h=jpvs.writeTag(c,"td");jpvs.Pager.strings=jpvs.Pager.allStrings[jpvs.currentLocale()],jpvs.LinkButton.create(d).text(jpvs.Pager.strings.firstPage).click(function(){a.page(Math.min(0,a.totalPages()-1)),a.change.fire(a)}),jpvs.LinkButton.create(g).text(jpvs.Pager.strings.nextPage).click(function(){a.page(Math.min(a.page()+1,a.totalPages()-1)),a.change.fire(a)}),jpvs.LinkButton.create(e).text(jpvs.Pager.strings.previousPage).click(function(){a.page(Math.max(0,a.page()-1)),a.change.fire(a)}),jpvs.LinkButton.create(h).text(jpvs.Pager.strings.lastPage).click(function(){a.page(a.totalPages()-1),a.change.fire(a)});var i=jpvs.DropDownList.create(f).change(function(){var b=parseInt(this.selectedValue());a.page(Math.min(b,a.totalPages()-1)),a.change.fire(a)});this.element.data("cmbPages",i)},canAttachTo:function(a){return!1},prototype:{page:jpvs.property({get:function(){return this.element.data("page")||0},set:function(a){this.element.data("page",a);var b=this.element.data("cmbPages");b.selectedValue(a.toString())}}),totalPages:jpvs.property({get:function(){return this.element.data("totalPages")||0},set:function(a){var b=this.totalPages();if(b!=a){var c=this.element.data("cmbPages");c.clearItems();for(var d=0;a>d;d++)c.addItem(d.toString(),jpvs.Pager.strings.pag+" "+(d+1)+" / "+a)}this.element.data("totalPages",a)}})}})}(),jpvs.PasswordBox=function(a){this.attach(a),this.change=jpvs.event(this)},jpvs.makeWidget({widget:jpvs.PasswordBox,type:"PasswordBox",cssClass:"PasswordBox",create:function(a){var b=document.createElement("input");return $(b).attr("type","password"),$(a).append(b),b},init:function(a){this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is('input[type="password"]')},prototype:{text:jpvs.property({get:function(){return this.element.val()},set:function(a){this.element.val(a)}}),width:jpvs.property({get:function(){return this.element.css("width")},set:function(a){this.element.css("width",a)}})}}),function(){function a(a){if(27==a.which){var b=jpvs.Popup.getTopMost();if(b)return b.closeButton.click.fire(b),!1}}function b(a){var b=$(a.target),d=b.closest(".Popup"),e=d.length?d.attr("id"):"",f=(new Date).getTime()-500;$.each(c,function(a,b){b.open&&b.openTimestamp<f&&a!=e&&(b.autoHide&&b.widget.hide(),b.autoDestroy&&b.widget.destroy())})}var c={};$(document).ready(function(){try{$(document).on("click.jpvsPopup",b).on("keydown.jpvsPopup",a)}catch(c){}}),jpvs.Popup=function(a){this.attach(a),this.close=jpvs.event(this)},jpvs.Popup.getTopMost=function(){var a,b;return $.each(c,function(c,d){if(d.open){var e=d.widget.zIndex();(!b||e>b)&&(a=d,b=e)}}),a?a.widget:null},jpvs.makeWidget({widget:jpvs.Popup,type:"Popup",cssClass:"Popup",create:function(a){var b=document.createElement("div");return $(b).attr("id",jpvs.randomString(20)),$(a).append(b),b},init:function(a){function b(a){return function(){a.bringForward()}}c[this.element.attr("id")]={open:!1,autoDestroy:!1,autoHide:!1,widget:this};var d=this.element.contents();this.blanketElement=$(document.createElement("div")),this.blanketElement.addClass("DimScreen").css({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%"}),this.element.append(this.blanketElement),this.contentsElement=$(document.createElement("div")),this.contentsElement.addClass("Contents").append(d),this.element.append(this.contentsElement),this.element.hide();var e=this.element.data("jpvsWidth");e&&this.contentsElement.css({width:e});var f=this.contentsElement.children("h1").detach(),g=this.contentsElement.contents();this.titleElement=$(document.createElement("div")),this.titleElement.addClass("Title"),this.contentsElement.append(this.titleElement),this.bodyElement=$(document.createElement("div")),this.bodyElement.addClass("Body"),this.contentsElement.append(this.bodyElement),this.bodyElement.append(g),this.closeButton=jpvs.ImageButton.create(this.titleElement),this.closeButton.imageUrls({normal:jpvs.Resources.images.closeButton,hover:jpvs.Resources.images.closeButtonHover}),this.closeButton.click.bind(function(){a.hide(),a.close.fire(a)});var h=jpvs.writeTag(this.titleElement,"h1");h.append(f.contents()),this.contentsElement.draggable&&this.contentsElement.draggable({addClasses:!1,containment:"window",cursor:"move",handle:h,scroll:!1}),this.modal(!0),this.contentsElement.mousedown(b(this))},canAttachTo:function(a){return!1},destroy:function(){var a=this;return this.hide(function(){delete c[a.element.attr("id")],a.element.remove()}),!1},getMainContentElement:function(){return this.bodyElement},prototype:{modal:jpvs.property({get:function(){return this.element.data("modal")},set:function(a){this.element.data("modal",!!a)}}),autoHide:jpvs.property({get:function(){return!!c[this.element.attr("id")].autoHide},set:function(a){c[this.element.attr("id")].autoHide=!!a}}),autoDestroy:jpvs.property({get:function(){return!!c[this.element.attr("id")].autoDestroy},set:function(a){c[this.element.attr("id")].autoDestroy=!!a}}),position:jpvs.property({get:function(){return this.element.data("position")},set:function(a){this.element.data("position",a)}}),applyPosition:function(a){var b=this.contentsElement.outerWidth(),c=this.contentsElement.outerHeight(),d=$(window),e=d.width(),f=d.height(),g=c-f,h=b-e,i=this.bodyElement.width(),j=this.bodyElement.height();(h>0||g>0)&&(this.bodyElement.css("overflow","auto"),h>0&&(i-=h,this.bodyElement.css("width",i+"px")),g>0&&(j-=g,this.bodyElement.css("height",j+"px")));var k=this.position()||{my:"center",at:"center",of:$(window),collision:"fit",position:"fixed"};return a?k.using=function(a){$(this).animate(a)}:delete k.using,this.contentsElement.css("position",k.position||"fixed").position(k),this},center:function(){return this.position(null),this.applyPosition(),this},show:function(a){var b=this;this.element.show();var d=this.contentsElement.css("position");return"absolute"!=d&&"fixed"!=d&&this.applyPosition(!1),this.contentsElement.hide(),this.contentsElement.fadeIn(function(){b.applyPosition(!0),a&&a()}),this.modal()?this.blanketElement.show():this.blanketElement.hide(),c[this.element.attr("id")].open=!0,c[this.element.attr("id")].openTimestamp=(new Date).getTime(),this.bringForward(),this},hide:function(a){return c[this.element.attr("id")].open=!1,this.blanketElement.hide(),this.contentsElement.fadeOut(a),this},bringForward:function(){var a=jpvs.Popup.getTopMost();return a?a!==this&&this.zIndex(a.zIndex()+1):this.zIndex(1e4),this},title:jpvs.property({get:function(){return this.titleElement.children("h1").text()},set:function(a){this.titleElement.children("h1").text(a),a?this.titleElement.show():this.titleElement.hide()}}),width:jpvs.property({get:function(){return this.contentsElement.width()},set:function(a){this.contentsElement.css("width",a)}}),maxWidth:jpvs.property({get:function(){return this.contentsElement.css("max-width")},set:function(a){this.contentsElement.css("max-width",a)}}),zIndex:jpvs.property({get:function(){var a=parseInt(this.contentsElement.css("zIndex"));return isFinite(a)?a:1e4},set:function(a){this.blanketElement.css("zIndex",a),this.contentsElement.css("zIndex",a)}})}}),jpvs.alert=function(){function a(a,b){return function(){b&&b(),a.close.fire()}}for(var b={title:jpvs.alert.defaultTitle,text:"",onclose:null,buttons:[{text:"OK"}]},c=!1,d=!1,e=0;e<arguments.length;e++){var f=arguments[e];f&&("string"==typeof f?d?c||(b.title=b.text,b.text=f,c=!0):(b.text=f,d=!0):"function"==typeof f||f.__WIDGET__?b.onclose=f:f.length&&(b.buttons=f))}var g=jpvs.Popup.create();g.maxWidth("75%").title(b.title||null),jpvs.write(g.bodyElement,b.text),b.buttons&&$.each(b.buttons,function(b,c){c&&(c.click=a(g,c.click))}),jpvs.writeButtonBar(g.bodyElement,b.buttons),g.show(),g.center(),g.close.bind(function(){g.hide(),b.onclose&&("function"==typeof b.onclose?b.onclose():b.onclose.__WIDGET__&&b.onclose.focus()),setTimeout(function(){g.destroy()},5e3)})},jpvs.confirm=function(a,b,c,d,e,f){function g(){h?c&&c():d&&d()}var h=!1;jpvs.alert(a,b,g,[{text:e||"OK",click:function(){h=!0}},{text:f||"Cancel",click:function(){h=!1}}])}}(),function(){function a(a){return function(){a.change.fire(a)}}function b(a){return function(){var b=a.element.innerWidth()-a.scrollbarW,c=a.element.innerHeight()-a.scrollbarH;a.contentBox.css({width:b+"px",height:c+"px"})}}function c(){var a=$('<div style="width: 100%; height:200px;">test</div>'),b=$('<div style="width:200px;height:150px; position: absolute; top: 0px; left: 0px; visibility: hidden; overflow:hidden;"></div>').append(a),c=a[0],d=b[0];$("body").append(d);var e=c.offsetWidth;b.css("overflow","scroll");var f=d.clientWidth;return b.remove(),e-f}jpvs.Scroller=function(a){this.attach(a),this.change=jpvs.event(this)},jpvs.makeWidget({widget:jpvs.Scroller,type:"Scroller",cssClass:"Scroller",create:function(a){var b=document.createElement("div");return $(a).append(b),b},init:function(d){var e={width:d.element.width(),height:d.element.height()};d.element.css({position:"relative",width:"200px",height:"200px"});var f=d.element.contents();d.scrollerBox=jpvs.writeTag(d.element,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"scroll"}),d.scrollerSizer=jpvs.writeTag(d.scrollerBox,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"}),d.contentBox=jpvs.writeTag(d.element,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"}),d.content=jpvs.writeTag(d.contentBox,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"}),d.scrollbarW=c(),d.scrollbarH=d.scrollbarW,d.scrollerBox.scroll(a(d)),$(window).resize(b(d)),f.length&&(d.content.append(f),e.height+=d.scrollbarH,e.width+=d.scrollbarW,d.scrollableSize(e).contentSize(e)),b(d)()},canAttachTo:function(a){return!1},getMainContentElement:function(){return this.content},prototype:{objectSize:jpvs.property({get:function(){return{width:this.element.width(),height:this.element.height()}},set:function(a){this.element.width(a.width).height(a.height),b(this)()}}),scrollableSize:jpvs.property({get:function(){return{width:this.scrollerSizer.width(),height:this.scrollerSizer.height()}},set:function(a){this.scrollerSizer.width(a.width).height(a.height),b(this)()}}),contentSize:jpvs.property({get:function(){return{width:this.content.width(),height:this.content.height()}},set:function(a){this.content.width(a.width).height(a.height),b(this)()}}),scrollPosition:jpvs.property({get:function(){var a=this.scrollerBox.scrollTop(),b=this.scrollerBox.scrollLeft();return{top:a,left:b}},set:function(a){this.scrollerBox.scrollTop(a.top).scrollLeft(a.left)}}),contentPosition:jpvs.property({get:function(){var a=this.contentBox.scrollTop(),b=this.contentBox.scrollLeft();return{top:a,left:b}},set:function(a){this.contentBox.scrollTop(a.top).scrollLeft(a.left)}})}})}(),function(){function a(a,b){var c=a.element.children(b);return 0==c.length&&(c=$(document.createElement(b)),a.element.append(c)),c}function b(b,d){var e=a(b,d),f=$(document.createElement("tr"));return e.append(f),new c(b,f)}function c(a,b){this.table=a,this.element=b}jpvs.Table=function(a){this.attach(a)},jpvs.makeWidget({widget:jpvs.Table,type:"Table",cssClass:"Table",create:function(a){var b=document.createElement("table");return $(a).append(b),b},init:function(a){},canAttachTo:function(a){return $(a).is("table")},prototype:{addClass:function(a){return this.element.addClass(a),this},removeClass:function(a){return this.element.removeClass(a),this},css:function(){return this.element.css.apply(this.element,arguments),this},writeHeaderRow:function(){return b(this,"thead")},writeBodyRow:function(){return b(this,"tbody")},writeRow:function(){return this.writeBodyRow()},writeFooterRow:function(){return b(this,"tfoot")},caption:jpvs.property({get:function(){var a=this.element.children("caption");return 0!=a.length?a.text():null},set:function(a){var b=this.element.children("caption");0==b.length&&(b=$(document.createElement("caption")),this.element.prepend(b)),b.text(a)}}),clear:function(){return this.element.find("tr").remove(),this}}}),c.prototype.writeHeaderCell=function(a){return jpvs.writeTag(this.element,"th",a)},c.prototype.writeCell=function(a){return jpvs.writeTag(this.element,"td",a)},c.prototype.getMainContentElement=function(){return this.element}}(),function(){function a(a){this.tableElement=a,this.floatingHeaderClone=null,this.uniqueName="TableExtender"+t++,this.allCellsSelector=".NAME>tr>th, .NAME>tr>td".replace(/NAME/g,this.uniqueName),this.allHeaderCellsSelector=".NAME>tr>th".replace(/NAME/g,this.uniqueName),this.afterResize=new jpvs.Event,this.changeFilterSort=new jpvs.Event}function b(a){return a.prop("colspan")||1}function c(a){var c=0;return a.prevAll().each(function(){var a=$(this);c+=b(a)}),c}function d(a,b){var d=c(a);return d>0&&u>b}function e(a,b){var c=a.outerWidth();return u>c-b}function f(a){return a.find("col").filter(function(){return $(this).parent()[0]===a[0]||$(this).parent().parent()[0]===a[0]})}function g(a){for(var b=a;;){b=b.parent();b[0].nodeName;if(!b||0==b.length||"body"==b[0].nodeName.toLowerCase()){b=null;break}var c=b.css("overflow");if("auto"==c||"scroll"==c||"hidden"==c)break}return b||$(window)}function h(a){a.tableElement.children("thead,tbody,tfoot").addClass(a.uniqueName)}function i(a){var b=a.tableElement,c=a.allCellsSelector;a.floatingHeaderClone&&(b=b.add(a.floatingHeaderClone)),b.off("mousemove.jpvsTableExtender").on("mousemove.jpvsTableExtender",c,function(a){var b=$(a.currentTarget),c=b.offset(),f=a.pageX-c.left;d(b,f)||e(b,f)?b.addClass("ColumnResize"):b.removeClass("ColumnResize")}),b.off("mouseleave.jpvsTableExtender").on("mouseleave.jpvsTableExtender",c,function(a){var b=$(a.currentTarget);b.removeClass("ColumnResize")})}function j(a){var b=a.tableElement,d=a.allCellsSelector,e=[];b.find(d).each(function(){var a=$(this),b=c(a),d=a.prop("colspan")||1,f=a.outerWidth();1==d&&(e[b]=f)});var g=0;$.each(e,function(a,b){g+=b}),b.css({"table-layout":"fixed",width:g+"px"});var h=f(b);$.each(e,function(a,c){var d=h.eq(a);if(!d.length){var e=jpvs.writeTag(b,"colgroup");d=jpvs.writeTag(e,"col")}d.css("width",c+"px")}),b.find(d).css("overflow","hidden")}function k(a){function h(d,e){var g=c(d),h=g+b(d)-1,n=f(q),r=a.floatingHeaderClone&&f(a.floatingHeaderClone);i=n.eq(h),j=r.eq(h),k=h,l=e,m=i.width(),o=0,n.each(function(){var a=$(this);o+=a.width()}),p=null}var i,j,k,l,m,o,p,q=a.tableElement,r=a.allCellsSelector;g(q);a.floatingHeaderClone&&(q=q.add(a.floatingHeaderClone)),q.off("mousedown.jpvsTableExtender").on("mousedown.jpvsTableExtender",r,function(a){var b=$(a.currentTarget),c=q.eq(0).offset(),f=a.pageX-c.left,g=b.offset(),i=a.pageX-g.left;return d(b,i)?(h(b.prev(),f),!1):e(b,i)?(h(b,f),!1):void 0}),$(document).off("mousemove.jpvsTableExtender"+a.uniqueName).on("mousemove.jpvsTableExtender"+a.uniqueName,function(b){if(i){var c=q.eq(0).offset(),d=b.pageX-c.left,e=d-l,f=m+e;f=Math.max(f,2*u);var g=o-m+f;q.css("width",g+"px"),i.css("width",f+"px"),j.css("width",f+"px"),a.persistColumnSizes()&&n(a,i,k,f),p={newTableWidth:g,columnIndex:k,newColumnWidth:f,resizing:!0},a.afterResize.fire(a,null,p)}}),$(document).off("mouseup.jpvsTableExtender"+a.uniqueName).on("mouseup.jpvsTableExtender"+a.uniqueName,function(b){return i&&p?(p.resizing=!1,a.afterResize.fire(a,null,p),i=null,j=null,!1):void 0})}function l(a){if(window.localStorage){var b=a.data("tableName")||"__GenericTable__",c=localStorage["jpvs.TableExtenders.Sizes."+b],d=c?jpvs.parseJSON(c):{};return d=d||{}}return{}}function m(a){var b=a.tableElement;a.allCellsSelector;if(window.localStorage){var c=l(b),d=0,e=f(b);e.each(function(a){var b=$(this),e=b.data("colName")||"ColIndex"+a,f=c[e]||b.width();b.css("width",f+"px"),d+=f}),b.css("width",d+"px")}}function n(a,b,c,d){var e=a.tableElement;a.allCellsSelector;if(window.localStorage){var g=(f(e),l(e)),h=b.data("colName")||"ColIndex"+c;g[h]=d;var i=jpvs.toJSON(g),j=e.data("tableName")||"__GenericTable__";localStorage["jpvs.TableExtenders.Sizes."+j]=i}}function o(a){var b=a.tableElement,c=a.allHeaderCellsSelector;a.floatingHeaderClone&&(b=b.add(a.floatingHeaderClone)),b.off("mousemove.jpvsTableExtender").on("mousemove.jpvsTableExtender",c,function(b){var c=$(b.currentTarget);p(a,c,b)?c.addClass("SortOrFilter"):c.removeClass("SortOrFilter")}),b.off("mouseleave.jpvsTableExtender").on("mouseleave.jpvsTableExtender",c,function(a){var b=$(a.currentTarget);b.removeClass("SortOrFilter")}),b.off("mousedown.jpvsTableExtender").on("mousedown.jpvsTableExtender",c,function(b){var c=$(b.currentTarget);return p(a,c,b)?(r(a,c),!1):void 0})}function p(a,b,g){var h=a.tableElement,i=b.offset(),j=g.pageX-i.left,k=c(b),l=f(h),m=l.eq(k),n=a.enableSorting()&&q(m,"colSort"),o=a.enableFiltering()&&q(m,"colFilter"),p=n||o,r=!d(b,j)&&!e(b,j);return p&&r}function q(a,b){var c=a.data(b);return null==c?!0:"true"==c||1==c?!0:"false"==c||0==c?!1:!0}function r(a,b){function d(){a.filterSettings.push({colName:t,colHeader:u,operand:"EQ",value:""}),g()}function e(){a.sortSettings.push({colName:t,colHeader:u,descending:!1}),i()}function g(){if(x.clear(),a.filterSettings.length)for(var b=0;b<a.filterSettings.length;b++){var c=a.filterSettings[b];h(c,b)}else{var d=x.writeRow();jpvs.write(d.writeCell(),jpvs.DataGrid.strings.noFilterSpecified);
}}function h(b,c){var d=x.writeRow();jpvs.write(d.writeCell(),jpvs.DataGrid.strings.condition+": "),jpvs.writeTag(d.writeCell(),"strong",b.colHeader);var e=jpvs.DropDownList.create(d.writeCell());e.addItem(""),e.addItems(jpvs.DataGrid.getFilteringOperands()),e.selectedValue(b.operand).change(function(){b.operand=this.selectedValue()});var f=jpvs.TextBox.create(d.writeCell());f.text(b.value).change(function(){b.value=this.text()}),jpvs.LinkButton.create(d.writeCell()).text(jpvs.DataGrid.strings.remove).click(function(){a.filterSettings.splice(c,1),g()})}function i(){if(y.clear(),a.sortSettings.length){for(var b=0;b<a.sortSettings.length;b++){var c=a.sortSettings[b];k(c,b)}y.element.find("tbody").sortable({handle:"td:first",update:j})}else{var d=y.writeRow();jpvs.write(d.writeCell(),jpvs.DataGrid.strings.noSortSpecified)}}function j(){a.sortSettings=[],y.element.find("tr").each(function(){var b=$(this),c=b.data("item");a.sortSettings.push(c)}),i()}function k(b,c){var d=y.writeRow();d.element.data("item",b),jpvs.writeTag(d.writeCell().css("cursor","move"),"img").attr("src",jpvs.Resources.images.moveButton),jpvs.write(d.writeCell(),(0==c?jpvs.DataGrid.strings.orderBy:jpvs.DataGrid.strings.thenBy)+": "),jpvs.writeTag(d.writeCell(),"strong",b.colHeader),jpvs.CheckBox.create(d.writeCell()).text(jpvs.DataGrid.strings.descending).checked(b.descending).change(function(){b.descending=this.checked()}),jpvs.LinkButton.create(d.writeCell()).text(jpvs.DataGrid.strings.remove).click(function(){a.sortSettings.splice(c,1),i()})}function l(){a.changeFilterSort.fire(a)}var m=a.tableElement;a.sortSettings=a.sortSettings||[],a.filterSettings=a.filterSettings||[];var n=c(b),o=f(m),p=o.eq(n),r=a.enableSorting()&&q(p,"colSort"),s=a.enableFiltering()&&q(p,"colFilter"),t=p.data("colName")||n.toString(),u=p.data("colHeader")||t,v="???";a.enableSorting()&&a.enableFiltering()?v=jpvs.DataGrid.strings.titleSortAndFilter:a.enableSorting()?v=jpvs.DataGrid.strings.titleSort:a.enableFiltering()&&(v=jpvs.DataGrid.strings.titleFilter);var w=jpvs.Popup.create().title(v).close(l);jpvs.write(w,jpvs.DataGrid.strings.currentColumn+": "),jpvs.writeTag(w,"strong",u),jpvs.write(w,"ยยย"),s&&jpvs.LinkButton.create(w).text(jpvs.DataGrid.strings.addFilter).click(d),jpvs.write(w,"ยยย"),r&&jpvs.LinkButton.create(w).text(jpvs.DataGrid.strings.addSort).click(e),jpvs.writeln(w);var x;s&&(jpvs.writeTag(w,"hr"),x=jpvs.Table.create(w),g());var y;r&&(jpvs.writeTag(w,"hr"),y=jpvs.Table.create(w),i()),w.show()}function s(a){function b(){var b=c.offset()||{left:c.scrollLeft(),top:c.scrollTop()},d={left:b.left-c.scrollLeft(),top:b.top-c.scrollTop()},g=a.tableElement.offset(),h=g.left-d.left,i=g.top-d.top;c.scrollTop()>i?a.floatingHeaderClone.show().css({position:"absolute",left:h-e+"px",top:c.scrollTop()-f+"px",margin:"0px"}):a.floatingHeaderClone.hide()}var c=g(a.tableElement).css("position","relative");a.floatingHeaderClone&&a.floatingHeaderClone.remove(),a.floatingHeaderClone=a.tableElement.clone(),a.floatingHeaderClone.children("tbody, tfoot, caption").remove(),a.floatingHeaderClone.insertAfter(a.tableElement),c.off("scroll.jpvsTableExtender"),c.on("scroll.jpvsTableExtender",b);var d=c[0].jpvs,e=d?0:parseInt(c.css("border-left-width"),10),f=d?0:parseInt(c.css("border-top-width"),10);b()}var t=1,u=5;jpvs.TableExtender={create:function(b){var c=jpvs.getElementIfWidget(b);return new a(c)}},a.prototype.resizableColumns=jpvs.property({get:function(){return!!this._resizableColumns},set:function(a){this._resizableColumns=!!a}}),a.prototype.persistColumnSizes=jpvs.property({get:function(){return!!this._persistColumnSizes},set:function(a){this._persistColumnSizes=!!a}}),a.prototype.enableSorting=jpvs.property({get:function(){return!!this._enableSorting},set:function(a){this._enableSorting=!!a}}),a.prototype.enableFiltering=jpvs.property({get:function(){return!!this._enableFiltering},set:function(a){this._enableFiltering=!!a}}),a.prototype.getSortAndFilterSettings=function(){return{sort:this.sortSettings,filter:this.filterSettings}},a.prototype.clearSortAndFilterSettings=function(){this.sortSettings=[],this.filterSettings=[]},a.prototype.tableHeaderAlwaysVisible=jpvs.property({get:function(){return!!this._tableHeaderAlwaysVisible},set:function(a){this._tableHeaderAlwaysVisible=!!a}}),a.prototype.apply=function(){jpvs.DataGrid.strings=jpvs.DataGrid.allStrings[jpvs.currentLocale()],h(this),j(this),this.persistColumnSizes()&&m(this),this.tableHeaderAlwaysVisible()&&s(this),this.resizableColumns()&&(i(this),k(this));var a=this.enableFiltering()||this.enableSorting();a&&o(this)}}(),jpvs.TextBox=function(a){this.attach(a),this.change=jpvs.event(this)},jpvs.makeWidget({widget:jpvs.TextBox,type:"TextBox",cssClass:"TextBox",create:function(a){var b=document.createElement("input");return $(b).attr("type","text"),$(a).append(b),b},init:function(a){this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is('input[type="text"]')},prototype:{text:jpvs.property({get:function(){return this.element.val()},set:function(a){this.element.val(a)}}),width:jpvs.property({get:function(){return this.element.css("width")},set:function(a){this.element.css("width",a)}})}}),function(){function a(a){var b=a.startingTile();if(!b)return void a.element.children(".Tile").remove();for(var d=a.width(),e=a.height(),f=a.tileWidth(),g=a.tileHeight(),h=a.tileSpacingHorz(),i=a.tileSpacingVert(),j=f+h,k=g+i,l=a.originX(),m=a.originY(),n=l-f/2;n>0;)n-=j;n+=j;for(var o=[];d>n+f;)o.push(n),n+=j;var p=0;n=l-f/2;for(var q=+(1/0),r=0;r<o.length&&Math.abs(o[r]-n)<q;r++)q=Math.abs(o[r]-n);p=r-1,p=Math.max(p,0),p=Math.min(p,o.length-1);var s=1+(a.lastRenderedGeneration||0);a.lastRenderedGeneration=s;for(var t=m-g/2,u=0,v=p,w=b;w&&!(v>=o.length&&(v=0,t+=k,t>=e));)n=o[v],c(a,n,t,f,g,d,e,w,u,s),v++,u++,w=w.getNextTile&&w.getNextTile();for(v=p-1,t=m-g/2,w=b.getPreviousTile&&b.getPreviousTile(),u=-1;w&&!(0>v&&(v=o.length-1,t-=k,0>=t+g));)n=o[v],c(a,n,t,f,g,d,e,w,u,s),v--,u--,w=w.getPreviousTile&&w.getPreviousTile();a.element.children(".Tile").each(function(){var a=$(this),b=a.data("tileObject"),c=b&&b.jpvsTileBrowserInfo;c&&c.generation==s||(a.remove(),b.jpvsTileBrowserInfo=null)})}function b(a,b,c,d,e,f){function g(){return a>=0&&e>=a&&b>=0&&f>=b}function h(){return k>=0&&e>=k&&b>=0&&f>=b}function i(){return a>=0&&e>=a&&l>=0&&f>=l}function j(){return k>=0&&e>=k&&l>=0&&f>=l}var k=a+c,l=b+d;return g()||h()||i()||j()}function c(a,c,d,e,f,g,h,i,j,k){function l(b){i.template&&jpvs.applyTemplate(b.empty(),i.template,{tileObject:i,tileBrowser:a,tile:b})}if(i){var m=i.jpvsTileBrowserInfo;if(m)if(b(c,d,e,f,g,h)){var n=!1;m.x!=c&&(m.x=c,m.tile.css("left",c+"px")),m.y!=d&&(m.y=d,m.tile.css("top",d+"px")),m.tw!=e&&(m.tw=e,m.tile.css("width",e+"px"),n=!0),m.th!=f&&(m.th=f,m.tile.css("height",f+"px"),n=!0),n&&l(m.tile),m.generation=k}else m.tile.remove(),i.jpvsTileBrowserInfo=null;else if(b(c,d,e,f,g,h)){var o=jpvs.writeTag(a,"div");return o.data("tileObject",i),i.jpvsTileBrowserInfo={tile:o,x:c,y:d,tw:e,th:f,tileIndex:j,generation:k},o.addClass("Tile").css({position:"absolute",left:c+"px",top:d+"px",width:e+"px",height:f+"px",overflow:"hidden"}),l(o),o}}}function d(a,b){var c=1.1;return function(){"up"==b?a.desiredOriginY(a.desiredOriginY()+a.height()/4):"down"==b?a.desiredOriginY(a.desiredOriginY()-a.height()/4):"plus"==b?e(a,c):"minus"==b&&e(a,1/c),i(a)}}function e(a,b){var c=a.desiredTileWidth()*b,d=a.desiredTileHeight()*b;a.desiredTileWidth(c),a.desiredTileHeight(d);var e,f,g,h=a.width(),i=a.height(),j=h/2,k=i/2,l=+(1/0);a.element.children(".Tile").each(function(){var a=$(this),b=a.data("tileObject"),c=b&&b.jpvsTileBrowserInfo;if(c){var d=c.x+c.tw/2,h=c.y+c.th/2,i=(j-d)*(j-d)+(k-h)*(k-h);l>i&&(l=i,e=b,f=d,g=h)}}),e&&(a.originX(f),a.desiredOriginX(f),a.originY(g),a.desiredOriginY(g),a.startingTile(e))}function f(a){return function(b){var c=$(b.target).closest(".Tile"),d=c&&c.length&&c.data("tileObject");return d?a.tileClick.fire(a,null,d,b):void 0}}function g(a){return function(b){var c=b&&b.originalEvent&&b.originalEvent.deltaY||b.originalEvent.deltaX||0,d=a.desiredOriginY();if(b.shiftKey){var f=0>c?1.1:1/1.1;e(a,f)}else a.desiredOriginY(d-c);return i(a),!1}}function h(a){return function(b){if(b.isDrag){var c=$(b.target).closest(".Tile"),d=c&&c.length&&c.data("tileObject"),f=d&&d.jpvsTileBrowserInfo;if(f){if(d!==a.startingTile()){var g=f.x+f.tw/2,h=f.y+f.th/2;a.originX(g),a.originY(h),a.desiredOriginX(g),a.desiredOriginY(h),a.startingTile(d)}var g=a.desiredOriginX()+b.dragX,h=a.desiredOriginY()+b.dragY;a.desiredOriginX(g),a.desiredOriginY(h),i(a)}}else if(b.isZoom)e(a,b.zoomFactor),i(a);else if(b.isTap){var j=$(b.target);if(j.is(".Buttons > *"))j.click(),b.isLongTap&&(j.click(),j.click(),j.click());else{var c=$(b.target).closest(".Tile"),d=c&&c.length&&c.data("tileObject");if(d)return a.tileClick.fire(a,null,d,null)}}}}function i(b){function c(a){return Math.abs(a.originX)>=1||Math.abs(a.originY)>=1||Math.abs(a.tileWidth)>=1||Math.abs(a.tileHeight)>=1}function d(){return{originX:b.desiredOriginX()-b.originX(),originY:b.desiredOriginY()-b.originY(),tileWidth:b.desiredTileWidth()-b.tileWidth(),tileHeight:b.desiredTileHeight()-b.tileHeight()}}function e(a,b,c,d){var e=c-d,f=b-a,g=e/f/f;return g}function f(a,b,c,d){if(a>=b)return d;var e=b-a,f=c*e*e,g=d+f;return g}function g(){if(!b.animationInfo)return void(b.animating=!1);b.animating=!0;var c=(new Date).getTime();b.originX(f(c,b.animationInfo.x.tEnd,b.animationInfo.x.k,b.animationInfo.x.finalValue)),b.originY(f(c,b.animationInfo.y.tEnd,b.animationInfo.y.k,b.animationInfo.y.finalValue)),b.tileWidth(f(c,b.animationInfo.tw.tEnd,b.animationInfo.tw.k,b.animationInfo.tw.finalValue)),b.tileHeight(f(c,b.animationInfo.th.tEnd,b.animationInfo.th.k,b.animationInfo.th.finalValue)),a(b),c>b.animationInfo.x.tEnd&&c>b.animationInfo.y.tEnd&&c>b.animationInfo.tw.tEnd&&c>b.animationInfo.th.tEnd&&(b.animationInfo=null),jpvs.requestAnimationFrame(g)}var h=d();if(c(h)){var i=500,j=(new Date).getTime(),k=j+i;b.animationInfo={x:{tEnd:k,finalValue:b.desiredOriginX(),k:e(j,k,b.originX(),b.desiredOriginX())},y:{tEnd:k,finalValue:b.desiredOriginY(),k:e(j,k,b.originY(),b.desiredOriginY())},tw:{tEnd:k,finalValue:b.desiredTileWidth(),k:e(j,k,b.tileWidth(),b.desiredTileWidth())},th:{tEnd:k,finalValue:b.desiredTileHeight(),k:e(j,k,b.tileHeight(),b.desiredTileHeight())}},b.animating||jpvs.requestAnimationFrame(g)}}jpvs.TileBrowser=function(a){this.attach(a),this.tileClick=jpvs.event(this)},jpvs.makeWidget({widget:jpvs.TileBrowser,type:"TileBrowser",cssClass:"TileBrowser",create:function(a){var b=document.createElement("div");return $(a).append(b),b},init:function(a){a.element.empty(),a.element.css({overflow:"hidden"});var b=jpvs.writeTag(a,"div").addClass("Buttons").css({overflow:"hidden",position:"absolute",right:"0px",top:"0px",bottom:"0px",width:"3em",zIndex:99999});jpvs.writeTag(b,"img").addClass("Up").click(d(a,"up")).attr("src",jpvs.Resources.images.up).css({position:"absolute",right:"0px",top:"0px",width:"100%"}),jpvs.writeTag(b,"img").addClass("Down").click(d(a,"down")).attr("src",jpvs.Resources.images.down).css({position:"absolute",right:"0px",bottom:"0px",width:"100%"}),jpvs.writeTag(b,"img").addClass("Plus").click(d(a,"plus")).attr("src",jpvs.Resources.images.plus).css({position:"absolute",right:"0px",bottom:"50%",width:"100%"}),jpvs.writeTag(b,"img").addClass("Minus").click(d(a,"minus")).attr("src",jpvs.Resources.images.minus).css({position:"absolute",right:"0px",top:"50%",width:"100%"}),a.element.on("click",f(a)),a.element.on("wheel",g(a)),jpvs.addGestureListener(a.element,null,h(a))},canAttachTo:function(a){return!1},prototype:{refresh:function(b){return a(this),b&&i(this),this},startingTile:jpvs.property({get:function(){return this.element.data("startingTile")},set:function(a){this.element.data("startingTile",a)}}),width:jpvs.property({get:function(){return this.element.width()},set:function(a){this.element.width(a)}}),height:jpvs.property({get:function(){return this.element.height()},set:function(a){this.element.height(a)}}),tileWidth:jpvs.property({get:function(){var a=this.element.data("tileWidth");return null!=a?a:this.width()/8},set:function(a){this.element.data("tileWidth",a)}}),tileHeight:jpvs.property({get:function(){var a=this.element.data("tileHeight");return null!=a?a:this.tileWidth()},set:function(a){this.element.data("tileHeight",a)}}),desiredTileWidth:jpvs.property({get:function(){var a=this.element.data("desiredTileWidth");return null!=a?a:this.tileWidth()},set:function(a){this.element.data("desiredTileWidth",a)}}),desiredTileHeight:jpvs.property({get:function(){var a=this.element.data("desiredTileHeight");return null!=a?a:this.tileHeight()},set:function(a){this.element.data("desiredTileHeight",a)}}),tileSpacingHorz:jpvs.property({get:function(){var a=this.element.data("tileSpacingHorz");return null!=a?a:this.tileWidth()/5},set:function(a){this.element.data("tileSpacingHorz",a)}}),tileSpacingVert:jpvs.property({get:function(){var a=this.element.data("tileSpacingVert");return null!=a?a:this.tileHeight()/5},set:function(a){this.element.data("tileSpacingVert",a)}}),originX:jpvs.property({get:function(){var a=this.element.data("originX");return null!=a?a:this.width()/2},set:function(a){this.element.data("originX",a)}}),originY:jpvs.property({get:function(){var a=this.element.data("originY");return null!=a?a:this.height()/2},set:function(a){this.element.data("originY",a)}}),desiredOriginX:jpvs.property({get:function(){var a=this.element.data("desiredOriginX");return null!=a?a:this.originX()},set:function(a){this.element.data("desiredOriginX",a)}}),desiredOriginY:jpvs.property({get:function(){var a=this.element.data("desiredOriginY");return null!=a?a:this.originY()},set:function(a){this.element.data("desiredOriginY",a)}})}})}(),function(){function a(a,b){a.element.empty();var d=[];$.each(b,function(b,e){var f=c(a,a.element,e,null);d.push(f)}),a.element.data("nodeElements",d)}function b(a,b,c){function d(a){c(a||[])}var e=a.childrenSelector()||function(a){return a.children||[]},f=e(b,d);void 0===f||c(null===f?[]:f)}function c(a,b,c,d){var e=a.nodeTemplate()||jpvs.Tree.Templates.StandardNode,f=jpvs.applyTemplate(b,e,c);f.element.data("nodeElement",f);var g=a.childrenContainerTemplate()||jpvs.Tree.Templates.StandardChildrenContainer,h=jpvs.applyTemplate(b,g,c);return f.parentNodeElement=d,f.childrenContainerElement=h,f.childrenNodeElements=[{}],h.nodeElement=f,f.refreshState(),a.nodeRendered.fire(a,null,f),f}function d(a,b){b.refreshState(),b.refreshNode()}function e(a,c,d){b(a,c.node,function(b){var e=c.childrenContainerElement;e.element.empty(),f(a,e,b,c),d&&d()})}function f(a,b,d,e){var f=[];$.each(d,function(d,g){var h=c(a,b.element,g,e);f.push(h)}),e.childrenNodeElements=f}jpvs.Tree=function(a){this.attach(a),this.nodeClick=jpvs.event(this),this.nodeRightClick=jpvs.event(this),this.nodeRendered=jpvs.event(this)},jpvs.Tree.Templates={StandardNode:function(a){function b(){var a=jpvs.find(this.element.find(".ImageButton"));this.childrenNodeElements&&0!=this.childrenNodeElements.length?this.isExpanded()?a&&a.imageUrls({normal:jpvs.Resources.images.nodeOpen}):a&&a.imageUrls({normal:jpvs.Resources.images.nodeClosed}):(a&&a.imageUrls({normal:jpvs.Resources.images.nodeNoChildren}),this.childrenContainerElement.element.hide())}function c(){var a=this.getTree();a.element.find(".Node > .Text").removeClass("Selected"),this.element.find(".Text").addClass("Selected")}function d(){var a=this.node,b=this.element.find("img.Icon"),c=this.element.find("span.Text");b.attr("src",a.icon),c.text(a.toString())}var e=jpvs.writeTag(this,"div");e.addClass("Node");var f=new jpvs.Tree.NodeElement(a,e,b,c,d);if(jpvs.ImageButton.create(e).click(function(){f.toggle()}),a.marker){var g=jpvs.writeTag(e,"img");g.addClass("Marker"),g.attr("src",a.marker)}if(a.icon){var h=jpvs.writeTag(e,"img");h.addClass("Icon"),h.attr("src",a.icon)}var i=jpvs.writeTag(e,"span").addClass("Text");jpvs.write(i,a.toString());var j,k=f.getTree();return i.dblclick(function(){f.toggle()}).mousedown(function(a){j=(new Date).getTime()}).mouseup(function(a){var b=(new Date).getTime();if(!(b>j+500))return 2==a.button?(f.select(),k.nodeRightClick.fire(k,null,f,a),!1):(f.select(),void k.nodeClick.fire(k,null,f,a))}),f},StandardChildrenContainer:function(a){var b=jpvs.writeTag(this,"div");b.addClass("ChildrenContainer"),b.hide();var c=new jpvs.Tree.ChildrenContainerElement(a,b);return c}},jpvs.Tree.NodeElement=function(a,b,c,d,e){this.node=a,this.element=b,this.refreshState=c,this.refreshNode=e,this.select=d,this.parentNodeElement=null,this.childrenContainerElement=null,this.childrenNodeElements=null},jpvs.Tree.NodeElement.prototype.getTree=function(){return jpvs.find(this.element.parents(".Tree").first())},jpvs.Tree.NodeElement.prototype.isExpanded=function(){return this.childrenContainerElement.element.is(":visible")},jpvs.Tree.NodeElement.prototype.toggle=function(){this.isExpanded()?this.collapse():this.expand()},jpvs.Tree.NodeElement.prototype.collapse=function(){var a=this;this.childrenContainerElement.element.hide(100,function(){a.refreshState()})},jpvs.Tree.NodeElement.prototype.expand=function(a){var b=this,c=this.getTree();c&&c.refreshChildren(b,function(){b.childrenNodeElements&&0!=b.childrenNodeElements.length?b.childrenContainerElement.element.show(100,function(){b.refreshState(),a&&a()}):(b.refreshState(),a&&a())})},jpvs.Tree.NodeElement.prototype.setMarkerIcon=function(a){var b=this.element.find("img.Marker");b.attr("src",a)},jpvs.Tree.ChildrenContainerElement=function(a,b){this.node=a,this.element=b,this.nodeElement=null},jpvs.makeWidget({widget:jpvs.Tree,type:"Tree",cssClass:"Tree",create:function(a){var b=document.createElement("div");return $(a).append(b),b},init:function(a){},canAttachTo:function(a){return!1},prototype:{nodeTemplate:jpvs.property({get:function(){return this.element.data("nodeTemplate")},set:function(a){this.element.data("nodeTemplate",a)}}),childrenContainerTemplate:jpvs.property({get:function(){return this.element.data("childrenContainerTemplate")},set:function(a){this.element.data("childrenContainerTemplate",a)}}),childrenSelector:jpvs.property({get:function(){return this.element.data("childrenSelector")},set:function(a){this.element.data("childrenSelector",a)}}),dataBind:function(b){return a(this,b),this},refreshNode:function(a){return d(this,a),this},refreshChildren:function(a,b){return e(this,a,b),this},nodeElements:function(){return this.element.data("nodeElements")}}})}();