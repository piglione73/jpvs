<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <title>TableExtender</title>
    <style>
        table, th, td 
        {
            border: 1px solid #000;
            border-collapse: collapse;
            padding: 3pt;
            margin: 3pt;
            background-color:#fff;
        }
        
        .SortOrFilter 
        {
            background-color: #abcdef;
            cursor:pointer;
        }
        .ColumnResize
        {
            background-color: #fedcba;
            cursor:col-resize;
        }
        .Popup .DimScreen
        {
            background-color: rgba(255,0,0,0.2);
        }
        .Popup .Contents
        {
            background-color: #fff;
            border: 1px solid black;
            border-top-left-radius: 6pt;
            border-top-right-radius: 6pt;
        }
        .Popup .Title
        {
            border-top-left-radius: 5pt;
            border-top-right-radius: 5pt;
            background-color: #77F;
            padding: 3pt;
        }
        .Popup .Title H1
        {
            cursor: move;
            margin: 0px;
            padding: 0px;
            font-size: 14pt;
            color: #FFF;
        }
        .Popup .Body
        {
            padding: 3pt;
        }
        .Popup .Title .ImageButton
        {
            float: right;
        }
    </style>
    <script type="text/javascript" src="../libs/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../libs/jquery-ui-1.11.1.min.js"></script>
    <script type="text/javascript" src="../src/jpvs.js"></script>
    <script type="text/javascript" src="../src/Core.js"></script>
    <script type="text/javascript" src="../src/JSON.js"></script>
    <script type="text/javascript" src="../src/Event.js"></script>
    <script type="text/javascript" src="../src/Resources.js"></script>
    <script type="text/javascript" src="../src/Random.js"></script>
    <script type="text/javascript" src="../src/widgets/CheckBox.js"></script>
    <script type="text/javascript" src="../src/widgets/TextBox.js"></script>
    <script type="text/javascript" src="../src/widgets/DropDownList.js"></script>
    <script type="text/javascript" src="../src/widgets/LinkButton.js"></script>
    <script type="text/javascript" src="../src/widgets/ImageButton.js"></script>
    <script type="text/javascript" src="../src/widgets/Popup.js"></script>
    <script type="text/javascript" src="../src/widgets/DataGrid.js"></script>
    <script type="text/javascript" src="../src/widgets/Table.js"></script>
    <script type="text/javascript" src="../src/widgets/TableExtender.js"></script>
    <script type="text/javascript">
        jpvs(function (w) {
            var tblExt = jpvs.TableExtender.create("#tbl1");

            tblExt.afterResize(function (params) {
                if (params.resizing) {
                    console.log("New table width: " + params.newTableWidth + " - Column " + params.columnIndex + " - New col. width: " + params.newColumnWidth);
                    $("#lbl").text("New table width: " + params.newTableWidth + " - Column " + params.columnIndex + " - New col. width: " + params.newColumnWidth);
                }
                else {
                    //Expand the container, so resizing on the last column beyond page size is made easy
                    $("#pnl").css("width", (params.newTableWidth + 200) + "px");
                }
            });

            tblExt.resizableColumns(true).persistColumnSizes(true).enableSorting(true).enableFiltering(true).tableHeaderAlwaysVisible(true).apply();

            var tblExt2 = jpvs.TableExtender.create("#tbl2");
            tblExt2.resizableColumns(true).persistColumnSizes(true).enableSorting(true).enableFiltering(true).tableHeaderAlwaysVisible(true).apply();
        });
    </script>
</head>
<body>
    <div id="lbl">Event info will be written here</div>
    <div id="pnl">
        <table id="tbl1" data-table-name="TestTable1">
            <colgroup>
                <col data-col-name="Test1" data-col-header="Test column 1" style="background-color: #ffa" />
                <col data-col-name="Test2" data-col-header="Test column 2" data-col-filter="false" data-col-sort="false" style="width: 15em" />
            </colgroup>
            <thead>
                <tr>
                    <th colspan="2">Group 1</th>
                    <th colspan="3">Group 2</th>
                </tr>
                <tr>
                    <th>Col 1</th>
                    <th>Col 2</th>
                    <th>Col 3</th>
                    <th>Col 4</th>
                    <th>Col 5</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>
                        Test 
                        <select>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                        with elements inside
                        <select>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>
                        Cell with
                        <table>
                            <tbody>
                                <tr>
                                    <td>Sub</td>
                                    <td>Sub</td>
                                    <td>Sub</td>
                                </tr>
                                <tr>
                                    <td>Sub</td>
                                    <td>Sub</td>
                                    <td>Sub</td>
                                </tr>
                            </tbody>
                        </table>
                        sub table inside.
                    </td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div id="pnl2" style="position:absolute;top:600px;left:800px;width:500px;height:300px;border:5px solid #000; overflow:scroll">
        Line 1<br />Line 2<br />Line 3
        <table id="tbl2" data-table-name="TestTable1">
            <colgroup>
                <col data-col-name="Test1" data-col-header="Test column 1" style="background-color: #ffa" />
                <col data-col-name="Test2" data-col-header="Test column 2" data-col-filter="false" data-col-sort="false" style="width: 15em" />
            </colgroup>
            <thead>
                <tr>
                    <th colspan="2">Group 1</th>
                    <th colspan="3">Group 2</th>
                </tr>
                <tr>
                    <th>Col 1</th>
                    <th>Col 2</th>
                    <th>Col 3</th>
                    <th>Col 4</th>
                    <th>Col 5</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>
                        Test 
                        <select>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                        with elements inside
                        <select>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>
                        Cell with
                        <table>
                            <tbody>
                                <tr>
                                    <td>Sub</td>
                                    <td>Sub</td>
                                    <td>Sub</td>
                                </tr>
                                <tr>
                                    <td>Sub</td>
                                    <td>Sub</td>
                                    <td>Sub</td>
                                </tr>
                            </tbody>
                        </table>
                        sub table inside.
                    </td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
                <tr>
                    <td>Cell 1</td>
                    <td>Cell 2</td>
                    <td>Cell 3</td>
                    <td>Cell 4</td>
                    <td>Cell 5</td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>
