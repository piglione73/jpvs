var jpvs=(function(){function a(h,d){var f=document.getElementsByTagName("head")[0]||document.documentElement;var g=document.createElement("script");g.src=h;var e=false;g.onload=g.onreadystatechange=function(){if(!e&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){e=true;d()}};f.insertBefore(g,f.firstChild)}function c(g,f){var d=false;for(var e in g){var h=g[e];if(h==f){d=true;break}}if(!d){g.push(f);return true}else{return false}}function b(d,s){var t={ClassToFile:{jpvs:"Core.js",Event:"Event.js",Resources:"Resources.js",Button:"widgets/Button.js",CheckBox:"widgets/CheckBox.js",DataGrid:"widgets/DataGrid.js",DateBox:"widgets/DateBox.js",DocumentEditor:"widgets/DocumentEditor.js",DropDownList:"widgets/DropDownList.js",ImageButton:"widgets/ImageButton.js",LinkButton:"widgets/LinkButton.js",Menu:"widgets/Menu.js",MultiLineTextBox:"widgets/MultiLineTextBox.js",Pager:"widgets/Pager.js",Popup:"widgets/Popup.js",Scroller:"widgets/Scroller.js",Table:"widgets/Table.js",TextBox:"widgets/TextBox.js",Storage:"storage/Storage.js",SvgParser:"parsers/SvgParser.js",XmlParser:"parsers/XmlParser.js"},ClassToModule:{jpvs:"core",Event:"core",Resources:"core",Button:"widgets",CheckBox:"widgets",DataGrid:"widgets",DateBox:"widgets",DocumentEditor:"widgets",DropDownList:"widgets",ImageButton:"widgets",LinkButton:"widgets",Menu:"widgets",MultiLineTextBox:"widgets",Pager:"widgets",Popup:"widgets",Scroller:"widgets",Table:"widgets",TextBox:"widgets",Storage:"storage",SvgParser:"parsers",XmlParser:"parsers"},ModuleToDepends:{animations:["core"],utils:["core"],core:["bootstrap"],bootstrap:[],widgets:["core","parsers","table","linkbutton","imagebutton"],storage:["core","utils"],parsers:["core"]},ModuleToFiles:{animations:["Animations.js"],utils:["Base64.js","JSON.js","Random.js","Session.js"],core:["Core.js","Event.js","Resources.js"],bootstrap:["jpvs.js"],widgets:["widgets/Button.js","widgets/CheckBox.js","widgets/DataGrid.js","widgets/DateBox.js","widgets/DocumentEditor.js","widgets/DropDownList.js","widgets/ImageButton.js","widgets/LinkButton.js","widgets/Menu.js","widgets/MultiLineTextBox.js","widgets/Pager.js","widgets/Popup.js","widgets/Scroller.js","widgets/Table.js","widgets/TextBox.js"],storage:["storage/Storage.js"],parsers:["parsers/HtmlCleaner.js","parsers/SvgParser.js","parsers/XmlParser.js"]}};var r=[];if(d){for(var m in d){var e=d[m];var q=t.ClassToModule[e];c(r,q)}}if(s){for(var m in s){var q=s[m];c(r,q)}}var p=true;while(p){p=false;for(var m in r){var q=r[m];var g=t.ModuleToDepends[q];for(var n in g){var f=g[n];if(c(r,f)){p=true}}}}var o=jpvs.baseUrl||"jpvs";var l=[];for(var m in r){var q=r[m];var k=t.ModuleToFiles[q];for(var n in k){var h=k[n];c(l,o+"/"+h)}}l.reverse();return l}return function(d,g){if(!d){}else{if(typeof(d)=="function"){g=d;$(document).ready(function(){jpvs.createAllWidgets();g(jpvs.widgets)})}else{var e=b(d.classes,d.modules);function f(){if(!e.TotalCount){e.TotalCount=e.length}var h=e.shift();if(h){setTimeout(function(){a(h,f)},10)}else{jpvs.createAllWidgets();if(g){g(jpvs.widgets)}}}$(document).ready(f)}}}})();(function(){var j=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(l,m){window.setTimeout(l,1000/60)};var h=[];var k=false;var b=null;jpvs.animate=function(p,l){var r=(p&&p.t0!=null)?p.t0:0;var s=(p&&p.t1!=null)?p.t1:1;var q=Math.abs((p&&p.step)||0);var n=Math.abs((p&&p.duration)||1000);var o=(p&&p.easingFunction)||f;var m=l||p;h.push({t0:r,t1:s,step:q,duration:n,animFunc:m,easingFunc:o,startTime:null,endTime:null});c()};function c(){if(!k){j(a);k=true}}function a(){if(b==null){if(h.length>0){b=h.shift()}else{k=false;return}}try{var l=new Date().getTime();if(b.startTime==null){b.startTime=l;b.endTime=b.startTime+b.duration}if(b.step){var m=e(l);b.animFunc(m)}else{var m=d(l);b.animFunc(m)}if(l>=b.endTime){b=null}}finally{j(a)}}function d(l){if(l<=b.startTime){return b.t0}else{if(l>=b.endTime){return b.t1}else{return b.easingFunc(b.startTime,b.endTime,b.t0,b.t1,l)}}}function e(l){var t=b.t0;var u=b.t1;var q=b.step;var o=b.startTime;var m=b.endTime;var n=Math.ceil(Math.abs((u-t)/q));var p=u>t?1:-1;var v=(m-o)/n;var r=Math.floor((l-o)/v);if(l<=o){return t}else{if(l>=m){return u}else{return t+p*r*q}}}function f(p,m,r,s,l){var o=(l-p)/(m-p);var n=0.5-Math.cos(o*Math.PI)/2;var q=r+n*(s-r);return q}function g(p,m,r,s,l){var o=(l-p)/(m-p);var n=o;var q=r+n*(s-r);return q}jpvs.animate.harmonicEasing=f;jpvs.animate.linearEasing=g;jpvs.flashClass=function(p,n,o,m,q){var l=$(p);var r=m||15;var s=2*r;jpvs.animate({t0:0,t1:s,step:1,duration:o||2000},function(u){if(u%2==0){l.addClass(n)}else{l.removeClass(n)}});jpvs.animate({t0:0,t1:1,step:1,duration:q||4000},function(u){if(u==1){l.removeClass(n)}})}})();(function(){function d(){this.buffer=[]}d.prototype.append=function a(g){this.buffer.push(g);return this};d.prototype.toString=function e(){return this.buffer.join("")};var b={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(p){var q=new d();var o=new f(p);while(o.moveNext()){var g=o.current;o.moveNext();var h=o.current;o.moveNext();var j=o.current;var k=g>>2;var l=((g&3)<<4)|(h>>4);var m=((h&15)<<2)|(j>>6);var n=j&63;if(isNaN(h)){m=n=64}else{if(isNaN(j)){n=64}}q.append(this.codex.charAt(k)+this.codex.charAt(l)+this.codex.charAt(m)+this.codex.charAt(n))}return q.toString()},decode:function(l){var m=new d();var k=new c(l);while(k.moveNext()){var g=k.current;if(g<128){m.append(String.fromCharCode(g))}else{if((g>191)&&(g<224)){k.moveNext();var h=k.current;m.append(String.fromCharCode(((g&31)<<6)|(h&63)))}else{k.moveNext();var h=k.current;k.moveNext();var j=k.current;m.append(String.fromCharCode(((g&15)<<12)|((h&63)<<6)|(j&63)))}}}return m.toString()}};function f(g){this._input=g;this._index=-1;this._buffer=[]}f.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0){this.current=this._buffer.shift();return true}else{if(this._index>=(this._input.length-1)){this.current=Number.NaN;return false}else{var g=this._input.charCodeAt(++this._index);if((g==13)&&(this._input.charCodeAt(this._index+1)==10)){g=10;this._index+=2}if(g<128){this.current=g}else{if((g>127)&&(g<2048)){this.current=(g>>6)|192;this._buffer.push((g&63)|128)}else{this.current=(g>>12)|224;this._buffer.push(((g>>6)&63)|128);this._buffer.push((g&63)|128)}}return true}}}};function c(g){this._input=g;this._index=-1;this._buffer=[]}c.prototype={current:64,moveNext:function(){if(this._buffer.length>0){this.current=this._buffer.shift();return true}else{if(this._index>=(this._input.length-1)){this.current=64;return false}else{var k=b.codex.indexOf(this._input.charAt(++this._index));var l=b.codex.indexOf(this._input.charAt(++this._index));var m=b.codex.indexOf(this._input.charAt(++this._index));var n=b.codex.indexOf(this._input.charAt(++this._index));var g=(k<<2)|(l>>4);var h=((l&15)<<4)|(m>>2);var j=((m&3)<<6)|n;this.current=g;if(m!=64){this._buffer.push(h)}if(n!=64){this._buffer.push(j)}return true}}}};jpvs.encodeUtf8Base64=function(g){return b.encode(g)};jpvs.decodeBase64Utf8=function(g){return b.decode(g)}})();(function(){function a(b){if(!b){return b}if(b.getMainContentElement){return b.getMainContentElement()}else{return $(b)}}jpvs.getElementIfWidget=a;jpvs.widgetDefs=[];jpvs.widgets={};jpvs.find=function(c){var b=$(c);if(b.length==0){return null}else{if(b.length==1){return b.data("jpvs-widget")}else{var d=[];b.each(function(){d.push($(this).data("jpvs-widget"))});d.each=function(e){for(var f=0;f<d.length;f++){var g=d[f];e.call(g,g)}};return d}}};jpvs.states={HOVER:"Hover",FOCUS:"Focus",ERROR:"Error",DISABLED:"Disabled"};jpvs.property=function(b){return function(c){if(c===undefined){return b.get.call(this)}else{b.set.call(this,c);return this}}};jpvs.currentLocale=(function(){var b="en";return jpvs.property({get:function(){return b},set:function(c){b=c}})})();jpvs.event=function(b){return new jpvs.Event(b)};jpvs.makeWidget=function(m){jpvs.widgetDefs.push(m);var g=m.widget;if(!g){throw"Missing widget field in widget definition"}if(!m.create){throw"Missing create function in widget definition"}if(!m.init){throw"Missing init function in widget definition"}g.__WIDGET__=m.type;if(!g.__WIDGET__){throw"Missing type field in widget definition"}if(!m.cssClass){throw"Missing cssClass field in widget definition"}g.create=e(m);g.attach=d(m);g.prototype.toString=function(){return this.__WIDGET__};g.prototype.attach=c(m);g.prototype.destroy=f(m);g.prototype.focus=h(m);g.prototype.addState=b(m);g.prototype.removeState=l(m);g.prototype.getMainContentElement=j(m);g.prototype.id=jpvs.property({get:function(){return this.element.attr("id")},set:function(n){this.element.attr("id",n)}});g.prototype.ensureId=function(){if(this.id()&&this.id()!=""){return}else{this.id(jpvs.randomString(20))}};if(m.prototype){$.each(m.prototype,function(o,n){g.prototype[o]=n})}function e(n){return function(p){var o=[];p=p||document.body;p=a(p);$(p).each(function(r,q){var s=n.create(q);o.push(n.widget.attach(s))});if(o.length==1){return o[0]}else{if(o.length==0){return undefined}else{return o}}}}function d(n){return function(o){return new n.widget(o)}}function c(n){return function(o){if(!o){return}o=a(o);this.__WIDGET__=n.type;this.element=$(o);this.element.addClass("Widget");this.element.addClass(n.cssClass);k(this);n.init.call(this,this);jpvs.widgets[this.element.attr("id")]=this;this.element.data("jpvs-widget",this)}}function f(n){return function(){var o=true;if(n.destroy){o=n.destroy.call(this,this)}if(o){this.element.remove()}}}function j(n){return function(){if(n.getMainContentElement){return n.getMainContentElement.call(this,this)}return this.element}}function k(n){n.element.hover(function(){n.addState(jpvs.states.HOVER)},function(){n.removeState(jpvs.states.HOVER)});n.element.focusin(function(){n.addState(jpvs.states.FOCUS)});n.element.focusout(function(){n.removeState(jpvs.states.FOCUS)})}function h(n){return function(){if(n.focus){n.focus.call(this,this)}else{this.element.focus()}return this}}function b(n){return function(o){this.element.addClass("Widget-"+o);this.element.addClass(n.cssClass+"-"+o);return this}}function l(n){return function(o){this.element.removeClass("Widget-"+o);this.element.removeClass(n.cssClass+"-"+o);return this}}};jpvs.createAllWidgets=function(){$("*").each(function(){var c=this;var b=$(c);var d=b.data("jpvsType");if(d){var e=jpvs[d];if(e){e.attach(this);return}}$.each(jpvs.widgetDefs,function(f,g){if(g.canAttachTo&&g.canAttachTo(c)){g.widget.attach(c);return false}})})};jpvs.write=function(b,d){if(!b){return}b=a(b);if(d){d=d.replace("\r","");var c=d.split("\n");if(c.length==1){$(b).append(document.createTextNode(c[0]))}else{if(c.length>1){$.each(c,function(e,f){$(b).append(document.createTextNode(f));$(b).append(document.createElement("br"))})}}}};jpvs.writeln=function(b,c){if(!b){return}b=a(b);jpvs.write(b,c);$(b).append(document.createElement("br"))};jpvs.writeTag=function(b,d,e){if(!b){return}if(!d){return}b=a(b);var c=document.createElement(d);$(b).append(c);jpvs.write(c,e);return $(c)};jpvs.applyTemplate=function(b,e,c){if(!b){return}if(!e){return}b=a(b);if(e.template){return jpvs.applyTemplate(b,e.template,c)}if(typeof(e)=="string"){jpvs.write(b,e);return}if(e.fieldName){var d=c&&c[e.fieldName];if(e.selector){d=e.selector(d,c)}else{d=d&&d.toString()}if(e.tagName){jpvs.writeTag(b,e.tagName,d)}else{jpvs.write(b,d)}if(e.css){b.css(e.css)}return}if(typeof(e)=="function"){return e.call($(b),c)}jpvs.alert("JPVS Error","The specified template is not valid.")};jpvs.readDataSource=function(d,n,c,g,b){if(!d){j()}else{if(typeof(d)=="function"){var h=d(n,c,g,f);if(h===undefined){}else{if(h===null){j()}else{f(h)}}}else{if(d.length){var o=d.length;var m=Math.max(0,n||0);var e;if(c===undefined||c===null){e=d.slice(m)}else{var k=Math.max(0,c||0);var l=m+k;e=d.slice(m,l)}b({total:o,start:m,count:e.length,data:e})}else{j()}}}function j(){b({total:0,start:0,count:0,data:[]})}function f(p){if(p.total&&p.data){b({total:p.total,start:p.start||0,count:p.data.length||0,data:p.data})}else{if(p.length){b({total:p.length,start:0,count:p.length,data:p})}else{j()}}}};jpvs.showDimScreen=function(c,d,e){if(jpvs.showDimScreen.timeout){return}jpvs.showDimScreen.timeout=setTimeout(b,c!=null?c:500);function b(){jpvs.showDimScreen.timeout=null;if(jpvs.showDimScreen.element){return}jpvs.showDimScreen.element=jpvs.writeTag("body","div").addClass("DimScreen").css({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",display:"none"});jpvs.applyTemplate(jpvs.showDimScreen.element,e);jpvs.showDimScreen.element.fadeIn(d!=null?d:250)}};jpvs.hideDimScreen=function(b){if(jpvs.showDimScreen.timeout){clearTimeout(jpvs.showDimScreen.timeout);jpvs.showDimScreen.timeout=null}if(jpvs.showDimScreen.element){var c=jpvs.showDimScreen.element;jpvs.showDimScreen.element=null;c.fadeOut(b!=null?b:250,function(){c.remove()})}};jpvs.fitInWindow=function(d){if(!d){return}d=a(d);var j=d.offset();var r=j.left;var s=j.top;var l=d.outerWidth();var e=d.outerHeight();var n=$(window);var p=n.scrollLeft();var q=n.scrollTop();var o=n.width();var m=n.height();var b=k(p,p+o,r,r+l);var c=k(q,q+m,s,s+e);if(b!=0||c!=0){var f=r+b;var g=s+c;d.show().css({position:"absolute",left:f+"px",top:g+"px"})}function k(t,h,v,u){if(v<t){return t-v}else{if(u>h){return h-u}else{return 0}}}}})();jpvs.Event=function(b){var a=function(d,c){return a.bind(d,c)};a.bind=jpvs.Event.prototype.bind;a.unbind=jpvs.Event.prototype.unbind;a.fire=jpvs.Event.prototype.fire;a.widget=b;a.handlers={};return a};jpvs.Event.prototype.bind=function(b,a){if(!a){a=b;b=new Date().toString()}this.handlers[b]=a;return this.widget};jpvs.Event.prototype.unbind=function(a){delete this.handlers[a];return this.widget};jpvs.Event.prototype.fire=function(j,c,e){if(c){return a(this.handlers[c],e)}else{var f=true;for(var d in this.handlers){var b=this.handlers[d];var g=a(b,e);f=f&&g}return f}function a(h){if(h){return h.call(j,e)}}};(function(){jpvs.parseJSON=function(d){return $.parseJSON(d)};var a=/["\\\x00-\x1f\x7f-\x9f]/g,b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};jpvs.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(n){if(n===null){return"null"}var s=typeof n;if(s==="undefined"){return undefined}if(s==="number"||s==="boolean"){return""+n}if(s==="string"){return c(n)}if(s==="object"){if(typeof n.toJSON==="function"){return jpvs.toJSON(n.toJSON())}if(n.constructor===Date){var l=n.getUTCMonth()+1,d=n.getUTCDate(),u=n.getUTCFullYear(),e=n.getUTCHours(),j=n.getUTCMinutes(),r=n.getUTCSeconds(),h=n.getUTCMilliseconds();if(l<10){l="0"+l}if(d<10){d="0"+d}if(e<10){e="0"+e}if(j<10){j="0"+j}if(r<10){r="0"+r}if(h<100){h="0"+h}if(h<10){h="0"+h}return'"'+u+"-"+l+"-"+d+"T"+e+":"+j+":"+r+"."+h+'Z"'}if(n.constructor===Array){var q=[];for(var f=0;f<n.length;f++){q.push(jpvs.toJSON(n[f])||"null")}return"["+q.join(",")+"]"}var m,t,p=[];for(var g in n){s=typeof g;if(s==="number"){m='"'+g+'"'}else{if(s==="string"){m=c(g)}else{continue}}s=typeof n[g];if(s==="function"||s==="undefined"){continue}t=jpvs.toJSON(n[g]);p.push(m+":"+t)}return"{"+p.join(",")+"}"}};function c(d){if(d.match(a)){return'"'+d.replace(a,function(e){var f=b[e];if(typeof f==="string"){return f}f=e.charCodeAt();return"\\u00"+Math.floor(f/16).toString(16)+(f%16).toString(16)})+'"'}return'"'+d+'"'}})();(function(){(function(a){a.fn.htmlClean=function(y){return this.each(function(){var z=a(this);if(this.value){this.value=a.htmlClean(this.value,y)}else{this.innerHTML=a.htmlClean(this.innerHTML,y)}})};a.htmlClean=function(F,I){I=a.extend({},a.htmlClean.defaults,I);var S=/<(\/)?(\w+:)?([\w]+)([^>]*)>/gi;var A=/(\w+)=(".*?"|'.*?'|[^\s>]*)/gi;var R;var M=new d();var N=[M];var D=M;var J=false;if(I.bodyOnly){if(R=/<body[^>]*>((\n|.)*)<\/body>/i.exec(F)){F=R[1]}}F=F.concat("<xxx>");var H;while(R=S.exec(F)){var O=new m(R[3],R[1],R[4],I);var T=F.substring(H,R.index);if(T.length>0){var C=D.children[D.children.length-1];if(D.children.length>0&&h(C=D.children[D.children.length-1])){D.children[D.children.length-1]=C.concat(T)}else{D.children.push(T)}}H=S.lastIndex;if(O.isClosing){if(j(N,[O.name])){N.pop();D=N[N.length-1]}}else{var E=new d(O);var z;while(z=A.exec(O.rawAttributes)){if(z[1].toLowerCase()=="style"&&I.replaceStyles){var K=!O.isInline;for(var G=0;G<I.replaceStyles.length;G++){if(I.replaceStyles[G][0].test(z[2])){if(!K){O.render=false;K=true}D.children.push(E);N.push(E);D=E;O=new m(I.replaceStyles[G][1],"","",I);E=new d(O)}}}if(O.allowedAttributes!=null&&(O.allowedAttributes.length==0||a.inArray(z[1],O.allowedAttributes)>-1)){E.attributes.push(new c(z[1],z[2]))}}a.each(O.requiredAttributes,function(){var U=this.toString();if(!E.hasAttribute(U)){E.attributes.push(new c(U,""))}});for(var L=0;L<I.replace.length;L++){for(var Q=0;Q<I.replace[L][0].length;Q++){var B=typeof(I.replace[L][0][Q])=="string";if((B&&I.replace[L][0][Q]==O.name)||(!B&&I.replace[L][0][Q].test(R))){O.render=false;D.children.push(E);N.push(E);D=E;O=new m(I.replace[L][1],R[1],R[4],I);E=new d(O);E.attributes=D.attributes;L=I.replace.length;break}}}var y=true;if(!D.isRoot){if(D.tag.isInline&&!O.isInline){y=false}else{if(D.tag.disallowNest&&O.disallowNest&&!O.requiredParent){y=false}else{if(O.requiredParent){if(y=j(N,O.requiredParent)){D=N[N.length-1]}}}}}if(y){D.children.push(E);if(O.toProtect){while(tagMatch2=S.exec(F)){var P=new m(tagMatch2[3],tagMatch2[1],tagMatch2[4],I);if(P.isClosing&&P.name==O.name){E.children.push(RegExp.leftContext.substring(H));H=S.lastIndex;break}}}else{if(!O.isSelfClosing&&!O.isNonClosing){N.push(E);D=E}}}}}return a.htmlClean.trim(k(M,I).join(""))};a.htmlClean.defaults={bodyOnly:true,allowedTags:[],removeTags:["basefont","center","dir","font","frame","frameset","iframe","isindex","menu","noframes","s","strike","u"],allowedAttributes:[],removeAttrs:[],allowedClasses:[],format:false,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]]};function b(y,A,B,z){if(!y.tag.isInline&&B.length>0){B.push("\n");for(i=0;i<z;i++){B.push("\t")}}}function k(z,E){var F=[],A=z.attributes.length==0,C;var D=this.name.concat(z.tag.rawAttributes==undefined?"":z.tag.rawAttributes);var H=z.tag.render&&(E.allowedTags.length==0||a.inArray(z.tag.name,E.allowedTags)>-1)&&(E.removeTags.length==0||a.inArray(z.tag.name,E.removeTags)==-1);if(!z.isRoot&&H){F.push("<");F.push(z.tag.name);a.each(z.attributes,function(){if(a.inArray(this.name,E.removeAttrs)==-1){var J=RegExp(/^(['"]?)(.*?)['"]?$/).exec(this.value);var K=J[2];var L=J[1]||"'";if(this.name=="class"){K=a.grep(K.split(" "),function(M){return a.grep(E.allowedClasses,function(N){return N[0]==M&&(N.length==1||a.inArray(z.tag.name,N[1])>-1)}).length>0}).join(" ");L="'"}if(K!=null&&(K.length>0||a.inArray(this.name,z.tag.requiredAttributes)>-1)){F.push(" ");F.push(this.name);F.push("=");F.push(L);F.push(K);F.push(L)}}})}if(z.tag.isSelfClosing){if(H){F.push(" />")}A=false}else{if(z.tag.isNonClosing){A=false}else{if(!z.isRoot&&H){F.push(">")}var C=E.formatIndent++;if(z.tag.toProtect){var G=a.htmlClean.trim(z.children.join("")).replace(/<br>/ig,"\n");F.push(G);A=G.length==0}else{var G=[];for(var B=0;B<z.children.length;B++){var y=z.children[B];var I=a.htmlClean.trim(w(h(y)?y:y.childrenToString()));if(g(y)){if(B>0&&I.length>0&&(l(y)||e(z.children[B-1]))){G.push(" ")}}if(h(y)){if(I.length>0){G.push(I)}}else{if(B!=z.children.length-1||y.tag.name!="br"){if(E.format){b(y,E,G,C)}G=G.concat(k(y,E))}}}E.formatIndent--;if(G.length>0){if(E.format&&G[0]!="\n"){b(z,E,F,C)}F=F.concat(G);A=false}}if(!z.isRoot&&H){if(E.format){b(z,E,F,C-1)}F.push("</");F.push(z.tag.name);F.push(">")}}}if(!z.tag.allowEmpty&&A){return[]}return F}function j(z,A,y){y=y||1;if(a.inArray(z[z.length-y].tag.name,A)>-1){return true}else{if(z.length-(y+1)>0&&j(z,A,y+1)){z.pop();return true}}return false}function d(y){if(y){this.tag=y;this.isRoot=false}else{this.tag=new m("root");this.isRoot=true}this.attributes=[];this.children=[];this.hasAttribute=function(A){for(var z=0;z<this.attributes.length;z++){if(this.attributes[z].name==A){return true}}return false};this.childrenToString=function(){return this.children.join("")};return this}function c(y,z){this.name=y;this.value=z;return this}function m(C,A,E,D){this.name=C.toLowerCase();this.isSelfClosing=a.inArray(this.name,v)>-1;this.isNonClosing=a.inArray(this.name,s)>-1;this.isClosing=(A!=undefined&&A.length>0);this.isInline=a.inArray(this.name,r)>-1;this.disallowNest=a.inArray(this.name,q)>-1;this.requiredParent=u[a.inArray(this.name,u)+1];this.allowEmpty=a.inArray(this.name,n)>-1;this.toProtect=a.inArray(this.name,t)>-1;this.rawAttributes=E;this.requiredAttributes=p[a.inArray(this.name,p)+1];if(D){if(!D.tagAttributesCache){D.tagAttributesCache=[]}if(a.inArray(this.name,D.tagAttributesCache)==-1){var z=o[a.inArray(this.name,o)+1].slice(0);for(var B=0;B<D.allowedAttributes.length;B++){var y=D.allowedAttributes[B][0];if((D.allowedAttributes[B].length==1||a.inArray(this.name,D.allowedAttributes[B][1])>-1)&&a.inArray(y,z)==-1){z.push(y)}}D.tagAttributesCache.push(this.name);D.tagAttributesCache.push(z)}this.allowedAttributes=D.tagAttributesCache[a.inArray(this.name,D.tagAttributesCache)+1]}this.render=true;return this}function l(y){while(f(y)&&y.children.length>0){y=y.children[0]}return h(y)&&y.length>0&&a.htmlClean.isWhitespace(y.charAt(0))}function e(y){while(f(y)&&y.children.length>0){y=y.children[y.children.length-1]}return h(y)&&y.length>0&&a.htmlClean.isWhitespace(y.charAt(y.length-1))}function h(y){return y.constructor==String}function g(y){return h(y)||y.tag.isInline}function f(y){return y.constructor==d}function w(y){return y.replace(/&nbsp;|\n/g," ").replace(/\s\s+/g," ")}a.htmlClean.trim=function(y){return a.htmlClean.trimStart(a.htmlClean.trimEnd(y))};a.htmlClean.trimStart=function(y){return y.substring(a.htmlClean.trimStartIndex(y))};a.htmlClean.trimStartIndex=function(z){for(var y=0;y<z.length-1&&a.htmlClean.isWhitespace(z.charAt(y));y++){}return y};a.htmlClean.trimEnd=function(y){return y.substring(0,a.htmlClean.trimEndIndex(y))};a.htmlClean.trimEndIndex=function(z){for(var y=z.length-1;y>=0&&a.htmlClean.isWhitespace(z.charAt(y));y--){}return y+1};a.htmlClean.isWhitespace=function(y){return a.inArray(y,x)!=-1};var r=["a","abbr","acronym","address","b","big","br","button","caption","cite","code","del","em","font","hr","i","input","img","ins","label","legend","map","q","s","samp","select","small","span","strike","strong","sub","sup","tt","u","var"];var q=["h1","h2","h3","h4","h5","h6","p","th","td"];var n=["th","td"];var u=[null,"li",["ul","ol"],"dt",["dl"],"dd",["dl"],"td",["tr"],"th",["tr"],"tr",["table","thead","tbody","tfoot"],"thead",["table"],"tbody",["table"],"tfoot",["table"]];var t=["script","style","pre","code"];var v=["br","hr","img","link","meta"];var s=["!doctype","?xml"];var o=[["class"],"?xml",[],"!doctype",[],"a",["accesskey","class","href","name","title","rel","rev","type","tabindex"],"abbr",["class","title"],"acronym",["class","title"],"blockquote",["cite","class"],"button",["class","disabled","name","type","value"],"del",["cite","class","datetime"],"form",["accept","action","class","enctype","method","name"],"input",["accept","accesskey","alt","checked","class","disabled","ismap","maxlength","name","size","readonly","src","tabindex","type","usemap","value"],"img",["alt","class","height","src","width"],"ins",["cite","class","datetime"],"label",["accesskey","class","for"],"legend",["accesskey","class"],"link",["href","rel","type"],"meta",["content","http-equiv","name","scheme","charset"],"map",["name"],"optgroup",["class","disabled","label"],"option",["class","disabled","label","selected","value"],"q",["class","cite"],"script",["src","type"],"select",["class","disabled","multiple","name","size","tabindex"],"style",["type"],"table",["class","summary"],"th",["class","colspan","rowspan"],"td",["class","colspan","rowspan"],"textarea",["accesskey","class","cols","disabled","name","readonly","rows","tabindex"]];var p=[[],"img",["alt"]];var x=[" "," ","\t","\n","\r","\f"]})(jQuery);jpvs.cleanHtml=function(b,c){var a={bodyOnly:false,allowedTags:["h1","h2","h3","h4","h5","h6","br","hr","div","span","img","p","font","ul","ol","li","i","em","b","strong","u","sup","sub","table","thead","tbody","tfoot","tr","td","th"],removeTags:[],allowedAttributes:[["style"],["align"],["src",["img"]]],removeAttrs:[],allowedClasses:[],format:false,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]]};return jQuery.htmlClean(b||"",c||a)};jpvs.stripHtml=function(a){var b={bodyOnly:false,allowedTags:["xyz-dummy-xyz"],removeTags:[],allowedAttributes:[],removeAttrs:[],allowedClasses:[],format:false,formatIndent:0,replace:[],replaceStyles:[]};return jQuery.htmlClean(a||"",b)}})();var SvgParser=(function(){var b={r:0,g:0,b:0,a:1};var c={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",green:"#008000",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function g(l){var k=XmlParser.parseString(l,h);if(k){return{ids:k.__$ids$__,elements:k.children}}else{return null}}function h(n,u){if(!u.__$ids$__){u.__$ids$__={}}if(n.attributes.id){u.__$ids$__[n.attributes.id]=n}for(var m=0;m<n.children.length;m++){var l=n.children[m];if(l.name=="#COMMENT"){n.children.splice(m--,1)}}delete n.value;for(var m in n.attributes){var k=n.attributes[m];p(n,m,k)}delete n.attributes;function p(v,x,y){if(x=="style"){t(v,y)}else{if(x=="fill"){q(v,y)}else{if(x=="stroke"){s(v,y)}else{if(x=="d"){r(v,y)}else{var w=/%$/g.test(y);var z=parseFloat(y);var A=isFinite(z)&&!w;v[x]=A?z:y}}}}}function r(v,x){var w=f(x);v.d=w}function q(w,F){if(!F){w.fill={};return}F=j(F);if(F==""||F.toLowerCase()=="none"){w.fill={};return}var E=/^url *\( *#(.+) *\) *$/gi;var C=E.exec(F);if(C){var y=C[1];var x=u.__$ids$__[y];if(x.name=="linearGradient"){var G=o(x.x1);var H=o(x.x2);var I=o(x.y1);var J=o(x.y2);w.fill={linearGradient:{x1:G,y1:I,x2:H,y2:J,stops:[]}};for(var z in x.children){var D=x.children[z];if(D.name!="stop"){continue}var A=D.offset;var v=e(D["stop-color"]);var B=D["stop-opacity"];if(B!=null){v.a*=B}w.fill.linearGradient.stops.push({color:v,offset:A})}}else{}}else{w.fill={color:e(F)}}}function o(v){if(/%$/g.test(v)){return parseFloat(v.substring(0,v.length-1))/100}else{return parseFloat(v)}}function s(v,w){if(!w){v.stroke={};return}w=j(w);if(w==""||w.toLowerCase()=="none"){v.stroke={};return}v.stroke={color:e(w)}}function t(v,C){C=j(C);var y=C.split(";");for(var w in y){var x=y[w];var B=x.split(":");var z=j(B[0]);var A=j(B[1]);p(v,z,A)}}}function j(k){return k.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function e(k){if(!k){return b}k=j(k);if(k==""){return b}if((/^#/gi).test(k)){return l(k.substring(1))}else{if((/^RGB[^A]/gi).test(k)){return n(k.substring(3))}else{if((/^RGBA/gi).test(k)){return m(k.substring(4))}else{k=k.toLowerCase();k=c[k];return e(k)}}}function l(o){o=j(o);if(o.length==3){o=String.fromCharCode(o.charCodeAt(0),o.charCodeAt(0),o.charCodeAt(1),o.charCodeAt(1),o.charCodeAt(2),o.charCodeAt(2))}return{r:parseInt(o.substring(0,2),16),g:parseInt(o.substring(2,4),16),b:parseInt(o.substring(4,6),16),a:1}}function n(q){q=j(q);if((/^\(.*\)$/gi).test(q)){q=q.substring(1,q.length-1);var t=j(q).split(",");var u=parseInt(t[0]);var s=parseInt(t[1]);var p=parseInt(t[2]);var o=1;return{r:u,g:s,b:p,a:o}}else{return b}}function m(q){q=j(q);if((/^\(.*\)$/gi).test(q)){q=q.substring(1,q.length-1);var t=j(q).split(",");var u=parseInt(t[0]);var s=parseInt(t[1]);var p=parseInt(t[2]);var o=parseFloat(t[3]);return{r:u,g:s,b:p,a:o}}else{return b}}}var d="1234567890.-+";var a="qwertyuioplkjhgfdsazxcvbnmQWERTYUIOPLKJHGFDSAZXCVBNM";function f(o){if(!o){return null}o=j(o);if(o==""){return null}var s=0;var r=1;var q=2;var l=[];var m,n;var t=s;for(var p=0;p<o.length;p++){var k=o[p];if(t==s){if(a.indexOf(k)>=0){m={cmd:k,params:[]};l.push(m);t=r}else{}}else{if(t==r){if(a.indexOf(k)>=0){m={cmd:k,params:[]};l.push(m);t=r}else{if(d.indexOf(k)>=0){n=k;t=q}else{}}}else{if(t==q){if(d.indexOf(k)>=0){n+=k}else{if(a.indexOf(k)>=0){m.params.push(parseFloat(n));n=null;m={cmd:k,params:[]};l.push(m);t=r}else{m.params.push(parseFloat(n));n=null;t=r}}}}}}if(n){m.params.push(parseFloat(n))}return l}return{parseString:g,parseColor:e,parsePathDefinition:f}})();var XmlParser=(function(){var f=0,h=1,k=2,a=3,l=4,b=5,m=6,c=7;function j(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function d(){return{name:"",attributes:{},children:[],value:null}}function e(n){return{name:"#TEXT",attributes:{},children:[],value:n}}function g(A,x,z){if(!A||A==""){return null}var B=f;var w=[];var r,o,p,t="",q="";for(var v=0;v<A.length;v++){var n=A[v];if(B==f){if(n=="<"){B=h;if(!z){t=j(t)}if(t.length>0){var C=e(t);r.children.push(C)}t="";var y=r;r=d();w.push(r);if(y){y.children.push(r)}}else{t+=n}}else{if(B==h){if(n==" "){B=k}else{if(n=="/"){if(r.name==""){r.closing=true}else{B=m}}else{if(n==">"){B=f;if(r.closing){if(w.length>1){w.pop();r=w[w.length-1];r.children.pop()}if(w.length>1){w.pop();r=w[w.length-1]}}else{}}else{r.name+=n;if(r.name=="!--"){q="";B=c}}}}}else{if(B==k){if(n==" "){}else{if(n=="/"){B=m}else{if(n==">"){B=f}else{B=a;o=n;p=""}}}}else{if(B==a){if(n=="="){B=l}else{o+=n}}else{if(B==l){if(n==" "){}else{if(n=='"'){B=b}else{D()}}}else{if(B==b){if(n=='"'){B=k;r.attributes[j(o)]=p}else{p+=n}}else{if(B==m){if(n==" "){}else{if(n==">"){B=f;if(w.length>1){w.pop();r=w[w.length-1]}}else{D()}}}else{if(B==c){q+=n;if((/-->$/gi).test(q)){q=j(q.substring(0,q.length-3));r.name="#COMMENT";r.value=q;w.pop();r=w[w.length-1];B=f}}else{E()}}}}}}}}}var u=w[0]||null;if(x){F(u)}return u;function F(H){if(H){x(H,u);if(H.children){for(var G in H.children){var s=H.children[G];F(s)}}}}function D(){throw"Invalid character: "+n}function E(){throw"Unexpected parser state: "+B}}return{parseString:g}})();(function(){var a="QWERTYUIOPLKJHGFDSAZXCVBNM1234567890";var c=a.length;var b=10*c;jpvs.randomString=function(g){var h="";for(var f=0;f<g;f++){var d=Math.floor(Math.random()*b)%c;var e=a[d];h+=e}return h}})();jpvs.Resources={images:{loading:"data:image/gif;base64,R0lGODlhGAAIAPcAAAAAAP8A3ICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgABACwAAAAAGAAIAAAIRAADCBxIsKBBggASKhSocGGAhgkZCpgoAADDARgHWHyYUaNEihsBdAw58uNEkhlRYgxJseLFlC9XMoQ4s2FNhwdz5gwIACH5BAkKAAEALAAAAAAYAAgAAAhDAAMIHEiwoEGCABIqFKhwYYCGCRkOmDgAAEMBGAVYfEixokSKGwFk1PhxYsiOIUeeBFnS40OVLUNCZDjzYc2DOHEGBAAh+QQJCgABACwAAAAAGAAIAAAIQwADCBxIsKBBggASKhSocGGAhgkZDpg4AIBEihYfCtgoICMAihUvTvTIsaPIkA9BkuToUeXJlRs9QmQ482HNgzhxBgQAIfkECQoAAQAsAAAAABgACAAACEMAAwgcSLCgQYIAEioUqHBhgIYJGQ6YOAAAQwEYBVh8SLGiRIobAWTU+HFiyI4hR54EWdLjQ5UtQ0JkOPNhzYM4cQYEADs=",closeButton:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADzSURBVDhPY2BmZv7EwMDwn1zMyMrK+uXnz5/7gQaQDJiYmHyYSNaFpgHDAD09PSuQyRcvXuRCVtvW1iYHEgfRKGaAvPDv37/NyBgUHjo6Om9hYufPn98LEmtpabmIrg6rF1avXn38ypUrQjDbYmNjDYAGvquqqnqE4WVsLgDZEhUVdQ9kK4wGuQKbS/HGAig8QC4BuSg4OPgtuu0EYwGkGaRp/fr1ErhiC2c0gmwH+Rtk+7JlyxTXrl0rjNUQbGEACm2Q/2H+hoUDtjBgQDcAX5QhRy3IMHDyRzYAphldIUgx0CvHYLECcwmIP/B5gYHS7AwAM9IzlWy9T8kAAAAASUVORK5CYII=",closeButtonHover:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAENSURBVDhPY9TW1v6rqqrKxEAGuHHjBgOjo6Pjn717994lQz+Dk5OTGlk2I1uGYcDs2bNlm5qa1N6+fcuKrPDUqVP8IHEQjdeA1NTUxyAF69atk4ApBBm2Y8cOcQ8Pj5dmZmYf8RoAkoyMjHzy/PlzTphtIMMkJSW/o2sGqcUaBsBY+WZkZPQBZOuWLVvEQIYFBQW9wBbQOAPRx8fnFcjWc+fOCYBcJCws/JskA0CKQTaD6Js3b/LgimacLgDFBsgFINtBrrh9+zYX0S4ABR7M37DwWL58uQxRBiBHGczfoPAAaQa5Ct0QFC+ANE+dOlURW5TBohYUK8iGDHxeYFRRUfkrIyNDVqZ68OABAwDuhIRQ92DTiAAAAABJRU5ErkJggg==",subMenuMarker:"data:image/gif;base64,R0lGODlhBAAHAPAAAAAAAP///yH5BAEAAAEALAAAAAAEAAcAAAIIRA4WaeyrVCgAOw==",dataGridColumnButton:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAICAYAAAArzdW1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAP0lEQVQoU2NsaGjYwkAIgBT9//8/ChcGGwI1CWQaVgxXBDIFmyKQOIoidIUw6zEUwRQiuw+rInQPwBWBGPgwACtpkpAwaQ17AAAAAElFTkSuQmCC",dataGridColumnButtonHover:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAICAYAAAArzdW1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAPklEQVQoU2NsaGj4z0AIgBQBAYjAisGGQE0CmYYVwxWBTMGmCCSOoghdIcx6DEUwhcjuw6oI3QNwRSAGPgwAytOhjjbmr7UAAAAASUVORK5CYII=",moveButton:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAADlSURBVHjapFLRDsIgDLxuU598WvgAfdXo/3+Xr7BaGDDoGDGxySUb9NrrFQLu2IIFSwEnB44EqGHDPbPFAMh9QCJzJp/My39zUTCT129gWjtXXSPJSfVMkH9Lmoy19a1VIMkV4kdyzmqEODCzV6CJSyN5T04xKdkNw6DJHE0LMcSuvCUdKaiCiwLe7Tcu2XGXcQ1nITljNk/M5pGLiBST9o3GCHI+klKQupM3MY7giVr6oXwoD9JuLfXcbpHjFlzzhf0aw0berSoYVhjYK5AeUC2TNh51RIw9hdy9lC2EVfwTXwEGAJ3OoklJmLc2AAAAAElFTkSuQmCC"}};(function(){var a="jpvs.SessionID";var b;jpvs.getSessionID=function(){if(!b){try{b=sessionStorage[a]}catch(c){}}if(!b){b=jpvs.randomString(50);try{sessionStorage[a]=b}catch(c){}}return b}})();(function(){var e="jpvs.Storage.";var f=e.length;function d(n,k,j){var m=n[e+k];if(!m){return j}var l=$.parseJSON(m);return l}function h(m,j,k){var l=jpvs.toJSON(k);m[e+j]=l}function g(k,j){k.removeItem(e+j)}function b(o,j){var n=o.length;for(var l=0;l<n;l++){var k=o.key(l);if(k.indexOf(e)!=0){continue}var m=k.substring(f);var q=o.getItem(m);var p=$.parseJSON(q);if(j(m,p)===false){return}}}function c(j,k){return j+"."+k}function a(k,j){this.storage=k;this.id=j.id;this.name=j.name}a.prototype.getCount=function(){if(this.deleted){return 0}var k=this.name+".";var l=k.length;var j=0;b(this.storage,function(n,p){if(n.indexOf(k)==0){var m=n.substring(l);var o=parseInt(m);if(isFinite(o)){j=Math.max(j,o+1)}}});return j};a.prototype.getItem=function(k){if(this.deleted){return null}var l=c(this.name,k);var j=d(this.storage,l,null);return j};a.prototype.setItem=function(k,j){if(this.deleted){return}var l=c(this.name,k);h(this.storage,l,j)};a.prototype.removeItem=function(j){if(this.deleted){return}var k=c(this.name,j);g(this.storage,k)};a.prototype.removeAllItems=function(){if(this.deleted){return}var k=this.getCount();for(var j=0;j<k;j++){this.removeItem(j)}};a.prototype.listItems=function(){if(this.deleted){return[]}var j=[];this.each(function(k,l){j.push(l)});return j};a.prototype.each=function(j){if(this.deleted){return}var l=this.getCount();for(var k=0;k<l;k++){if(j(k,this.getItem(k))===false){return}}};a.prototype.deleteDomain=function(){if(this.deleted){return}this.removeAllItems();var j=d(this.storage,"Domains",{});delete j[this.id];h(this.storage,"Domains",j);this.deleted=true};jpvs.Storage={listDomains:function(l){var j=d(l,"Domains",{});var k=[];$.each(j,function(n,m){k.push(new a(l,m))});return k},getDomain:function(o,j){var k=d(o,"Domains",{});var l;$.each(k,function(q,p){if(p.name==j){l=new a(o,p);return false}});if(l){return l}var m={id:jpvs.randomString(20),name:j};var n=new a(o,m);k[m.id]=m;h(o,"Domains",k);return n}}})();jpvs.Button=function(a){this.attach(a);this.click=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.Button,type:"Button",cssClass:"Button",create:function(a){var b=document.createElement("button");$(b).attr("type","button");$(a).append(b);return b},init:function(a){this.element.click(function(){return a.click.fire(a)})},canAttachTo:function(a){return $(a).is('button,input[type="button"]')},prototype:{text:jpvs.property({get:function(){return this.element.text()},set:function(a){this.element.text(a)}})}});jpvs.writeButtonBar=function(c,b){if(!c){return}if(!b){return}c=jpvs.getElementIfWidget(c);var a=$(document.createElement("div"));$(a).addClass("ButtonBar").appendTo(c);$.each(b,function(f,e){var d=jpvs.Button.create(a);d.text(e.text||"OK").click.bind(e.click)});return a};jpvs.CheckBox=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.CheckBox,type:"CheckBox",cssClass:"CheckBox",create:function(a){var b=document.createElement("input");$(b).attr("type","checkbox");$(a).append(b);return b},init:function(a){this.element.click(function(){return a.change.fire(a)});this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is('input[type="checkbox"]')},prototype:{checked:jpvs.property({get:function(){return this.element.prop("checked")},set:function(a){this.element.prop("checked",a?true:false)}}),text:jpvs.property({get:function(){this.ensureId();var a=$('label[for="'+this.id()+'"]');return a.text()},set:function(b){this.ensureId();var a=$('label[for="'+this.id()+'"]');if(a.length==0){a=$(document.createElement("label"));a.attr("for",this.id());a.insertAfter(this.element)}a.text(b)}})}});(function(){jpvs.DataGrid=function(p){this.attach(p);this.dataItemClick=jpvs.event(this);this.changedSortFilter=jpvs.event(this)};jpvs.DataGrid.allStrings={en:{clickToSortAndFilter:"Click here for sorting/filtering options",clickToSort:"Click here for sorting options",clickToFilter:"Click here for filtering options",titleSortAndFilter:"Sorting/filtering options",titleSort:"Sorting options",titleFilter:"Filtering options",ok:"OK",cancel:"Cancel",orderBy:"Order by",thenBy:"Then by",descending:"Descending",op_EQ:"is equal to",op_NEQ:"is not equal to",op_CONTAINS:"contains",op_NCONTAINS:"does not contain",op_STARTS:"starts with",op_NSTARTS:"does not start with",op_LT:"is less than",op_LTE:"is less than or equal to",op_GT:"is greater than",op_GTE:"is greater than or equal to"},it:{clickToSortAndFilter:"Clicca qui per ordinare/filtrare i dati",clickToSort:"Clicca qui per ordinare i dati",clickToFilter:"Clicca qui per filtrare i dati",titleSortAndFilter:"Ordinamento/filtro",titleSort:"Ordinamento",titleFilter:"Filtro",ok:"OK",cancel:"Annulla",orderBy:"Ordina per",thenBy:"Poi per",descending:"Ordine inverso",op_EQ:"è uguale a",op_NEQ:"è diverso da",op_CONTAINS:"contiene",op_NCONTAINS:"non contiene",op_STARTS:"inizia per",op_NSTARTS:"non inizia per",op_LT:"è minore di",op_LTE:"è minore o uguale a",op_GT:"è maggiore di",op_GTE:"è maggiore o uguale a"}};jpvs.DataGrid.getFilteringOperands=function(){return[{value:"EQ",text:jpvs.DataGrid.strings.op_EQ},{value:"NEQ",text:jpvs.DataGrid.strings.op_NEQ},{value:"CONTAINS",text:jpvs.DataGrid.strings.op_CONTAINS},{value:"NCONTAINS",text:jpvs.DataGrid.strings.op_NCONTAINS},{value:"STARTS",text:jpvs.DataGrid.strings.op_STARTS},{value:"NSTARTS",text:jpvs.DataGrid.strings.op_NSTARTS},{value:"LT",text:jpvs.DataGrid.strings.op_LT},{value:"LTE",text:jpvs.DataGrid.strings.op_LTE},{value:"GT",text:jpvs.DataGrid.strings.op_GT},{value:"GTE",text:jpvs.DataGrid.strings.op_GTE}]};jpvs.makeWidget({widget:jpvs.DataGrid,type:"DataGrid",cssClass:"DataGrid",create:function(p){var q=document.createElement("table");$(p).append(q);return q},init:function(p){jpvs.DataGrid.strings=jpvs.DataGrid.allStrings[jpvs.currentLocale()];this.element.on("click","tr",function(q){return m(p,q.currentTarget)});this.element.on("mouseenter","thead > tr",function(q){l(p,q.currentTarget)});this.element.on("mouseleave","thead > tr",function(q){k(p,q.currentTarget)})},canAttachTo:function(p){return false},prototype:{template:jpvs.property({get:function(){return this.element.data("template")},set:function(p){this.element.data("template",p)}}),emptyRowTemplate:jpvs.property({get:function(){return this.element.data("emptyRowTemplate")},set:function(p){this.element.data("emptyRowTemplate",p)}}),binder:jpvs.property({get:function(){return this.element.data("binder")},set:function(p){this.element.data("binder",p)}}),caption:jpvs.property({get:function(){var p=this.element.children("caption");if(p.length!=0){return p.text()}else{return null}},set:function(q){var p=this.element.children("caption");if(p.length==0){p=$(document.createElement("caption"));this.element.prepend(p)}p.text(q)}}),enableEvenOdd:jpvs.property({get:function(){var p=this.element.data("enableEvenOdd");if(p===true||p===false){return p}else{return true}},set:function(p){this.element.data("enableEvenOdd",p)}}),enableSorting:jpvs.property({get:function(){var p=this.element.data("enableSorting");if(p===true||p===false){return p}else{return false}},set:function(p){this.element.data("enableSorting",p)}}),enableFiltering:jpvs.property({get:function(){var p=this.element.data("enableFiltering");if(p===true||p===false){return p}else{return false}},set:function(p){this.element.data("enableFiltering",p)}}),sortAndFilterExpressions:jpvs.property({get:function(){var p=this.element.data("sortAndFilterExpressions");if(!p){p=[];this.element.find("thead > tr > th").each(function(){var q=$(this).text();p.push({value:q,text:q})})}return p},set:function(p){this.element.data("sortAndFilterExpressions",p)}}),currentSort:jpvs.property({get:function(){return this.element.data("currentSort")||null},set:function(p){this.element.data("currentSort",p)}}),currentFilter:jpvs.property({get:function(){return this.element.data("currentFilter")||null},set:function(p){this.element.data("currentFilter",p)}}),clear:function(){this.element.find("tr").remove();return this},dataBind:function(p){d(this,"tbody",p);return this},dataBindHeader:function(p){d(this,"thead",p);return this},dataBindFooter:function(p){d(this,"tfoot",p);return this},addBodyRow:function(q,p){var r="tbody";var s=g(this,r);var t=e(r);a(this,t,s,q,p);return this},addHeaderRow:function(q,p){var r="thead";var s=g(this,r);var t=e(r);a(this,t,s,q,p);return this},addFooterRow:function(q,p){var r="tfoot";var s=g(this,r);var t=e(r);a(this,t,s,q,p);return this},removeBodyRow:function(p){var q="tbody";var r=g(this,q);n(this,r,p);return this},removeHeaderRow:function(p){var q="thead";var r=g(this,q);n(this,r,p);return this},removeFooterRow:function(p){var q="tfoot";var r=g(this,q);n(this,r,p);return this},removeBodyRows:function(q,p){var r="tbody";var s=g(this,r);n(this,s,q,p);return this},removeHeaderRows:function(q,p){var r="thead";var s=g(this,r);n(this,s,q,p);return this},removeFooterRows:function(q,p){var r="tfoot";var s=g(this,r);n(this,s,q,p);return this}}});function d(s,r,q){var p=s.binder()||jpvs.DataGrid.defaultBinder;p.call(s,r,q)}function g(r,p){var q=r.element.children(p);if(q.length==0){q=$(document.createElement(p));r.element.append(q)}return q}function a(x,t,s,r,q){var v=$(document.createElement("tr"));if(q===null||q===undefined){s.append(v);if(x.enableEvenOdd()){o(-1,s)}}else{var w=s.children("tr");if(w.length==0){s.append(v)}else{w.eq(q).before(v)}if(x.enableEvenOdd()){o(q,s)}}var u=x.template();var p=x.emptyRowTemplate();if(u){b(v,t,u,p,r)}}function n(s,r,q,p){if(p===null||p===undefined){p=1}if(p==1){r.children("tr").eq(q).remove()}else{if(p>1){r.children("tr").slice(q,q+p).remove()}}if(s.enableEvenOdd()){o(q,r)}}function o(u,t){var s=t.children("tr");if(u<0){u+=s.length}var p=((u%2)==0);for(var q=u;q<s.length;q++){var r=s.eq(q);r.removeClass("Even Odd").addClass(p?"Even":"Odd");p=!p}}function e(p){if(p=="thead"){return"header"}else{if(p=="tfoot"){return"footer"}else{return"body"}}}function b(t,r,s,p,q){t.empty();if(q){$.each(s,function(y,x){var w=x;if(x.header||x.body||x.footer){w=x[r]}var v="td";if((w&&w.isHeader)||r=="header"||r=="footer"){v="th"}var u=$(document.createElement(v));t.append(u);jpvs.applyTemplate(u,w,q)});t.data("fromEmptyRowTemplate",false);t.data("dataItem",q)}else{jpvs.applyTemplate(t,p||c(s.length),q);t.data("fromEmptyRowTemplate",true)}}function c(p){return function(q){var r=jpvs.writeTag(this,"td").attr("colspan",p);jpvs.writeTag(r,"img").attr("src",jpvs.Resources.images.loading);jpvs.writeTag(r,"span",".").css("visibility","hidden")}}function m(q,r){var p=$(r).data("dataItem");if(p){return q.dataItemClick.fire(q,null,p)}}function l(t,v){var r=t.enableSorting();var q=t.enableFiltering();if(!r&&!q){return}var u="";if(r&&q){u=jpvs.DataGrid.strings.clickToSortAndFilter}else{if(r){u=jpvs.DataGrid.strings.clickToSort}else{if(q){u=jpvs.DataGrid.strings.clickToFilter}}}var s=t.sortAndFilterExpressions();var p=$(v).data("jpvsColButtons")||[];if(p.length==0){$(v).find("td,th").each(function(E){if(!s[E]){return}var z=$(this);var F=z.position();var H=F.left;var I=F.top;var G=z.innerWidth();var A=z.outerHeight();var D=I;var C=H+G;var B=jpvs.ImageButton.create(z).imageUrls({normal:jpvs.Resources.images.dataGridColumnButton,hover:jpvs.Resources.images.dataGridColumnButtonHover});C-=B.element.width();B.element.css({position:"absolute",left:C+"px",top:D+"px"}).attr("title",u);B.click(j(t,E));p.push(B)});$(v).data("jpvsColButtons",p)}}function k(q,r){var p=$(r).data("jpvsColButtons");if(p){setTimeout(function(){$.each(p,function(t,s){s.destroy()})},5000)}$(r).data("jpvsColButtons",null)}function j(q,p){return function(){h(q,p)}}function h(x,r){var u=x.enableSorting();var t=x.enableFiltering();if(!u&&!t){return}var K="";if(u&&t){K=jpvs.DataGrid.strings.titleSortAndFilter}else{if(u){K=jpvs.DataGrid.strings.titleSort}else{if(t){K=jpvs.DataGrid.strings.titleFilter}}}var D=jpvs.Popup.create().title(K).show();var q=u&&t;var C=D;var B=D;if(q){C=jpvs.writeTag(D,"fieldset");B=jpvs.writeTag(D,"fieldset");jpvs.writeTag(C,"legend",jpvs.DataGrid.strings.titleSort);jpvs.writeTag(B,"legend",jpvs.DataGrid.strings.titleFilter)}var G=[];if(u){var J=jpvs.Table.create(C);G.push(M(J,jpvs.DataGrid.strings.orderBy));G.push(M(J,jpvs.DataGrid.strings.thenBy));G.push(M(J,jpvs.DataGrid.strings.thenBy));G.push(M(J,jpvs.DataGrid.strings.thenBy));var H=x.currentSort();if(!H){var p=x.sortAndFilterExpressions();var s=p&&p[r]&&p[r].value;if(s){H=[{name:s}]}else{H=[]}}for(var y=0;y<G.length;y++){F(G[y],H[y])}}var v=[];if(t){var I=jpvs.Table.create(B);v.push(L(I));v.push(L(I));v.push(L(I));v.push(L(I));var w=x.currentFilter()||[];for(var y=0;y<v.length;y++){E(v[y],w[y])}}jpvs.writeButtonBar(D,[{text:jpvs.DataGrid.strings.ok,click:A},{text:jpvs.DataGrid.strings.cancel,click:z}]);D.close(z);function z(){D.destroy()}function A(){if(u){var W=[];for(var T=0;T<G.length;T++){var O=G[T].cmbSort;var N=G[T].chkDesc;var U=O.selectedValue();var R=N.checked();if(U&&U!=""){W.push({name:U,descending:R})}}x.currentSort(W)}if(t){var S=[];for(var T=0;T<v.length;T++){var P=v[T].cmbFilter;var Q=v[T].cmbOp;var X=v[T].txtValue;var U=P.selectedValue();var V=Q.selectedValue();var Y=X.text();if(U&&U!=""&&V&&V!=""){S.push({name:U,operand:V,value:Y})}}x.currentFilter(S)}x.changedSortFilter.fire(x);D.destroy()}function M(R,N){var Q=R.writeRow();Q.writeCell(N+": ");var P=jpvs.DropDownList.create(Q.writeCell());var O=jpvs.CheckBox.create(Q.writeCell());O.text(jpvs.DataGrid.strings.descending);P.addItem("");P.addItems(x.sortAndFilterExpressions());return{cmbSort:P,chkDesc:O}}function F(N,O){if(O){N.cmbSort.selectedValue(O.name);N.chkDesc.checked(O.descending)}}function L(R,N){var Q=R.writeRow();var O=jpvs.DropDownList.create(Q.writeCell());var P=jpvs.DropDownList.create(Q.writeCell());var S=jpvs.TextBox.create(Q.writeCell());O.addItem("");O.addItems(x.sortAndFilterExpressions());P.addItem("");P.addItems(jpvs.DataGrid.getFilteringOperands());return{cmbFilter:O,cmbOp:P,txtValue:S}}function E(N,O){if(O){N.cmbFilter.selectedValue(O.name);N.cmbOp.selectedValue(O.operand);N.txtValue.text(O.value)}}}function f(p){return{sort:p.currentSort(),filter:p.currentFilter()}}jpvs.DataGrid.defaultBinder=function(r,p){var s=this;q();s.changedSortFilter.unbind("binder");s.changedSortFilter.bind("binder",q);function q(){var u=g(s,r);var v=e(r);jpvs.readDataSource(p,null,null,f(s),t);function t(w){u.empty();$.each(w.data,function(x,y){a(s,v,u,y)})}}};jpvs.DataGrid.pagingBinder=function(t){var s=(t&&t.pageSize)||10;var u=(t&&t.preserveCurrentPage);var q=0;function p(B,w){var E=this;var C=g(E,B);var D=e(B);var v=u?q:0;q=v;var z=x();A();E.changedSortFilter.unbind("binder");E.changedSortFilter.bind("binder",A);function x(){var H=E.element.data("pagerId");var F;if(H){F=jpvs.find("#"+H)}else{var G=document.createElement("div");E.element.before(G);F=jpvs.Pager.create(G);H=jpvs.randomString(20);F.element.attr("id",H);E.element.data("pagerId",H)}F.change.unbind("DataGrid");F.change.bind("DataGrid",y);return F}function y(){var F=this.page();v=F;q=v;A(E,B,w,z)}function A(){var G=v*s;jpvs.readDataSource(w,G,s,f(E),F);function F(H){C.empty();$.each(H.data,function(J,K){a(E,D,C,K)});var I=Math.floor((H.total+s-1)/s);z.totalPages(I);z.page(v)}}}function r(){return q}p.currentPage=jpvs.property({get:r});return p};jpvs.DataGrid.scrollingBinder=function(u){var t=(u&&u.pageSize)||10;var q=(u&&u.chunkSize)||(5*t);var s=(u&&u.width);var r=(u&&u.height);var w=[];var v=false;function p(N,z){var T=this;var O=g(T,N);var P=e(N);var y=null;var x=[];var Q=null;var F=0;var E=0;var L=D();jpvs.readDataSource(z,0,t,f(T),H(function(){R(0);jpvs.readDataSource(z,t,q,f(T),H(S))}));T.changedSortFilter.unbind("binder");T.changedSortFilter.bind("binder",function(){x=[];Q=null;jpvs.readDataSource(z,y,t,f(T),H(function(){J(y)}))});function B(Y){var aa=Y;var V=aa+t;var U=true;var W;for(var X=aa;X<V&&X<Q;X++){var Z=x[X];if(!Z){U=false;W=X;break}}if(U){S()}else{var aa=Math.max(0,W-q);var V=Math.min(W+q,Q);A(aa,V)}}function A(V,U){w.push({start:V,end:U});C()}function C(){if(v){return}if(w.length!=0){var Y=w[0].start;var X=w[0].end;var W,V;for(var U=0;U<w.length;U++){var Z=w[U];W=Z.start;V=Z.end;Y=Math.min(Y,W);X=Math.max(X,V)}w=[];v=true;jpvs.readDataSource(z,Y,X-Y,f(T),H(S))}}function H(U){return function(Y){v=false;if(Q===null){Q=Y.total}var Z=Y.start;var V=Y.count;while(x.length<Q){x.push(undefined)}var W=Z,X=0;while(X<V){x[W++]=Y.data[X++]}if(U){U()}}}function R(V){if(y===null){J(V)}else{var U=V-y;if(Math.abs(U)<t){M(V,U)}else{J(V)}}y=V}function J(W){O.empty();var U=Math.min(W+t,Q);for(var V=W;V<U;V++){a(T,P,O,x[V])}K()}function M(X,U){if(U>0){T.removeBodyRows(0,U);var V=X+t-U;var W=0;while(W++<U){if(V<Q){a(T,P,O,x[V++])}}}else{if(U<0){U=-U;T.removeBodyRows(t-U,U);var V=X;var W=0;while(W<U){if(V<Q){a(T,P,O,x[V++],W++)}}}}K()}function S(){var aa=T.template();var U=T.emptyRowTemplate();var ad=O.children("tr");var Z=y;var V=Z+ad.length;var ac=false;var Y=0;for(var W=Z;W<V;W++){var X=x[W];var ab=ad.eq(Y++);if(X&&ab.data("fromEmptyRowTemplate")){if(aa){b(ab,P,aa,U,X);ac=true}}}if(ac){K()}C()}function D(){var W=T.element.data("scrollerId");var U;if(W){U=jpvs.find("#"+W)}else{var V=document.createElement("div");T.element.after(V);U=jpvs.Scroller.create(V);W=jpvs.randomString(20);U.element.attr("id",W);T.element.data("scrollerId",W);U.content.append(T.element);U.contentSize({width:"1000%",height:"200%"});G();U.objectSize({width:F+U.scrollbarW,height:E+U.scrollbarH})}U.change.unbind("DataGrid");U.change.bind("DataGrid",I);return U}function I(){var Y=this.scrollPosition();var V=Y.left;var X=0;this.contentPosition({top:X,left:V});var U=E/t*Q-E;var W=Math.min(Q,Math.floor(Y.top/U*(Q-t+5)));R(W);B(W)}function G(){var U={width:T.element.outerWidth(),height:T.element.outerHeight()};E=Math.max(E,U.height);F=Math.max(F,U.width)}function K(){if(!L){return}G();var U=E/t*Q;L.scrollableSize({width:F,height:U});L.objectSize({width:s||(F+L.scrollbarW),height:r||(E+L.scrollbarH)})}}return p}})();jQuery(function(a){a.datepicker.regional.it={closeText:"Chiudi",prevText:"&#x3c;Prec",nextText:"Succ&#x3e;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Luned&#236","Marted&#236","Mercoled&#236","Gioved&#236","Venerd&#236","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""}});jpvs.DateBox=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.DateBox,type:"DateBox",cssClass:"DateBox",create:function(a){var b=document.createElement("input");$(b).attr("type","text");$(a).append(b);return b},init:function(a){this.element.datepicker({onSelect:function(b,c){return a.change.fire(a)}});this.element.change(function(){return a.change.fire(a)});this.element.datepicker("option",$.datepicker.regional[jpvs.currentLocale()]);this.element.datepicker("hide")},canAttachTo:function(a){return false},prototype:{date:jpvs.property({get:function(){return this.element.datepicker("getDate")},set:function(a){this.element.datepicker("setDate",a)}})}});(function(){jpvs.DocumentEditor=function(r){this.attach(r)};jpvs.DocumentEditor.allStrings={en:{clickToEdit:"Click here to edit",clickToEditField:"Click here to edit this field",clickToEditHeader:"Click here to edit the header",clickToEditFooter:"Click here to edit the footer",textEditor:"Text editor",fieldEditor:"Field editor",sectionOptions:"Options",sectionMargins:"Set margins",removeSection:"Remove section",removeSection_Warning:"The section will be removed. Do you wish to continue?",removeSection_Forbidden:"The section may not be removed. There must be at least one section in the document.",addSectionBefore:"Insert new section before",addSectionAfter:"Insert new section after",sortSections:"Reorder sections",sortSections_Prompt:"Please reorder the sections of the document by dragging them up and down.",invalidValuesFound:"Invalid values found. Please correct and try again.",bodyMargins:"Page margins",defaultMargin:"Default margin",defaultMargin_Notes:"Example: 2.5cm. Used only when any of left/right/bottom/top is missing.",topMargin:"Top margin",topMargin_Notes:"Example: 2cm. If missing, the default margin is used.",bottomMargin:"Bottom margin",bottomMargin_Notes:"Example: 2cm. If missing, the default margin is used.",leftMargin:"Left margin",leftMargin_Notes:"Example: 2cm. If missing, the default margin is used.",rightMargin:"Right margin",rightMargin_Notes:"Example: 2cm. If missing, the default margin is used.",headerMargins:"Header margins and height",footerMargins:"Footer margins and height",height:"Height",error:"Error",ok:"OK",cancel:"Cancel",apply:"Apply"},it:{clickToEdit:"Clicca qui per modificare",clickToEditField:"Clicca qui per modificare il campo",clickToEditHeader:"Clicca qui per modificare l'intestazione",clickToEditFooter:"Clicca qui per modificare il piè di pagina",textEditor:"Modifica testo",fieldEditor:"Modifica campo",sectionOptions:"Opzioni",sectionMargins:"Imposta margini",removeSection:"Elimina sezione",removeSection_Warning:"Confermi l'eliminazione della sezione?",removeSection_Forbidden:"La sezione non può essere rimossa. Il documento deve contenere almeno una sezione.",addSectionBefore:"Inserisci sezione prima",addSectionAfter:"Inserisci sezione dopo",sortSections:"Cambia ordine sezioni",sortSections_Prompt:"Riordinare le sezioni trascinandole su e giù.",invalidValuesFound:"Trovati valori non validi. Correggere e riprovare.",bodyMargins:"Margini pagina",defaultMargin:"Margine predefinito",defaultMargin_Notes:"Esempio: 2.5cm. Usato solo quando manca almeno uno dei margini sinistro/destro/inferiore/superiore.",topMargin:"Margine superiore",topMargin_Notes:"Esempio: 2cm. Se non specificato, viene usato il margine predefinito.",bottomMargin:"Margine inferiore",bottomMargin_Notes:"Esempio: 2cm. Se non specificato, viene usato il margine predefinito.",leftMargin:"Margine sinistro",leftMargin_Notes:"Esempio: 2cm. Se non specificato, viene usato il margine predefinito.",rightMargin:"Margine destro",rightMargin_Notes:"Esempio: 2cm. Se non specificato, viene usato il margine predefinito.",headerMargins:"Margini ed altezza dell'intestazione",footerMargins:"Margini ed altezza del piè di pagina",height:"Altezza",error:"Errore",ok:"OK",cancel:"Annulla",apply:"Applica"}};jpvs.makeWidget({widget:jpvs.DocumentEditor,type:"DocumentEditor",cssClass:"DocumentEditor",create:function(r){var s=document.createElement("div");$(r).append(s);return s},init:function(r){jpvs.DocumentEditor.strings=jpvs.DocumentEditor.allStrings[jpvs.currentLocale()]},canAttachTo:function(r){return false},prototype:{document:jpvs.property({get:function(){return this.element.data("document")},set:function(r){this.element.data("document",r);k(this)}}),richTextEditor:jpvs.property({get:function(){return this.element.data("richTextEditor")},set:function(r){this.element.data("richTextEditor",r)}}),fieldEditor:jpvs.property({get:function(){return this.element.data("fieldEditor")},set:function(r){this.element.data("fieldEditor",r)}})}});function k(r){setTimeout(function(){l(r)},50)}function l(w){var s=w.element;s.empty();var r=w.document();var v=r&&r.sections;var u=r&&r.fields;var t={list:$()};$.each(v,function(S,Q){var R=jpvs.writeTag(s,"div");R.addClass("Section").css("position","relative");var N=Q&&Q.margins;var M=c(N,"left","2cm");var T=c(N,"top","2cm");var P=c(N,"right","2cm");var y=c(N,"bottom","2cm");R.css("padding-left",M);R.css("padding-top",T);R.css("padding-right",P);R.css("padding-bottom",y);var J=Q&&Q.header&&Q.header.margins;var L=c(J,"top","0.5cm");var I=c(J,"left",M);var K=c(J,"right",P);var H=(Q&&Q.header&&Q.header.height)||"1cm";var G=jpvs.writeTag(R,"div");G.addClass("Header");G.css("position","absolute");G.css("overflow","hidden");G.css("top",L);G.css("left",I);G.css("right",K);G.css("height",H);var E=Q&&Q.footer&&Q.footer.margins;var z=c(E,"bottom","0.5cm");var D=c(E,"left",M);var F=c(E,"right",P);var C=(Q&&Q.footer&&Q.footer.height)||"1cm";var A=jpvs.writeTag(R,"div");A.addClass("Footer");A.css("position","absolute");A.css("overflow","hidden");A.css("bottom",z);A.css("left",D);A.css("right",F);A.css("height",C);var B=jpvs.writeTag(A,"div");B.css("position","absolute");B.css("bottom","0px");B.css("left","0px");var x=jpvs.writeTag(R,"div");x.addClass("Body");var O=jpvs.writeTag(R,"div");O.addClass("MenuContainer").css({position:"absolute",top:"0px",right:"0px",zIndex:(10000-S).toString()});q(w,O,v,S,Q);p(w,G,G,Q&&Q.header&&Q.header.content,u,"Header-Hover",Q.header.highlight?"Header-Highlight":"",function(U){Q.header.content=U;Q.header.highlight=true},t,jpvs.DocumentEditor.strings.clickToEditHeader);p(w,x,x,Q&&Q.body&&Q.body.content,u,"Body-Hover",Q.body.highlight?"Body-Highlight":"",function(U){Q.body.content=U;Q.body.highlight=true},t,jpvs.DocumentEditor.strings.clickToEdit);p(w,B,A,Q&&Q.footer&&Q.footer.content,u,"Footer-Hover",Q.footer.highlight?"Footer-Highlight":"",function(U){Q.footer.content=U;Q.footer.highlight=true},t,jpvs.DocumentEditor.strings.clickToEditFooter);Q.header.highlight=false;Q.body.highlight=false;Q.footer.highlight=false});if(t.list.length){jpvs.flashClass(t.list,"Field-Highlight");if(u){$.each(u,function(y,x){x.highlight=false})}}}function q(w,r,v,u,t){var s=jpvs.Menu.create(r);s.template(["HorizontalMenuBar","VerticalMenuBar"]);s.itemTemplate(["HorizontalMenuBarItem","VerticalMenuBarItem"]);s.menuItems([{text:"...",tooltip:jpvs.DocumentEditor.strings.sectionOptions,items:[{text:jpvs.DocumentEditor.strings.sectionMargins,click:h(w,t)},jpvs.Menu.Separator,{text:jpvs.DocumentEditor.strings.addSectionBefore,click:d(w,v,u)},{text:jpvs.DocumentEditor.strings.addSectionAfter,click:d(w,v,u+1)},{text:jpvs.DocumentEditor.strings.removeSection,click:g(w,v,u)},jpvs.Menu.Separator,{text:jpvs.DocumentEditor.strings.sortSections,click:j(w,v)}]}])}function c(s,u,r){if(s){var t=s[u]||s.all;if(t){return t}}return r}function p(C,v,r,s,x,z,y,A,w,B){var u=s;if(!s){u=""}u=jpvs.cleanHtml(u);if($.trim(u)==""){u=B}r.css("cursor","pointer").attr("title",jpvs.DocumentEditor.strings.clickToEdit).click(function(){f(C,s,A);return false}).hover(function(){r.parent().addClass("Section-Hover");r.addClass(z)},function(){r.parent().removeClass("Section-Hover");r.removeClass(z)});var t=XmlParser.parseString("<root>"+u+"</root>",null,true);o(C,v,t,x,w);if(y!=""){jpvs.flashClass(v,y)}}function o(w,r,x,t,s){if(x.name=="#TEXT"){n(w,r,x.value,t,s)}else{if(x.name=="root"){if(x.children){$.each(x.children,function(z,y){o(w,r,y,t,s)})}}else{var v=x.name;var u=jpvs.writeTag(r,v);if(x.attributes){$.each(x.attributes,function(y,z){u.attr(y,z)})}if(x.children){$.each(x.children,function(z,y){o(w,u,y,t,s)})}}}}function n(E,r,C,w,u){var A=/\$\{(.*?)\}/g;var x=0;for(var y=A.exec(C);y!=null;y=A.exec(C)){var z=y[0];var v=y[1];var s=A.lastIndex;var B=s-z.length;var D=C.substring(x,B);jpvs.write(r,D);m(E,r,w,v,u);x=s}var t=C.substring(x);jpvs.write(r,t)}function m(z,r,w,v,u){var s=w&&w[v];var x=s&&s.value;var t=s&&s.highlight;if($.trim(x)==""){x=jpvs.DocumentEditor.strings.clickToEditField}var y=jpvs.writeTag(r,"span",x);y.addClass("Field").attr("title",jpvs.DocumentEditor.strings.clickToEditField).click(function(){e(z,w,v);return false}).hover(function(){y.addClass("Field-Hover")},function(){y.removeClass("Field-Hover")});if(t){u.list=u.list.add(y)}}function f(v,r,s){var u=v.richTextEditor()||a();u.editText.call(u,r,t);function t(w){if(w!==undefined&&w!=r){s(w);k(v)}}}function e(x,u,t){var r=x.fieldEditor()||b();var s=u&&u[t];var v=s&&s.value;r.editField.call(r,u,t,w);function w(y){if(y!==undefined&&y!=v){u[t]={value:y,highlight:true};k(x)}}}function h(t,s){return function(){var z=jpvs.Popup.create().title(jpvs.DocumentEditor.strings.sectionMargins).close(function(){this.destroy()});var A=jpvs.Table.create(z).caption(jpvs.DocumentEditor.strings.bodyMargins);var B=u(A,"defaultMargin",s.margins.all);var P=u(A,"topMargin",s.margins.top);var C=u(A,"bottomMargin",s.margins.bottom);var N=u(A,"leftMargin",s.margins.left);var O=u(A,"rightMargin",s.margins.right);A=jpvs.Table.create(z).caption(jpvs.DocumentEditor.strings.headerMargins);var I=u(A,"defaultMargin",s.header.margins.all);var M=u(A,"topMargin",s.header.margins.top);var K=u(A,"leftMargin",s.header.margins.left);var L=u(A,"rightMargin",s.header.margins.right);var J=u(A,"height",s.header.height);A=jpvs.Table.create(z).caption(jpvs.DocumentEditor.strings.footerMargins);var D=u(A,"defaultMargin",s.footer.margins.all);var E=u(A,"bottomMargin",s.footer.margins.bottom);var G=u(A,"leftMargin",s.footer.margins.left);var H=u(A,"rightMargin",s.footer.margins.right);var F=u(A,"height",s.footer.height);jpvs.writeButtonBar(z,[{text:jpvs.DocumentEditor.strings.ok,click:y},{text:jpvs.DocumentEditor.strings.apply,click:w},{text:jpvs.DocumentEditor.strings.cancel,click:x}]);z.show();function v(T){if(!T){return v([B,P,C,N,O,I,M,K,L,J,D,E,G,H,F])}var Q=false;var S=[];for(var R=0;R<T.length;R++){var U=T[R];U.removeState(jpvs.states.ERROR);var V=r(T[R]);if(V===undefined){U.addState(jpvs.states.ERROR);S.push(U);Q=true}}if(Q){jpvs.alert(jpvs.DocumentEditor.strings.error,jpvs.DocumentEditor.strings.invalidValuesFound,S[0])}return !Q}function y(){if(!v()){return}z.hide(function(){w();z.destroy()})}function w(){if(!v()){return}s.margins.all=r(B);s.margins.top=r(P);s.margins.bottom=r(C);s.margins.left=r(N);s.margins.right=r(O);s.header.margins.all=r(I);s.header.margins.top=r(M);s.header.margins.left=r(K);s.header.margins.right=r(L);s.header.height=r(J);s.footer.margins.all=r(D);s.footer.margins.bottom=r(E);s.footer.margins.left=r(G);s.footer.margins.right=r(H);s.footer.height=r(F);k(t)}function x(){z.destroy()}};function r(w){var x=$.trim(w.text().replace(" ",""));if(x==""){return null}var v=/^\+?[0-9]{1,2}(\.[0-9]{1,3})?(cm)?$/gi;if(!v.test(x)){return undefined}if(x.indexOf("cm")<0){x=x+"cm"}w.text(x);return x}function u(y,v,A){var x=y.writeRow();x.writeCell(jpvs.DocumentEditor.strings[v]);var z=jpvs.TextBox.create(x.writeCell());z.text(A);var w=jpvs.DocumentEditor.strings[v+"_Notes"];if(w){x.writeCell(w)}return z}}function d(t,s,r){return function(){var u={margins:{},header:{margins:{}},footer:{margins:{}},body:{highlight:true}};if(r>=s.length){s.push(u)}else{s.splice(r,0,u)}k(t)}}function g(u,t,s){return function(){if(t.length<2){jpvs.alert(jpvs.DocumentEditor.strings.error,jpvs.DocumentEditor.strings.removeSection_Forbidden);return}jpvs.confirm(jpvs.DocumentEditor.strings.removeSection,jpvs.DocumentEditor.strings.removeSection_Warning,r)};function r(){t.splice(s,1);k(u)}}function j(s,r){return function(){var z=jpvs.Popup.create().title(jpvs.DocumentEditor.strings.sortSections).close(function(){this.destroy()});jpvs.writeln(z,jpvs.DocumentEditor.strings.sortSections_Prompt);jpvs.writeTag(z,"hr");var v=jpvs.DataGrid.create(z);v.template([t,u]);v.dataBind(r);v.element.sortable({items:"tbody > tr"});jpvs.writeTag(z,"hr");jpvs.writeButtonBar(z,[{text:jpvs.DocumentEditor.strings.ok,click:y},{text:jpvs.DocumentEditor.strings.apply,click:w},{text:jpvs.DocumentEditor.strings.cancel,click:x}]);z.show();function t(A){jpvs.writeTag(this,"img").attr("src",jpvs.Resources.images.moveButton);this.parent().css("cursor","move").data("section",A)}function u(A){jpvs.write(this,B(jpvs.stripHtml(A&&A.body&&A.body.content)));function B(C){if(C.length>150){return C.substring(0,147)+"..."}else{return C}}}function y(){z.hide(function(){w();z.destroy()})}function w(){var A=v.element.find("tbody > tr");r.splice(0,r.length);A.each(function(){var B=$(this).data("section");r.push(B)});k(s)}function x(){z.destroy()}}}function a(){function r(s,u){var w=jpvs.Popup.create().title(jpvs.DocumentEditor.strings.textEditor).close(function(){this.destroy()});var x=jpvs.MultiLineTextBox.create(w);x.text(s);x.element.attr({rows:10,cols:50});jpvs.writeButtonBar(w,[{text:jpvs.DocumentEditor.strings.ok,click:v},{text:jpvs.DocumentEditor.strings.cancel,click:t}]);w.show(function(){x.focus()});function v(){w.hide(function(){u(x.text());w.destroy()})}function t(){w.destroy();u()}}return{editText:r}}function b(){function r(u,t,x){var z=jpvs.Popup.create().title(jpvs.DocumentEditor.strings.fieldEditor).close(function(){this.destroy()});var A=jpvs.TextBox.create(z);var s=u&&u[t];var v=s&&s.value;A.text(v||"");jpvs.writeButtonBar(z,[{text:jpvs.DocumentEditor.strings.ok,click:y},{text:jpvs.DocumentEditor.strings.cancel,click:w}]);z.show(function(){A.focus()});function y(){z.hide(function(){x(A.text());z.destroy()})}function w(){z.destroy();x()}}return{editField:r}}})();jpvs.DropDownList=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.DropDownList,type:"DropDownList",cssClass:"DropDownList",create:function(a){var b=document.createElement("select");$(a).append(b);return b},init:function(a){this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is("select")},prototype:{clearItems:function(){this.element.empty();return this},addItem:function(e,c){var d=e;var b=c!=null?c:e;if(d!=null&b!=null){var a=document.createElement("option");$(a).attr("value",d).text(b).appendTo(this.element)}return this},addItems:function(a){var b=this;$.each(a,function(c,d){if(d!=null){if(d.value!=null){b.addItem(d.value,d.text)}else{b.addItem(d)}}});return this},count:function(){return this.element.find("option").length},selectedValue:jpvs.property({get:function(){return this.element.val()},set:function(a){this.element.val(a)}})}});jpvs.ImageButton=function(a){this.attach(a);this.click=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.ImageButton,type:"ImageButton",cssClass:"ImageButton",create:function(a){var b=document.createElement("img");$(a).append(b);return b},init:function(c){var b=this.element.attr("src");var a=this.element.data("jpvsHover");this.imageUrls({normal:b,hover:a});this.element.hover(function(){c.element.attr("src",c.getHoverImage())},function(){c.element.attr("src",c.getNormalImage())});this.element.click(function(){return c.click.fire(c)})},canAttachTo:function(a){return false},prototype:{imageUrls:jpvs.property({get:function(){return this.element.data("images")},set:function(a){this.element.data("images",a);this.element.attr("src",this.getNormalImage())}}),getNormalImage:function(){var a=this.imageUrls();if(a){if(typeof(a)=="string"){return a}else{return a.normal||""}}return""},getHoverImage:function(){var a=this.imageUrls();if(a){if(typeof(a)=="string"){return a}else{return a.hover||a.normal||""}}return""}}});jpvs.LinkButton=function(a){this.attach(a);this.click=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.LinkButton,type:"LinkButton",cssClass:"LinkButton",create:function(a){var b=document.createElement("a");$(a).append(b);return b},init:function(a){a.element.attr("href","#");this.element.click(function(b){b.preventDefault();return a.click.fire(a)})},canAttachTo:function(a){return false},prototype:{text:jpvs.property({get:function(){return this.element.text()},set:function(a){this.element.text(a)}})}});(function(){var a={};$(document).ready(function(){$(document).on("mouseover.jpvsMenu",".Menu .Item",f);$(document).on("mouseout.jpvsMenu",".Menu .Item",e);$(document).on("click.jpvsMenu",d)});jpvs.Menu=function(k){this.attach(k);this.click=jpvs.event(this)};jpvs.Menu.Separator={};jpvs.Menu.MenuElement=function(l,o,n,m,k){this.element=l;this.menuItems=o;this.level=n;this.isPopup=m;this.childrenAlignment=k;this.itemElements=l.find(".Item");this.parentElement=null};jpvs.Menu.MenuElement.prototype.show=function(){$.each(a,function(v,w){b(w)});var k=[];for(var u=this;u!=null;u=u.parentElement){k.unshift(u)}for(var q=0;q<k.length;q++){var r=k[q];if(r.isPopup){var s=r.parentElement;var t=n(s,r);var l=o(t);var m=p(l,s.childrenAlignment);r.element.show().css({position:"absolute",left:m.x+"px",top:m.y+"px"});jpvs.fitInWindow(r.element)}else{r.element.show()}}function n(y,x){for(var v=0;v<y.itemElements.length;v++){var w=$(y.itemElements[v]);var z=w.data("subMenu");if(z===x){return w}}}function o(v){var y=v.offset();var z=v.outerWidth();var x=v.outerHeight();return{x:y.left,y:y.top,w:z,h:x}}function p(w,v){if(v=="right"){return{x:w.x+w.w,y:w.y}}else{if(v=="bottom"){return{x:w.x,y:w.y+w.h}}else{return w}}}};jpvs.Menu.MenuElement.prototype.hide=function(){this.element.hide()};jpvs.Menu.MenuElement.prototype.hideIfNonRoot=function(){if(this.level!=0){this.element.hide()}};jpvs.Menu.MenuElement.prototype.getChildren=function(){var k=[];$.each(this.itemElements,function(l,m){var n=$(m).data("subMenu");k.push(n)});return k};jpvs.Menu.Templates={HorizontalMenuBar:function(l){var m=l.items;var n=l.itemTemplate;var k=l.level;var p=jpvs.Table.create(this).addClass("HorizontalMenuBar").addClass("HorizontalMenuBar-Level"+k);var o=p.writeBodyRow();$.each(m,function(r,s){var q=o.writeCell().addClass("Item");jpvs.applyTemplate(q,n,s)});return new jpvs.Menu.MenuElement(p.element,m,k!=0,false,"bottom")},VerticalMenuBar:function(l){var m=l.items;var n=l.itemTemplate;var k=l.level;var o=jpvs.Table.create(this).addClass("VerticalMenuBar").addClass("VerticalMenuBar-Level"+k);$.each(m,function(p,q){var r=o.writeBodyRow();r.element.addClass("Item");jpvs.applyTemplate(r,n,q)});return new jpvs.Menu.MenuElement(o.element,m,k!=0,false,"right")},PopupMenu:function(l){var m=l.items;var n=l.itemTemplate;var k=l.level;var o=jpvs.Table.create(this).addClass("PopupMenu").addClass("PopupMenu-Level"+k);$.each(m,function(p,q){var r=o.writeBodyRow();r.element.addClass("Item");jpvs.applyTemplate(r,n,q)});return new jpvs.Menu.MenuElement(o.element,m,k!=0,true,"right")}};jpvs.Menu.ItemTemplates={HorizontalMenuBarItem:function(k){if(k===jpvs.Menu.Separator){this.addClass("Separator");jpvs.write(this,"|")}else{jpvs.write(this,k&&k.text);if(k&&k.tooltip){this.attr("title",k.tooltip)}}},VerticalMenuBarItem:function(k){jpvs.Menu.ItemTemplates.PopupMenuItem.call(this,k)},PopupMenuItem:function(m){if(m===jpvs.Menu.Separator){this.addClass("Separator");var n=jpvs.writeTag(this,"td").attr("colspan",3);jpvs.writeTag(n,"hr")}else{var o=jpvs.writeTag(this,"td").addClass("Icon");var p=jpvs.writeTag(this,"td",m&&m.text).addClass("Text");var q=jpvs.writeTag(this,"td").addClass("SubMenu");if(m&&m.tooltip){p.attr("title",m.tooltip)}if(m&&m.icon){var l=jpvs.writeTag(o,"img");l.attr("src",m.icon)}if(m&&m.items&&m.items.length){var k=jpvs.writeTag(q,"img");k.attr("src",jpvs.Resources.images.subMenuMarker)}}}};jpvs.Menu.Templates.Default_Level0=jpvs.Menu.Templates.HorizontalMenuBar;jpvs.Menu.Templates.Default_OtherLevels=jpvs.Menu.Templates.PopupMenu;jpvs.Menu.ItemTemplates.Default_Level0=jpvs.Menu.ItemTemplates.HorizontalMenuBarItem;jpvs.Menu.ItemTemplates.Default_OtherLevels=jpvs.Menu.ItemTemplates.PopupMenuItem;jpvs.makeWidget({widget:jpvs.Menu,type:"Menu",cssClass:"Menu",create:function(k){var l=document.createElement("div");$(k).append(l);return l},init:function(l){var k=g(this.element);this.element.empty();this.menuItems(k);this.ensureId();a[this.id()]=this},canAttachTo:function(k){return false},prototype:{template:j("jpvsTemplate"),itemTemplate:j("jpvsItemTemplate"),menuItems:jpvs.property({get:function(){return this.element.data("menuItems")},set:function(k){this.element.data("menuItems",k);h(this,k)}})}});function j(k){return jpvs.property({get:function(){var l=this.element.data(k);if(!l){return[]}if(typeof(l)=="string"){var m=l.split(",");return m}else{return l}},set:function(l){this.element.data(k,l)}})}function g(l){var n=[];o(l,null,n);m(n);return n;function o(q,r,s){var p=$(q).contents();p.each(function(){var u=this;var t=$(this);if(u.nodeType==3){if(r){r.text=k(r.text,t.text())}}else{if(u.nodeType==1){var v=u.nodeName.toLowerCase();if(v=="ul"||v=="ol"){o(u,null,s)}else{if(v=="a"){if(r){r.text=k(r.text,t.text());r.href=t.attr("href")}}else{if(v=="button"){if(r){r.text=k(r.text,t.text());r.click=u.onclick}}else{var w=r;r={text:"",items:[]};s.push(r);o(u,r,r.items);r=w}}}}}})}function m(t){if(!t){return}for(var r=0;r<t.length;r++){var s=t[r];var q=(s.text!=null&&$.trim(s.text)!="");var p=(s.items!=null&&s.items.length!=0);if(!q&&!p){t[r]=jpvs.Menu.Separator}m(s.items)}}function k(p,q){p=$.trim(p)+" "+$.trim(q);return $.trim(p)}}function h(p,l){p.element.empty();var o=p.template();var k=p.itemTemplate();p.rootElement=n(p.element,o,k,0,l);m(null,p.rootElement);function m(s,r){if(!r){return}r.parentElement=s;var q=r.getChildren();$.each(q,function(u,t){m(r,t)})}function n(s,y,v,w,u){if(!u||u.length==0){return}var r=c(y[w],w,jpvs.Menu.Templates);var q=c(v[w],w,jpvs.Menu.ItemTemplates);var x=jpvs.applyTemplate(s,r,{items:u,itemTemplate:q,level:w});if(w==0){x.show()}else{x.hide()}var t=x.element.find(".Item");$.each(u,function(A,B){var C=t[A];if(C){var z=$(C);z.data("menuItem",B);var D=n(s,y,v,w+1,B&&B.items);if(D){z.data("subMenu",D)}}});return x}}function c(m,l,k){var n;if(typeof(m)=="function"){n=m}else{if(typeof(m)=="string"){n=k[m]}}if(!n){if(l==0){n=k.Default_Level0}else{n=k.Default_OtherLevels}}return n}function b(k){var m=k.rootElement;l(m);function l(o){if(!o){return}o.hideIfNonRoot();var n=o.getChildren();$.each(n,function(q,p){l(p)})}}function f(k){var l=$(k.currentTarget);var m=l.data("menuItem");if(m===jpvs.Menu.Separator){return}l.addClass("Item-Hover")}function e(k){var l=$(k.currentTarget);l.removeClass("Item-Hover")}function d(n){var k=$(n.target);var l=k.closest(".Menu .Item");var m=l.closest(".Menu");if(l.length==0){$.each(a,function(r,s){b(s)})}else{var p=l.data("menuItem");if(p===jpvs.Menu.Separator){return}var o=jpvs.find(m);var q=l.data("subMenu");if(q){q.show()}else{b(o)}o.click.fire(o,null,p);if(p&&p.click){p.click.call(p,p)}if(p&&p.href){window.location=p.href}}}})();jpvs.MultiLineTextBox=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.MultiLineTextBox,type:"MultiLineTextBox",cssClass:"MultiLineTextBox",create:function(a){var b=document.createElement("textarea");$(a).append(b);return b},init:function(a){this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is("textarea")},prototype:{text:jpvs.property({get:function(){return this.element.val()},set:function(a){this.element.val(a)}})}});(function(){jpvs.Pager=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.Pager.allStrings={en:{firstPage:"First page",previousPage:"Previous page",nextPage:"Next page",lastPage:"Last page",pag:"Page"},it:{firstPage:"Prima pagina",previousPage:"Pagina precedente",nextPage:"Pagina successiva",lastPage:"Ultima pagina",pag:"Pag."}};jpvs.makeWidget({widget:jpvs.Pager,type:"Pager",cssClass:"Pager",create:function(a){var b=document.createElement("table");$(a).append(b);return b},init:function(j){var g=jpvs.writeTag(j.element,"tbody");var h=jpvs.writeTag(g,"tr");var c=jpvs.writeTag(h,"td");var f=jpvs.writeTag(h,"td");var b=jpvs.writeTag(h,"td");var e=jpvs.writeTag(h,"td");var d=jpvs.writeTag(h,"td");jpvs.Pager.strings=jpvs.Pager.allStrings[jpvs.currentLocale()];jpvs.LinkButton.create(c).text(jpvs.Pager.strings.firstPage).click(function(){j.page(Math.min(0,j.totalPages()-1));j.change.fire(j)});jpvs.LinkButton.create(e).text(jpvs.Pager.strings.nextPage).click(function(){j.page(Math.min(j.page()+1,j.totalPages()-1));j.change.fire(j)});jpvs.LinkButton.create(f).text(jpvs.Pager.strings.previousPage).click(function(){j.page(Math.max(0,j.page()-1));j.change.fire(j)});jpvs.LinkButton.create(d).text(jpvs.Pager.strings.lastPage).click(function(){j.page(j.totalPages()-1);j.change.fire(j)});var a=jpvs.DropDownList.create(b).change(function(){var k=parseInt(this.selectedValue());j.page(Math.min(k,j.totalPages()-1));j.change.fire(j)});this.element.data("cmbPages",a)},canAttachTo:function(a){return false},prototype:{page:jpvs.property({get:function(){return this.element.data("page")||0},set:function(b){this.element.data("page",b);var a=this.element.data("cmbPages");a.selectedValue(b.toString())}}),totalPages:jpvs.property({get:function(){return this.element.data("totalPages")||0},set:function(d){var c=this.totalPages();if(c!=d){var a=this.element.data("cmbPages");a.clearItems();for(var b=0;b<d;b++){a.addItem(b.toString(),jpvs.Pager.strings.pag+" "+(b+1)+" / "+d)}}this.element.data("totalPages",d)}})}})})();(function(){var a={};jpvs.Popup=function(b){this.attach(b);this.close=jpvs.event(this)};jpvs.Popup.getTopMost=function(){var b,c;$.each(a,function(d,e){if(!e.open){return}var f=e.widget.zIndex();if(!c||f>c){b=e;c=f}});return b?b.widget:null};jpvs.makeWidget({widget:jpvs.Popup,type:"Popup",cssClass:"Popup",create:function(b){var c=document.createElement("div");$(c).attr("id",jpvs.randomString(20));$(b).append(c);return c},init:function(g){a[this.element.attr("id")]={open:false,widget:this};var b=this.element.contents();this.blanketElement=$(document.createElement("div"));this.blanketElement.addClass("DimScreen").css({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%"});this.element.append(this.blanketElement);this.contentsElement=$(document.createElement("div"));this.contentsElement.addClass("Contents").append(b);this.element.append(this.contentsElement);this.element.hide();var h=this.element.data("jpvsWidth");if(h){this.contentsElement.css({width:h})}var c=this.contentsElement.children("h1").detach();var f=this.contentsElement.contents();this.titleElement=$(document.createElement("div"));this.titleElement.addClass("Title");this.contentsElement.append(this.titleElement);this.bodyElement=$(document.createElement("div"));this.bodyElement.addClass("Body");this.contentsElement.append(this.bodyElement);this.bodyElement.append(f);this.closeButton=jpvs.ImageButton.create(this.titleElement);this.closeButton.imageUrls({normal:jpvs.Resources.images.closeButton,hover:jpvs.Resources.images.closeButtonHover});this.closeButton.click.bind(function(){g.hide();g.close.fire(g)});var d=jpvs.writeTag(this.titleElement,"h1");d.append(c.contents());if(this.contentsElement.draggable){this.contentsElement.draggable({addClasses:false,containment:"window",cursor:"move",handle:d,scroll:false})}this.contentsElement.mousedown(e(this));function e(j){return function(){j.bringForward()}}},canAttachTo:function(b){return false},destroy:function(){var b=this;this.hide(function(){b.element.remove()});return false},getMainContentElement:function(){return this.bodyElement},prototype:{modal:jpvs.property({get:function(){return this.blanketElement.is(":visible")},set:function(b){if(b){this.blanketElement.show()}else{this.blanketElement.hide()}}}),show:function(b){var c=this;this.element.show();this.center();setTimeout(function(){c.center()},0);this.contentsElement.hide();this.contentsElement.fadeIn(function(){c.center();if(b){b()}});if(this.modal()){this.blanketElement.show()}else{this.blanketElement.hide()}a[this.element.attr("id")].open=true;this.bringForward();return this},hide:function(b){this.blanketElement.hide();this.contentsElement.fadeOut(b);a[this.element.attr("id")].open=false;return this},center:function(){var g=this.contentsElement.outerWidth();var f=this.contentsElement.outerHeight();var h=$(window);var k=h.width();var j=h.height();var d=f-j;var e=g-k;var c=this.bodyElement.width();var b=this.bodyElement.height();if(e>0||d>0){this.bodyElement.css("overflow","auto");if(e>0){c-=e;this.bodyElement.css("width",c+"px")}if(d>0){b-=d;this.bodyElement.css("height",b+"px")}f=this.contentsElement.outerHeight();g=this.contentsElement.outerWidth()}var l=(k-g)/2;var m=(j-f)/2;this.contentsElement.css({position:"fixed",top:m+"px",left:l+"px"});return this},bringForward:function(){var b=jpvs.Popup.getTopMost();if(b){if(b!==this){this.zIndex(b.zIndex()+1)}}else{this.zIndex(10000)}return this},title:jpvs.property({get:function(){return this.titleElement.children("h1").text()},set:function(b){this.titleElement.children("h1").text(b);if(b){this.titleElement.show()}else{this.titleElement.hide()}}}),width:jpvs.property({get:function(){return this.contentsElement.width()},set:function(b){this.contentsElement.css("width",b)}}),maxWidth:jpvs.property({get:function(){return this.contentsElement.css("max-width")},set:function(b){this.contentsElement.css("max-width",b)}}),zIndex:jpvs.property({get:function(){var b=parseInt(this.contentsElement.css("zIndex"));return isFinite(b)?b:10000},set:function(b){this.blanketElement.css("zIndex",b);this.contentsElement.css("zIndex",b)}})}});jpvs.alert=function(){var f={title:jpvs.alert.defaultTitle,text:"",onclose:null,buttons:[{text:"OK"}]};var e=false,d=false;for(var c=0;c<arguments.length;c++){var b=arguments[c];if(!b){continue}if(typeof(b)=="string"){if(!d){f.text=b;d=true}else{if(!e){f.title=f.text;f.text=b;e=true}}}else{if(typeof(b)=="function"||b.__WIDGET__){f.onclose=b}else{if(b.length){f.buttons=b}}}}var g=jpvs.Popup.create();g.maxWidth("75%").title(f.title||null);jpvs.write(g.bodyElement,f.text);if(f.buttons){$.each(f.buttons,function(k,j){if(j){j.click=h(g,j.click)}})}jpvs.writeButtonBar(g.bodyElement,f.buttons);g.show();g.center();g.close.bind(function(){g.hide();if(f.onclose){if(typeof(f.onclose)=="function"){f.onclose()}else{if(f.onclose.__WIDGET__){f.onclose.focus()}}}setTimeout(function(){g.destroy()},5000)});function h(k,j){return function(){if(j){j()}k.close.fire()}}};jpvs.confirm=function(j,f,e,d,h,g){var b=false;function c(){if(b){if(e){e()}}else{if(d){d()}}}jpvs.alert(j,f,c,[{text:h||"OK",click:function(){b=true}},{text:g||"Cancel",click:function(){b=false}}])};$(document).ready(function(){$(document).keydown(function(b){if(b.which==27){var c=jpvs.Popup.getTopMost();if(c){c.closeButton.click.fire(c);return false}}})})})();(function(){jpvs.Scroller=function(b){this.attach(b);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.Scroller,type:"Scroller",cssClass:"Scroller",create:function(b){var c=document.createElement("div");$(b).append(c);return c},init:function(e){var c={width:e.element.width(),height:e.element.height()};e.element.css({position:"relative",width:"200px",height:"200px"});var b=e.element.contents();e.contentBox=jpvs.writeTag(e.element,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"});e.content=jpvs.writeTag(e.contentBox,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"});e.scrollerBox=jpvs.writeTag(e.element,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"auto"});e.scrollerSizer=jpvs.writeTag(e.scrollerBox,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"});var d=e.scrollerBox.css("overflow");e.scrollerBox.css("overflow","scroll");var f=e.scrollerSizer.innerWidth();var g=e.scrollerBox.innerWidth();e.scrollerBox.css("overflow",d);e.scrollbarW=Math.abs(f-g);e.scrollbarH=e.scrollbarW;e.scrollerSizer.css({width:"100%",height:"100%"});e.scrollerBox.scroll(a(e));if(b.length){e.content.append(b);c.height+=e.scrollbarH;c.width+=e.scrollbarW;e.scrollableSize(c).contentSize(c)}},canAttachTo:function(b){return false},getMainContentElement:function(){return this.content},prototype:{objectSize:jpvs.property({get:function(){return{width:this.element.width(),height:this.element.height()}},set:function(b){this.element.width(b.width).height(b.height)}}),scrollableSize:jpvs.property({get:function(){return{width:this.scrollerSizer.width(),height:this.scrollerSizer.height()}},set:function(b){this.scrollerSizer.width(b.width).height(b.height)}}),contentSize:jpvs.property({get:function(){return{width:this.content.width(),height:this.content.height()}},set:function(b){this.content.width(b.width).height(b.height)}}),scrollPosition:jpvs.property({get:function(){var c=this.scrollerBox.scrollTop();var b=this.scrollerBox.scrollLeft();return{top:c,left:b}},set:function(b){this.scrollerBox.scrollTop(b.top).scrollLeft(b.left)}}),contentPosition:jpvs.property({get:function(){var c=this.contentBox.scrollTop();var b=this.contentBox.scrollLeft();return{top:c,left:b}},set:function(b){this.contentBox.scrollTop(b.top).scrollLeft(b.left)}})}});function a(b){return function(){b.change.fire(b)}}})();(function(){jpvs.Table=function(d){this.attach(d)};jpvs.makeWidget({widget:jpvs.Table,type:"Table",cssClass:"Table",create:function(d){var e=document.createElement("table");$(d).append(e);return e},init:function(d){},canAttachTo:function(d){return $(d).is("table")},prototype:{addClass:function(d){this.element.addClass(d);return this},removeClass:function(d){this.element.removeClass(d);return this},css:function(){this.element.css.apply(this.element,arguments);return this},writeHeaderRow:function(){return c(this,"thead")},writeBodyRow:function(){return c(this,"tbody")},writeRow:function(){return this.writeBodyRow()},writeFooterRow:function(){return c(this,"tfoot")},caption:jpvs.property({get:function(){var d=this.element.children("caption");if(d.length!=0){return d.text()}else{return null}},set:function(e){var d=this.element.children("caption");if(d.length==0){d=$(document.createElement("caption"));this.element.prepend(d)}d.text(e)}}),clear:function(){this.element.find("tr").remove();return this}}});function a(f,d){var e=f.element.children(d);if(e.length==0){e=$(document.createElement(d));f.element.append(e)}return e}function c(g,d){var e=a(g,d);var f=$(document.createElement("tr"));e.append(f);return new b(g,f)}function b(e,d){this.table=e;this.element=d}b.prototype.writeHeaderCell=function(d){return jpvs.writeTag(this.element,"th",d)};b.prototype.writeCell=function(d){return jpvs.writeTag(this.element,"td",d)};b.prototype.getMainContentElement=function(){return this.element}})();jpvs.TextBox=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.TextBox,type:"TextBox",cssClass:"TextBox",create:function(a){var b=document.createElement("input");$(b).attr("type","text");$(a).append(b);return b},init:function(a){this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is('input[type="text"],input[type="password"]')},prototype:{text:jpvs.property({get:function(){return this.element.val()},set:function(a){this.element.val(a)}}),width:jpvs.property({get:function(){return this.element.css("width")},set:function(a){this.element.css("width",a)}})}});