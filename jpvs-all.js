var jpvs=(function(){function a(h,d){var f=document.getElementsByTagName("head")[0]||document.documentElement;var g=document.createElement("script");g.src=h;var e=false;g.onload=g.onreadystatechange=function(){if(!e&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){e=true;d()}};f.insertBefore(g,f.firstChild)}function c(g,f){var d=false;for(var e in g){var h=g[e];if(h==f){d=true;break}}if(!d){g.push(f);return true}else{return false}}function b(d,s){var t={ClassToFile:{jpvs:"Core.js",Event:"Event.js",Resources:"Resources.js",Button:"widgets/Button.js",CheckBox:"widgets/CheckBox.js",DataGrid:"widgets/DataGrid.js",DropDownList:"widgets/DropDownList.js",ImageButton:"widgets/ImageButton.js",LinkButton:"widgets/LinkButton.js",Menu:"widgets/Menu.js",Pager:"widgets/Pager.js",Popup:"widgets/Popup.js",Scroller:"widgets/Scroller.js",Table:"widgets/Table.js",TextBox:"widgets/TextBox.js",Storage:"storage/Storage.js",SvgParser:"parsers/SvgParser.js",XmlParser:"parsers/XmlParser.js"},ClassToModule:{jpvs:"core",Event:"core",Resources:"core",Button:"widgets",CheckBox:"widgets",DataGrid:"widgets",DropDownList:"widgets",ImageButton:"widgets",LinkButton:"widgets",Menu:"widgets",Pager:"widgets",Popup:"widgets",Scroller:"widgets",Table:"widgets",TextBox:"widgets",Storage:"storage",SvgParser:"parsers",XmlParser:"parsers"},ModuleToDepends:{animations:["core"],utils:["core"],core:["bootstrap"],bootstrap:[],widgets:["core","pager","table","linkbutton","imagebutton"],storage:["core","utils"],parsers:[]},ModuleToFiles:{animations:["Animations.js"],utils:["Base64.js","JSON.js","Random.js"],core:["Core.js","Event.js","Resources.js"],bootstrap:["jpvs.js"],widgets:["widgets/Button.js","widgets/CheckBox.js","widgets/DataGrid.js","widgets/DropDownList.js","widgets/ImageButton.js","widgets/LinkButton.js","widgets/Menu.js","widgets/Pager.js","widgets/Popup.js","widgets/Scroller.js","widgets/Table.js","widgets/TextBox.js"],storage:["storage/Storage.js"],parsers:["parsers/SvgParser.js","parsers/XmlParser.js"]}};var r=[];if(d){for(var m in d){var e=d[m];var q=t.ClassToModule[e];c(r,q)}}if(s){for(var m in s){var q=s[m];c(r,q)}}var p=true;while(p){p=false;for(var m in r){var q=r[m];var g=t.ModuleToDepends[q];for(var n in g){var f=g[n];if(c(r,f)){p=true}}}}var o=jpvs.baseUrl||"jpvs";var l=[];for(var m in r){var q=r[m];var k=t.ModuleToFiles[q];for(var n in k){var h=k[n];c(l,o+"/"+h)}}l.reverse();return l}return function(d,g){if(!d){}else{if(typeof(d)=="function"){g=d;$(document).ready(function(){jpvs.createAllWidgets();g(jpvs.widgets)})}else{var e=b(d.classes,d.modules);function f(){if(!e.TotalCount){e.TotalCount=e.length}var h=e.shift();if(h){setTimeout(function(){a(h,f)},10)}else{jpvs.createAllWidgets();if(g){g(jpvs.widgets)}}}$(document).ready(f)}}}})();(function(){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(k,l){window.setTimeout(k,1000/60)};var h=[];var j=false;var b=null;jpvs.animate=function(o,k){var q=(o&&o.t0!=null)?o.t0:0;var r=(o&&o.t1!=null)?o.t1:1;var p=Math.abs((o&&o.step)||0);var m=Math.abs((o&&o.duration)||1000);var n=(o&&o.easingFunction)||f;var l=k||o;h.push({t0:q,t1:r,step:p,duration:m,animFunc:l,easingFunc:n,startTime:null,endTime:null});c()};function c(){if(!j){i(a);j=true}}function a(){if(b==null){if(h.length>0){b=h.shift()}else{j=false;return}}try{var k=new Date().getTime();if(b.startTime==null){b.startTime=k;b.endTime=b.startTime+b.duration}if(b.step){var l=e(k);b.animFunc(l)}else{var l=d(k);b.animFunc(l)}if(k>=b.endTime){b=null}}finally{i(a)}}function d(k){if(k<=b.startTime){return b.t0}else{if(k>=b.endTime){return b.t1}else{return b.easingFunc(b.startTime,b.endTime,b.t0,b.t1,k)}}}function e(k){var r=b.t0;var t=b.t1;var p=b.step;var n=b.startTime;var l=b.endTime;var m=Math.ceil(Math.abs((t-r)/p));var o=t>r?1:-1;var u=(l-n)/m;var q=Math.floor((k-n)/u);if(k<=n){return r}else{if(k>=l){return t}else{return r+o*q*p}}}function f(o,l,q,r,k){var n=(k-o)/(l-o);var m=0.5-Math.cos(n*Math.PI)/2;var p=q+m*(r-q);return p}function g(o,l,q,r,k){var n=(k-o)/(l-o);var m=n;var p=q+m*(r-q);return p}jpvs.animate.harmonicEasing=f;jpvs.animate.linearEasing=g})();(function(){function d(){this.buffer=[]}d.prototype.append=function a(g){this.buffer.push(g);return this};d.prototype.toString=function e(){return this.buffer.join("")};var b={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(o){var p=new d();var n=new f(o);while(n.moveNext()){var g=n.current;n.moveNext();var h=n.current;n.moveNext();var i=n.current;var j=g>>2;var k=((g&3)<<4)|(h>>4);var l=((h&15)<<2)|(i>>6);var m=i&63;if(isNaN(h)){l=m=64}else{if(isNaN(i)){m=64}}p.append(this.codex.charAt(j)+this.codex.charAt(k)+this.codex.charAt(l)+this.codex.charAt(m))}return p.toString()},decode:function(k){var l=new d();var j=new c(k);while(j.moveNext()){var g=j.current;if(g<128){l.append(String.fromCharCode(g))}else{if((g>191)&&(g<224)){j.moveNext();var h=j.current;l.append(String.fromCharCode(((g&31)<<6)|(h&63)))}else{j.moveNext();var h=j.current;j.moveNext();var i=j.current;l.append(String.fromCharCode(((g&15)<<12)|((h&63)<<6)|(i&63)))}}}return l.toString()}};function f(g){this._input=g;this._index=-1;this._buffer=[]}f.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0){this.current=this._buffer.shift();return true}else{if(this._index>=(this._input.length-1)){this.current=Number.NaN;return false}else{var g=this._input.charCodeAt(++this._index);if((g==13)&&(this._input.charCodeAt(this._index+1)==10)){g=10;this._index+=2}if(g<128){this.current=g}else{if((g>127)&&(g<2048)){this.current=(g>>6)|192;this._buffer.push((g&63)|128)}else{this.current=(g>>12)|224;this._buffer.push(((g>>6)&63)|128);this._buffer.push((g&63)|128)}}return true}}}};function c(g){this._input=g;this._index=-1;this._buffer=[]}c.prototype={current:64,moveNext:function(){if(this._buffer.length>0){this.current=this._buffer.shift();return true}else{if(this._index>=(this._input.length-1)){this.current=64;return false}else{var j=b.codex.indexOf(this._input.charAt(++this._index));var k=b.codex.indexOf(this._input.charAt(++this._index));var l=b.codex.indexOf(this._input.charAt(++this._index));var m=b.codex.indexOf(this._input.charAt(++this._index));var g=(j<<2)|(k>>4);var h=((k&15)<<4)|(l>>2);var i=((l&3)<<6)|m;this.current=g;if(l!=64){this._buffer.push(h)}if(m!=64){this._buffer.push(i)}return true}}}};jpvs.encodeUtf8Base64=function(g){return b.encode(g)};jpvs.decodeBase64Utf8=function(g){return b.decode(g)}})();(function(){function a(b){if(!b){return b}if(b.getMainContentElement){return b.getMainContentElement()}else{return $(b)}}jpvs.getElementIfWidget=a;jpvs.widgetDefs=[];jpvs.widgets={};jpvs.find=function(c){var b=$(c);if(b.length==0){return null}else{if(b.length==1){return b.data("jpvs-widget")}else{var d=[];b.each(function(){d.push($(this).data("jpvs-widget"))});d.each=function(e){for(var f=0;f<d.length;f++){var g=d[f];e.call(g,g)}};return d}}};jpvs.states={HOVER:"Hover",FOCUS:"Focus",ERROR:"Error",DISABLED:"Disabled"};jpvs.property=function(b){return function(c){if(c===undefined){return b.get.call(this)}else{b.set.call(this,c);return this}}};jpvs.currentLocale=(function(){var b="en";return jpvs.property({get:function(){return b},set:function(c){b=c}})})();jpvs.event=function(b){return new jpvs.Event(b)};jpvs.makeWidget=function(l){jpvs.widgetDefs.push(l);var g=l.widget;if(!g){throw"Missing widget field in widget definition"}if(!l.create){throw"Missing create function in widget definition"}if(!l.init){throw"Missing init function in widget definition"}g.__WIDGET__=l.type;if(!g.__WIDGET__){throw"Missing type field in widget definition"}if(!l.cssClass){throw"Missing cssClass field in widget definition"}g.create=e(l);g.attach=d(l);g.prototype.toString=function(){return this.__WIDGET__};g.prototype.attach=c(l);g.prototype.destroy=f(l);g.prototype.focus=h(l);g.prototype.addState=b(l);g.prototype.removeState=k(l);g.prototype.getMainContentElement=i(l);g.prototype.id=jpvs.property({get:function(){return this.element.attr("id")},set:function(m){this.element.attr("id",m)}});g.prototype.ensureId=function(){if(this.id()&&this.id()!=""){return}else{this.id(jpvs.randomString(20))}};if(l.prototype){$.each(l.prototype,function(n,m){g.prototype[n]=m})}function e(m){return function(o){var n=[];o=o||document.body;o=a(o);$(o).each(function(q,p){var r=m.create(p);n.push(m.widget.attach(r))});if(n.length==1){return n[0]}else{if(n.length==0){return undefined}else{return n}}}}function d(m){return function(n){return new m.widget(n)}}function c(m){return function(n){if(!n){return}n=a(n);this.__WIDGET__=m.type;this.element=$(n);this.element.addClass("Widget");this.element.addClass(m.cssClass);j(this);m.init.call(this,this);jpvs.widgets[this.element.attr("id")]=this;this.element.data("jpvs-widget",this)}}function f(m){return function(){var n=true;if(m.destroy){n=m.destroy.call(this,this)}if(n){this.element.remove()}}}function i(m){return function(){if(m.getMainContentElement){return m.getMainContentElement.call(this,this)}return this.element}}function j(m){m.element.hover(function(){m.addState(jpvs.states.HOVER)},function(){m.removeState(jpvs.states.HOVER)});m.element.focusin(function(){m.addState(jpvs.states.FOCUS)});m.element.focusout(function(){m.removeState(jpvs.states.FOCUS)})}function h(m){return function(){if(m.focus){m.focus.call(this,this)}else{this.element.focus()}return this}}function b(m){return function(n){this.element.addClass("Widget-"+n);this.element.addClass(m.cssClass+"-"+n);return this}}function k(m){return function(n){this.element.removeClass("Widget-"+n);this.element.removeClass(m.cssClass+"-"+n);return this}}};jpvs.createAllWidgets=function(){$("*").each(function(){var c=this;var b=$(c);var d=b.data("jpvsType");if(d){var e=jpvs[d];if(e){e.attach(this);return}}$.each(jpvs.widgetDefs,function(f,g){if(g.canAttachTo&&g.canAttachTo(c)){g.widget.attach(c);return false}})})};jpvs.write=function(b,d){if(!b){return}b=a(b);if(d){d=d.replace("\r","");var c=d.split("\n");if(c.length==1){$(b).append(document.createTextNode(c[0]))}else{if(c.length>1){$.each(c,function(e,f){$(b).append(document.createTextNode(f));$(b).append(document.createElement("br"))})}}}};jpvs.writeln=function(b,c){if(!b){return}b=a(b);jpvs.write(b,c);$(b).append(document.createElement("br"))};jpvs.writeTag=function(b,d,e){if(!b){return}if(!d){return}b=a(b);var c=document.createElement(d);$(b).append(c);jpvs.write(c,e);return $(c)};jpvs.applyTemplate=function(b,e,c){if(!b){return}if(!e){return}b=a(b);if(e.template){return jpvs.applyTemplate(b,e.template,c)}if(typeof(e)=="string"){jpvs.write(b,e);return}if(e.fieldName){var d=c&&c[e.fieldName];if(e.selector){d=e.selector(d,c)}else{d=d&&d.toString()}if(e.tagName){jpvs.writeTag(b,e.tagName,d)}else{jpvs.write(b,d)}if(e.css){b.css(e.css)}return}if(typeof(e)=="function"){return e.call($(b),c)}jpvs.alert("JPVS Error","The specified template is not valid.")};jpvs.readDataSource=function(d,l,c,b){if(!d){h()}else{if(typeof(d)=="function"){var g=d(l,c,f);if(g===undefined){}else{if(g===null){h()}else{f(g)}}}else{if(d.length){var m=d.length;var k=Math.max(0,l||0);var e;if(c===undefined||c===null){e=d.slice(k)}else{var i=Math.max(0,c||0);var j=k+i;e=d.slice(k,j)}b({total:m,start:k,count:e.length,data:e})}else{h()}}}function h(){b({total:0,start:0,count:0,data:[]})}function f(n){if(n.total&&n.data){b({total:n.total,start:n.start||0,count:n.data.length||0,data:n.data})}else{if(n.length){b({total:n.length,start:0,count:n.length,data:n})}else{h()}}}};jpvs.showDimScreen=function(c,d,e){if(jpvs.showDimScreen.timeout){return}jpvs.showDimScreen.timeout=setTimeout(b,c!=null?c:500);function b(){jpvs.showDimScreen.timeout=null;if(jpvs.showDimScreen.element){return}jpvs.showDimScreen.element=jpvs.writeTag("body","div").addClass("DimScreen").css({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",display:"none"});jpvs.applyTemplate(jpvs.showDimScreen.element,e);jpvs.showDimScreen.element.fadeIn(d!=null?d:250)}};jpvs.hideDimScreen=function(b){if(jpvs.showDimScreen.timeout){clearTimeout(jpvs.showDimScreen.timeout);jpvs.showDimScreen.timeout=null}if(jpvs.showDimScreen.element){var c=jpvs.showDimScreen.element;jpvs.showDimScreen.element=null;c.fadeOut(b!=null?b:250,function(){c.remove()})}};jpvs.fitInWindow=function(d){if(!d){return}d=a(d);var i=d.offset();var q=i.left;var r=i.top;var k=d.outerWidth();var e=d.outerHeight();var m=$(window);var o=m.scrollLeft();var p=m.scrollTop();var n=m.width();var l=m.height();var b=j(o,o+n,q,q+k);var c=j(p,p+l,r,r+e);if(b!=0||c!=0){var f=q+b;var g=r+c;d.show().css({position:"absolute",left:f+"px",top:g+"px"})}function j(s,h,u,t){if(u<s){return s-u}else{if(t>h){return h-t}else{return 0}}}}})();jpvs.Event=function(b){var a=function(d,c){return a.bind(d,c)};a.bind=jpvs.Event.prototype.bind;a.unbind=jpvs.Event.prototype.unbind;a.fire=jpvs.Event.prototype.fire;a.widget=b;a.handlers={};return a};jpvs.Event.prototype.bind=function(b,a){if(!a){a=b;b=new Date().toString()}this.handlers[b]=a;return this.widget};jpvs.Event.prototype.unbind=function(a){delete this.handlers[a];return this.widget};jpvs.Event.prototype.fire=function(i,c,e){if(c){return a(this.handlers[c],e)}else{var f=true;for(var d in this.handlers){var b=this.handlers[d];var g=a(b,e);f=f&&g}return f}function a(h){if(h){return h.call(i,e)}}};(function(){jpvs.parseJSON=function(d){return $.parseJSON(d)};var a=/["\\\x00-\x1f\x7f-\x9f]/g,b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};jpvs.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(n){if(n===null){return"null"}var s=typeof n;if(s==="undefined"){return undefined}if(s==="number"||s==="boolean"){return""+n}if(s==="string"){return c(n)}if(s==="object"){if(typeof n.toJSON==="function"){return jpvs.toJSON(n.toJSON())}if(n.constructor===Date){var l=n.getUTCMonth()+1,d=n.getUTCDate(),u=n.getUTCFullYear(),e=n.getUTCHours(),j=n.getUTCMinutes(),r=n.getUTCSeconds(),h=n.getUTCMilliseconds();if(l<10){l="0"+l}if(d<10){d="0"+d}if(e<10){e="0"+e}if(j<10){j="0"+j}if(r<10){r="0"+r}if(h<100){h="0"+h}if(h<10){h="0"+h}return'"'+u+"-"+l+"-"+d+"T"+e+":"+j+":"+r+"."+h+'Z"'}if(n.constructor===Array){var q=[];for(var f=0;f<n.length;f++){q.push(jpvs.toJSON(n[f])||"null")}return"["+q.join(",")+"]"}var m,t,p=[];for(var g in n){s=typeof g;if(s==="number"){m='"'+g+'"'}else{if(s==="string"){m=c(g)}else{continue}}s=typeof n[g];if(s==="function"||s==="undefined"){continue}t=jpvs.toJSON(n[g]);p.push(m+":"+t)}return"{"+p.join(",")+"}"}};function c(d){if(d.match(a)){return'"'+d.replace(a,function(e){var f=b[e];if(typeof f==="string"){return f}f=e.charCodeAt();return"\\u00"+Math.floor(f/16).toString(16)+(f%16).toString(16)})+'"'}return'"'+d+'"'}})();var SvgParser=(function(){var b={r:0,g:0,b:0,a:1};var c={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",green:"#008000",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function g(k){var j=XmlParser.parseString(k,h);if(j){return{ids:j.__$ids$__,elements:j.children}}else{return null}}function h(m,t){if(!t.__$ids$__){t.__$ids$__={}}if(m.attributes.id){t.__$ids$__[m.attributes.id]=m}for(var l=0;l<m.children.length;l++){var k=m.children[l];if(k.name=="#COMMENT"){m.children.splice(l--,1)}}delete m.value;for(var l in m.attributes){var j=m.attributes[l];o(m,l,j)}delete m.attributes;function o(u,w,x){if(w=="style"){s(u,x)}else{if(w=="fill"){p(u,x)}else{if(w=="stroke"){r(u,x)}else{if(w=="d"){q(u,x)}else{var v=/%$/g.test(x);var y=parseFloat(x);var z=isFinite(y)&&!v;u[w]=z?y:x}}}}}function q(u,w){var v=f(w);u.d=v}function p(v,E){if(!E){v.fill={};return}E=i(E);if(E==""||E.toLowerCase()=="none"){v.fill={};return}var D=/^url *\( *#(.+) *\) *$/gi;var B=D.exec(E);if(B){var x=B[1];var w=t.__$ids$__[x];if(w.name=="linearGradient"){var F=n(w.x1);var G=n(w.x2);var H=n(w.y1);var I=n(w.y2);v.fill={linearGradient:{x1:F,y1:H,x2:G,y2:I,stops:[]}};for(var y in w.children){var C=w.children[y];if(C.name!="stop"){continue}var z=C.offset;var u=e(C["stop-color"]);var A=C["stop-opacity"];if(A!=null){u.a*=A}v.fill.linearGradient.stops.push({color:u,offset:z})}}else{}}else{v.fill={color:e(E)}}}function n(u){if(/%$/g.test(u)){return parseFloat(u.substring(0,u.length-1))/100}else{return parseFloat(u)}}function r(u,v){if(!v){u.stroke={};return}v=i(v);if(v==""||v.toLowerCase()=="none"){u.stroke={};return}u.stroke={color:e(v)}}function s(u,B){B=i(B);var x=B.split(";");for(var v in x){var w=x[v];var A=w.split(":");var y=i(A[0]);var z=i(A[1]);o(u,y,z)}}}function i(j){return j.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function e(j){if(!j){return b}j=i(j);if(j==""){return b}if((/^#/gi).test(j)){return k(j.substring(1))}else{if((/^RGB[^A]/gi).test(j)){return m(j.substring(3))}else{if((/^RGBA/gi).test(j)){return l(j.substring(4))}else{j=j.toLowerCase();j=c[j];return e(j)}}}function k(n){n=i(n);if(n.length==3){n=String.fromCharCode(n.charCodeAt(0),n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(2))}return{r:parseInt(n.substring(0,2),16),g:parseInt(n.substring(2,4),16),b:parseInt(n.substring(4,6),16),a:1}}function m(p){p=i(p);if((/^\(.*\)$/gi).test(p)){p=p.substring(1,p.length-1);var s=i(p).split(",");var t=parseInt(s[0]);var q=parseInt(s[1]);var o=parseInt(s[2]);var n=1;return{r:t,g:q,b:o,a:n}}else{return b}}function l(p){p=i(p);if((/^\(.*\)$/gi).test(p)){p=p.substring(1,p.length-1);var s=i(p).split(",");var t=parseInt(s[0]);var q=parseInt(s[1]);var o=parseInt(s[2]);var n=parseFloat(s[3]);return{r:t,g:q,b:o,a:n}}else{return b}}}var d="1234567890.-+";var a="qwertyuioplkjhgfdsazxcvbnmQWERTYUIOPLKJHGFDSAZXCVBNM";function f(n){if(!n){return null}n=i(n);if(n==""){return null}var r=0;var q=1;var p=2;var k=[];var l,m;var s=r;for(var o=0;o<n.length;o++){var j=n[o];if(s==r){if(a.indexOf(j)>=0){l={cmd:j,params:[]};k.push(l);s=q}else{}}else{if(s==q){if(a.indexOf(j)>=0){l={cmd:j,params:[]};k.push(l);s=q}else{if(d.indexOf(j)>=0){m=j;s=p}else{}}}else{if(s==p){if(d.indexOf(j)>=0){m+=j}else{if(a.indexOf(j)>=0){l.params.push(parseFloat(m));m=null;l={cmd:j,params:[]};k.push(l);s=q}else{l.params.push(parseFloat(m));m=null;s=q}}}}}}if(m){l.params.push(parseFloat(m))}return k}return{parseString:g,parseColor:e,parsePathDefinition:f}})();var XmlParser=(function(){var f=0,h=1,j=2,a=3,k=4,b=5,l=6,c=7;function i(m){return m.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function d(){return{name:"",attributes:{},children:[],value:null}}function e(m){return{name:"#TEXT",attributes:{},children:[],value:m}}function g(y,w){if(!y||y==""){return null}var z=f;var v=[];var q,n,o,r="",p="";for(var u=0;u<y.length;u++){var m=y[u];if(z==f){if(m=="<"){z=h;r=i(r);if(r.length>0){var A=e(r);q.children.push(A)}r="";var x=q;q=d();v.push(q);if(x){x.children.push(q)}}else{r+=m}}else{if(z==h){if(m==" "){z=j}else{if(m=="/"){if(q.name==""){q.closing=true}else{z=l}}else{if(m==">"){z=f;if(q.closing){if(v.length>1){v.pop();q=v[v.length-1];q.children.pop()}if(v.length>1){v.pop();q=v[v.length-1]}}else{}}else{q.name+=m;if(q.name=="!--"){p="";z=c}}}}}else{if(z==j){if(m==" "){}else{if(m=="/"){z=l}else{if(m==">"){z=f}else{z=a;n=m;o=""}}}}else{if(z==a){if(m=="="){z=k}else{n+=m}}else{if(z==k){if(m==" "){}else{if(m=='"'){z=b}else{B()}}}else{if(z==b){if(m=='"'){z=j;q.attributes[i(n)]=o}else{o+=m}}else{if(z==l){if(m==" "){}else{if(m==">"){z=f;if(v.length>1){v.pop();q=v[v.length-1]}}else{B()}}}else{if(z==c){p+=m;if((/-->$/gi).test(p)){p=i(p.substring(0,p.length-3));q.name="#COMMENT";q.value=p;v.pop();q=v[v.length-1];z=f}}else{C()}}}}}}}}}var t=v[0]||null;if(w){D(t)}return t;function D(F){if(F){w(F,t);if(F.children){for(var E in F.children){var s=F.children[E];D(s)}}}}function B(){throw"Invalid character: "+m}function C(){throw"Unexpected parser state: "+z}}return{parseString:g}})();(function(){var a="QWERTYUIOPLKJHGFDSAZXCVBNM1234567890";var c=a.length;var b=10*c;jpvs.randomString=function(g){var h="";for(var f=0;f<g;f++){var d=Math.floor(Math.random()*b)%c;var e=a[d];h+=e}return h}})();jpvs.Resources={images:{loading:"data:image/gif;base64,R0lGODlhGAAIAPcAAAAAAP8A3ICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgABACwAAAAAGAAIAAAIRAADCBxIsKBBggASKhSocGGAhgkZCpgoAADDARgHWHyYUaNEihsBdAw58uNEkhlRYgxJseLFlC9XMoQ4s2FNhwdz5gwIACH5BAkKAAEALAAAAAAYAAgAAAhDAAMIHEiwoEGCABIqFKhwYYCGCRkOmDgAAEMBGAVYfEixokSKGwFk1PhxYsiOIUeeBFnS40OVLUNCZDjzYc2DOHEGBAAh+QQJCgABACwAAAAAGAAIAAAIQwADCBxIsKBBggASKhSocGGAhgkZDpg4AIBEihYfCtgoICMAihUvTvTIsaPIkA9BkuToUeXJlRs9QmQ482HNgzhxBgQAIfkECQoAAQAsAAAAABgACAAACEMAAwgcSLCgQYIAEioUqHBhgIYJGQ6YOAAAQwEYBVh8SLGiRIobAWTU+HFiyI4hR54EWdLjQ5UtQ0JkOPNhzYM4cQYEADs=",closeButton:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADzSURBVDhPY2BmZv7EwMDwn1zMyMrK+uXnz5/7gQaQDJiYmHyYSNaFpgHDAD09PSuQyRcvXuRCVtvW1iYHEgfRKGaAvPDv37/NyBgUHjo6Om9hYufPn98LEmtpabmIrg6rF1avXn38ypUrQjDbYmNjDYAGvquqqnqE4WVsLgDZEhUVdQ9kK4wGuQKbS/HGAig8QC4BuSg4OPgtuu0EYwGkGaRp/fr1ErhiC2c0gmwH+Rtk+7JlyxTXrl0rjNUQbGEACm2Q/2H+hoUDtjBgQDcAX5QhRy3IMHDyRzYAphldIUgx0CvHYLECcwmIP/B5gYHS7AwAM9IzlWy9T8kAAAAASUVORK5CYII=",closeButtonHover:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAENSURBVDhPY9TW1v6rqqrKxEAGuHHjBgOjo6Pjn717994lQz+Dk5OTGlk2I1uGYcDs2bNlm5qa1N6+fcuKrPDUqVP8IHEQjdeA1NTUxyAF69atk4ApBBm2Y8cOcQ8Pj5dmZmYf8RoAkoyMjHzy/PlzTphtIMMkJSW/o2sGqcUaBsBY+WZkZPQBZOuWLVvEQIYFBQW9wBbQOAPRx8fnFcjWc+fOCYBcJCws/JskA0CKQTaD6Js3b/LgimacLgDFBsgFINtBrrh9+zYX0S4ABR7M37DwWL58uQxRBiBHGczfoPAAaQa5Ct0QFC+ANE+dOlURW5TBohYUK8iGDHxeYFRRUfkrIyNDVqZ68OABAwDuhIRQ92DTiAAAAABJRU5ErkJggg=="}};(function(){var e="jpvs.Storage.";var f=e.length;function d(m,j,i){var l=m[e+j];if(!l){return i}var k=$.parseJSON(l);return k}function h(l,i,j){var k=jpvs.toJSON(j);l[e+i]=k}function g(j,i){j.removeItem(e+i)}function b(o,j){var n=o.length;for(var l=0;l<n;l++){var k=o.key(l);if(k.indexOf(e)!=0){continue}var m=k.substring(f);var q=o.getItem(m);var p=$.parseJSON(q);if(j(m,p)===false){return}}}function c(i,j){return i+"."+j}function a(j,i){this.storage=j;this.id=i.id;this.name=i.name}a.prototype.getCount=function(){if(this.deleted){return 0}var j=this.name+".";var k=j.length;var i=0;b(this.storage,function(m,o){if(m.indexOf(j)==0){var l=m.substring(k);var n=parseInt(l);if(isFinite(n)){i=Math.max(i,n+1)}}});return i};a.prototype.getItem=function(j){if(this.deleted){return null}var k=c(this.name,j);var i=d(this.storage,k,null);return i};a.prototype.setItem=function(j,i){if(this.deleted){return}var k=c(this.name,j);h(this.storage,k,i)};a.prototype.removeItem=function(i){if(this.deleted){return}var j=c(this.name,i);g(this.storage,j)};a.prototype.removeAllItems=function(){if(this.deleted){return}var k=this.getCount();for(var j=0;j<k;j++){this.removeItem(j)}};a.prototype.listItems=function(){if(this.deleted){return[]}var i=[];this.each(function(j,k){i.push(k)});return i};a.prototype.each=function(j){if(this.deleted){return}var l=this.getCount();for(var k=0;k<l;k++){if(j(k,this.getItem(k))===false){return}}};a.prototype.deleteDomain=function(){if(this.deleted){return}this.removeAllItems();var i=d(this.storage,"Domains",{});delete i[this.id];h(this.storage,"Domains",i);this.deleted=true};jpvs.Storage={listDomains:function(k){var i=d(k,"Domains",{});var j=[];$.each(i,function(m,l){j.push(new a(k,l))});return j},getDomain:function(n,i){var j=d(n,"Domains",{});var k;$.each(j,function(p,o){if(o.name==i){k=new a(n,o);return false}});if(k){return k}var l={id:jpvs.randomString(20),name:i};var m=new a(n,l);j[l.id]=l;h(n,"Domains",j);return m}}})();jpvs.Button=function(a){this.attach(a);this.click=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.Button,type:"Button",cssClass:"Button",create:function(a){var b=document.createElement("button");$(b).attr("type","button");$(a).append(b);return b},init:function(a){this.element.click(function(){return a.click.fire(a)})},canAttachTo:function(a){return $(a).is('button,input[type="button"]')},prototype:{text:jpvs.property({get:function(){return this.element.text()},set:function(a){this.element.text(a)}})}});jpvs.writeButtonBar=function(c,b){if(!c){return}if(!b){return}c=jpvs.getElementIfWidget(c);var a=$(document.createElement("div"));$(a).addClass("ButtonBar").appendTo(c);$.each(b,function(f,e){var d=jpvs.Button.create(a);d.text(e.text||"OK").click.bind(e.click)});return a};jpvs.CheckBox=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.CheckBox,type:"CheckBox",cssClass:"CheckBox",create:function(a){var b=document.createElement("input");$(b).attr("type","checkbox");$(a).append(b);return b},init:function(a){this.element.click(function(){return a.change.fire(a)});this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is('input[type="checkbox"]')},prototype:{checked:jpvs.property({get:function(){return this.element.prop("checked")},set:function(a){this.element.prop("checked",a)}}),text:jpvs.property({get:function(){this.ensureId();var a=$('label[for="'+this.id()+'"]');return a.text()},set:function(b){this.ensureId();var a=$('label[for="'+this.id()+'"]');if(a.length==0){a=$(document.createElement("label"));a.attr("for",this.id());a.insertAfter(this.element)}a.text(b)}})}});(function(){jpvs.DataGrid=function(j){this.attach(j);this.dataItemClick=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.DataGrid,type:"DataGrid",cssClass:"DataGrid",create:function(j){var k=document.createElement("table");$(j).append(k);return k},init:function(j){this.element.on("click","tr",function(k){return g(j,k.currentTarget)})},canAttachTo:function(j){return false},prototype:{template:jpvs.property({get:function(){return this.element.data("template")},set:function(j){this.element.data("template",j)}}),emptyRowTemplate:jpvs.property({get:function(){return this.element.data("emptyRowTemplate")},set:function(j){this.element.data("emptyRowTemplate",j)}}),binder:jpvs.property({get:function(){return this.element.data("binder")},set:function(j){this.element.data("binder",j)}}),caption:jpvs.property({get:function(){var j=this.element.children("caption");if(j.length!=0){return j.text()}else{return null}},set:function(k){var j=this.element.children("caption");if(j.length==0){j=$(document.createElement("caption"));this.element.prepend(j)}j.text(k)}}),enableEvenOdd:jpvs.property({get:function(){var j=this.element.data("enableEvenOdd");if(j===true||j===false){return j}else{return true}},set:function(j){this.element.data("enableEvenOdd",j)}}),clear:function(){this.element.find("tr").remove();return this},dataBind:function(j){d(this,"tbody",j);return this},dataBindHeader:function(j){d(this,"thead",j);return this},dataBindFooter:function(j){d(this,"tfoot",j);return this},addBodyRow:function(k,j){var l="tbody";var m=f(this,l);var n=e(l);a(this,n,m,k,j);return this},addHeaderRow:function(k,j){var l="thead";var m=f(this,l);var n=e(l);a(this,n,m,k,j);return this},addFooterRow:function(k,j){var l="tfoot";var m=f(this,l);var n=e(l);a(this,n,m,k,j);return this},removeBodyRow:function(j){var k="tbody";var l=f(this,k);h(this,l,j);return this},removeHeaderRow:function(j){var k="thead";var l=f(this,k);h(this,l,j);return this},removeFooterRow:function(j){var k="tfoot";var l=f(this,k);h(this,l,j);return this},removeBodyRows:function(k,j){var l="tbody";var m=f(this,l);h(this,m,k,j);return this},removeHeaderRows:function(k,j){var l="thead";var m=f(this,l);h(this,m,k,j);return this},removeFooterRows:function(k,j){var l="tfoot";var m=f(this,l);h(this,m,k,j);return this}}});function d(m,l,k){var j=m.binder()||jpvs.DataGrid.defaultBinder;j.call(m,l,k)}function f(l,j){var k=l.element.children(j);if(k.length==0){k=$(document.createElement(j));l.element.append(k)}return k}function a(r,n,m,l,k){var p=$(document.createElement("tr"));if(k===null||k===undefined){m.append(p);if(r.enableEvenOdd()){i(-1,m)}}else{var q=m.children("tr");if(q.length==0){m.append(p)}else{q.eq(k).before(p)}if(r.enableEvenOdd()){i(k,m)}}var o=r.template();var j=r.emptyRowTemplate();if(o){b(p,n,o,j,l)}}function h(m,l,k,j){if(j===null||j===undefined){j=1}if(j==1){l.children("tr").eq(k).remove()}else{if(j>1){l.children("tr").slice(k,k+j).remove()}}if(m.enableEvenOdd()){i(k,l)}}function i(o,n){var m=n.children("tr");if(o<0){o+=m.length}var j=((o%2)==0);for(var k=o;k<m.length;k++){var l=m.eq(k);l.removeClass("Even Odd").addClass(j?"Even":"Odd");j=!j}}function e(j){if(j=="thead"){return"header"}else{if(j=="tfoot"){return"footer"}else{return"body"}}}function b(n,l,m,j,k){n.empty();if(k){$.each(m,function(s,r){var q=r;if(r.header||r.body||r.footer){q=r[l]}var p="td";if((q&&q.isHeader)||l=="header"||l=="footer"){p="th"}var o=$(document.createElement(p));n.append(o);jpvs.applyTemplate(o,q,k)});n.data("fromEmptyRowTemplate",false);n.data("dataItem",k)}else{jpvs.applyTemplate(n,j||c(m.length),k);n.data("fromEmptyRowTemplate",true)}}function c(j){return function(k){var l=jpvs.writeTag(this,"td").attr("colspan",j);jpvs.writeTag(l,"img").attr("src",jpvs.Resources.images.loading);jpvs.writeTag(l,"span",".").css("visibility","hidden")}}function g(k,l){var j=$(l).data("dataItem");if(j){return k.dataItemClick.fire(k,null,j)}}jpvs.DataGrid.defaultBinder=function(l,j){var o=this;var m=f(o,l);var n=e(l);jpvs.readDataSource(j,null,null,k);function k(p){m.empty();$.each(p.data,function(q,r){a(o,n,m,r)})}};jpvs.DataGrid.pagingBinder=function(n){var m=(n&&n.pageSize)||10;var o=(n&&n.preserveCurrentPage);var k=0;function j(v,q){var y=this;var w=f(y,v);var x=e(v);var p=o?k:0;k=p;var t=r();u();function r(){var B=y.element.data("pagerId");var z;if(B){z=jpvs.find("#"+B)}else{var A=document.createElement("div");y.element.before(A);z=jpvs.Pager.create(A);B=jpvs.randomString(20);z.element.attr("id",B);y.element.data("pagerId",B)}z.change.unbind("DataGrid");z.change.bind("DataGrid",s);return z}function s(){var z=this.page();p=z;k=p;u(y,v,q,t)}function u(){var A=p*m;jpvs.readDataSource(q,A,m,z);function z(B){w.empty();$.each(B.data,function(D,E){a(y,x,w,E)});var C=Math.floor((B.total+m-1)/m);t.totalPages(C);t.page(p)}}}function l(){return k}j.currentPage=jpvs.property({get:l});return j};jpvs.DataGrid.scrollingBinder=function(o){var n=(o&&o.pageSize)||10;var k=(o&&o.chunkSize)||(5*n);var m=(o&&o.width);var l=(o&&o.height);function j(D,r){var J=this;var E=f(J,D);var F=e(D);var q=null;var p=[];var G=null;var v=0;var u=0;var B=t();jpvs.readDataSource(r,0,n,x(function(){H(0);jpvs.readDataSource(r,n,k,x(I))}));function s(O,P){var S=O;var L=S+n;var K=true;var M;for(var N=S;N<L&&N<G;N++){var R=p[N];if(!R){K=false;M=N;break}}if(K){P()}else{var L=Math.min(M+k,G);var Q=L-M;jpvs.readDataSource(r,M,Q,x(P))}}function x(K){return function(O){if(G===null){G=O.total}var P=O.start;var L=O.count;while(p.length<G){p.push(undefined)}var M=P,N=0;while(N<L){p[M++]=O.data[N++]}if(K){K()}}}function H(L){if(q===null){z(L)}else{var K=L-q;if(Math.abs(K)<n){C(L,K)}else{z(L)}}q=L}function z(M){E.empty();var K=Math.min(M+n,G);for(var L=M;L<K;L++){a(J,F,E,p[L])}A()}function C(N,K){if(K>0){J.removeBodyRows(0,K);var L=N+n-K;var M=0;while(M++<K){if(L<G){a(J,F,E,p[L++])}}}else{if(K<0){K=-K;J.removeBodyRows(n-K,K);var L=N;var M=0;while(M<K){if(L<G){a(J,F,E,p[L++],M++)}}}}A()}function I(){var Q=J.template();var K=J.emptyRowTemplate();var T=E.children("tr");var P=q;var L=P+T.length;var S=false;var O=0;for(var M=P;M<L;M++){var N=p[M];var R=T.eq(O++);if(N&&R.data("fromEmptyRowTemplate")){if(Q){b(R,F,Q,K,N);S=true}}}if(S){A()}}function t(){var M=J.element.data("scrollerId");var K;if(M){K=jpvs.find("#"+M)}else{var L=document.createElement("div");J.element.after(L);K=jpvs.Scroller.create(L);M=jpvs.randomString(20);K.element.attr("id",M);J.element.data("scrollerId",M);K.content.append(J.element);K.contentSize({width:"1000%",height:"200%"});w();K.objectSize({width:v+K.scrollbarW,height:u+K.scrollbarH})}K.change.unbind("DataGrid");K.change.bind("DataGrid",y);return K}function y(){var O=this.scrollPosition();var L=O.left;var N=0;this.contentPosition({top:N,left:L});var K=u/n*G-u;var M=Math.min(G,Math.floor(O.top/K*(G-n+5)));H(M);s(M,I)}function w(){var K={width:J.element.outerWidth(),height:J.element.outerHeight()};u=Math.max(u,K.height);v=Math.max(v,K.width)}function A(){if(!B){return}w();var K=u/n*G;B.scrollableSize({width:v,height:K});B.objectSize({width:m||(v+B.scrollbarW),height:l||(u+B.scrollbarH)})}}return j}})();jpvs.DropDownList=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.DropDownList,type:"DropDownList",cssClass:"DropDownList",create:function(a){var b=document.createElement("select");$(a).append(b);return b},init:function(a){this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is("select")},prototype:{clearItems:function(){this.element.empty();return this},addItem:function(e,c){var d=e;var b=c!=null?c:e;var a=document.createElement("option");$(a).attr("value",d).text(b).appendTo(this.element);return this},addItems:function(a){var b=this;$.each(a,function(c,d){if(d.value!=null){b.addItem(d.value,d.text)}else{b.addItem(d)}});return this},count:function(){return this.element.find("option").length},selectedValue:jpvs.property({get:function(){return this.element.val()},set:function(a){this.element.val(a)}})}});jpvs.ImageButton=function(a){this.attach(a);this.click=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.ImageButton,type:"ImageButton",cssClass:"ImageButton",create:function(a){var b=document.createElement("img");$(a).append(b);return b},init:function(c){var b=this.element.attr("src");var a=this.element.data("jpvsHover");this.imageUrls({normal:b,hover:a});this.element.hover(function(){c.element.attr("src",c.getHoverImage())},function(){c.element.attr("src",c.getNormalImage())});this.element.click(function(){return c.click.fire(c)})},canAttachTo:function(a){return false},prototype:{imageUrls:jpvs.property({get:function(){return this.element.data("images")},set:function(a){this.element.data("images",a);this.element.attr("src",this.getNormalImage())}}),getNormalImage:function(){var a=this.imageUrls();if(a){if(typeof(a)=="string"){return a}else{return a.normal||""}}return""},getHoverImage:function(){var a=this.imageUrls();if(a){if(typeof(a)=="string"){return a}else{return a.hover||a.normal||""}}return""}}});jpvs.LinkButton=function(a){this.attach(a);this.click=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.LinkButton,type:"LinkButton",cssClass:"LinkButton",create:function(a){var b=document.createElement("a");$(a).append(b);return b},init:function(a){a.element.attr("href","#");this.element.click(function(b){b.preventDefault();return a.click.fire(a)})},canAttachTo:function(a){return false},prototype:{text:jpvs.property({get:function(){return this.element.text()},set:function(a){this.element.text(a)}})}});(function(){var a={};$(document).ready(function(){$(document).on("mouseover.jpvsMenu",".Menu .Item",f);$(document).on("mouseout.jpvsMenu",".Menu .Item",e);$(document).on("click.jpvsMenu",d)});jpvs.Menu=function(j){this.attach(j);this.click=jpvs.event(this)};jpvs.Menu.MenuElement=function(k,n,m,l,j){this.element=k;this.menuItems=n;this.level=m;this.isPopup=l;this.childrenAlignment=j;this.itemElements=k.find(".Item");this.parentElement=null};jpvs.Menu.MenuElement.prototype.show=function(){$.each(a,function(u,v){b(v)});var j=[];for(var t=this;t!=null;t=t.parentElement){j.unshift(t)}for(var p=0;p<j.length;p++){var q=j[p];if(q.isPopup){var r=q.parentElement;var s=m(r,q);var k=n(s);var l=o(k,r.childrenAlignment);q.element.show().css({position:"absolute",left:l.x+"px",top:l.y+"px"});jpvs.fitInWindow(q.element)}else{q.element.show()}}function m(x,w){for(var u=0;u<x.itemElements.length;u++){var v=$(x.itemElements[u]);var y=v.data("subMenu");if(y===w){return v}}}function n(u){var x=u.offset();var y=u.outerWidth();var v=u.outerHeight();return{x:x.left,y:x.top,w:y,h:v}}function o(v,u){if(u=="right"){return{x:v.x+v.w,y:v.y}}else{if(u=="bottom"){return{x:v.x,y:v.y+v.h}}else{return v}}}};jpvs.Menu.MenuElement.prototype.hide=function(){this.element.hide()};jpvs.Menu.MenuElement.prototype.hideIfNonRoot=function(){if(this.level!=0){this.element.hide()}};jpvs.Menu.MenuElement.prototype.getChildren=function(){var j=[];$.each(this.itemElements,function(k,l){var m=$(l).data("subMenu");j.push(m)});return j};jpvs.Menu.Templates={HorizontalMenuBar:function(k){var l=k.items;var m=k.itemTemplate;var j=k.level;var o=jpvs.Table.create(this).addClass("HorizontalMenuBar").addClass("HorizontalMenuBar-Level"+j);var n=o.writeBodyRow();$.each(l,function(q,r){var p=n.writeCell().addClass("Item");jpvs.applyTemplate(p,m,r)});return new jpvs.Menu.MenuElement(o.element,l,j!=0,false,"bottom")},VerticalMenuBar:function(k){var l=k.items;var m=k.itemTemplate;var j=k.level;var n=jpvs.Table.create(this).addClass("VerticalMenuBar").addClass("VerticalMenuBar-Level"+j);$.each(l,function(o,p){var q=n.writeBodyRow();q.element.addClass("Item");jpvs.applyTemplate(q,m,p)});return new jpvs.Menu.MenuElement(n.element,l,j!=0,false,"right")},PopupMenu:function(k){var l=k.items;var m=k.itemTemplate;var j=k.level;var n=jpvs.Table.create(this).addClass("PopupMenu").addClass("PopupMenu-Level"+j);$.each(l,function(o,p){var q=n.writeBodyRow();q.element.addClass("Item");jpvs.applyTemplate(q,m,p)});return new jpvs.Menu.MenuElement(n.element,l,j!=0,true,"right")}};jpvs.Menu.ItemTemplates={HorizontalMenuBarItem:function(j){jpvs.write(this,j.text)},VerticalMenuBarItem:function(j){jpvs.writeTag(this,"td",j.text)},PopupMenuItem:function(j){jpvs.writeTag(this,"td",j.text);if(j.items&&j.items.length){jpvs.writeTag(this,"td"," --> ")}}};jpvs.Menu.Templates.Default_Level0=jpvs.Menu.Templates.HorizontalMenuBar;jpvs.Menu.Templates.Default_OtherLevels=jpvs.Menu.Templates.PopupMenu;jpvs.Menu.ItemTemplates.Default_Level0=jpvs.Menu.ItemTemplates.HorizontalMenuBarItem;jpvs.Menu.ItemTemplates.Default_OtherLevels=jpvs.Menu.ItemTemplates.PopupMenuItem;jpvs.makeWidget({widget:jpvs.Menu,type:"Menu",cssClass:"Menu",create:function(j){var k=document.createElement("div");$(j).append(k);return k},init:function(k){var j=g(this.element);this.element.empty();this.menuItems(j);this.ensureId();a[this.id()]=this},canAttachTo:function(j){return false},prototype:{template:i("jpvsTemplate"),itemTemplate:i("jpvsItemTemplate"),menuItems:jpvs.property({get:function(){return this.element.data("menuItems")},set:function(j){this.element.data("menuItems",j);h(this,j)}})}});function i(j){return jpvs.property({get:function(){var k=this.element.data(j);if(!k){return[]}if(typeof(k)=="string"){var l=k.split(",");return l}else{return k}},set:function(k){this.element.data(j,k)}})}function g(k){var l=[];m(k,null,l);return l;function m(o,p,q){var n=$(o).contents();n.each(function(){var s=this;var r=$(this);if(s.nodeType==Node.TEXT_NODE){if(p){p.text=j(p.text,r.text())}}else{if(s.nodeType==Node.ELEMENT_NODE){var t=s.nodeName.toLowerCase();if(t=="ul"||t=="ol"){m(s,null,q)}else{if(t=="a"){if(p){p.text=j(p.text,r.text());p.href=r.attr("href")}}else{if(t=="button"){if(p){p.text=j(p.text,r.text());p.click=s.onclick}}else{var u=p;p={text:"",items:[]};q.push(p);m(s,p,p.items);p=u}}}}}})}function j(n,o){n=$.trim(n)+" "+$.trim(o);return $.trim(n)}}function h(o,k){o.element.empty();var n=o.template();var j=o.itemTemplate();o.rootElement=m(o.element,n,j,0,k);l(null,o.rootElement);function l(r,q){if(!q){return}q.parentElement=r;var p=q.getChildren();$.each(p,function(t,s){l(q,s)})}function m(r,x,u,v,t){if(!t||t.length==0){return}var q=c(x[v],v,jpvs.Menu.Templates);var p=c(u[v],v,jpvs.Menu.ItemTemplates);var w=jpvs.applyTemplate(r,q,{items:t,itemTemplate:p,level:v});if(v==0){w.show()}else{w.hide()}var s=w.element.find(".Item");$.each(t,function(z,A){var B=s[z];if(B){var y=$(B);y.data("menuItem",A);var C=m(r,x,u,v+1,A.items);if(C){y.data("subMenu",C)}}});return w}}function c(l,k,j){var m;if(typeof(l)=="function"){m=l}else{if(typeof(l)=="string"){m=j[l]}}if(!m){if(k==0){m=j.Default_Level0}else{m=j.Default_OtherLevels}}return m}function b(j){var l=j.rootElement;k(l);function k(n){if(!n){return}n.hideIfNonRoot();var m=n.getChildren();$.each(m,function(p,o){k(o)})}}function f(j){var k=$(j.currentTarget);k.addClass("Item-Hover")}function e(j){var k=$(j.currentTarget);k.removeClass("Item-Hover")}function d(m){var j=$(m.target);var k=j.closest(".Menu .Item");var l=k.closest(".Menu");if(k.length==0){$.each(a,function(q,r){b(r)})}else{var o=k.data("menuItem");var n=jpvs.find(l);var p=k.data("subMenu");if(p){p.show()}else{b(n)}n.click.fire(n,null,o);if(o.click){o.click.call(o,o)}if(o.href){window.location=o.href}}}})();(function(){jpvs.Pager=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.Pager.allStrings={en:{firstPage:"First page",previousPage:"Previous page",nextPage:"Next page",lastPage:"Last page",pag:"Page"},it:{firstPage:"Prima pagina",previousPage:"Pagina precedente",nextPage:"Pagina successiva",lastPage:"Ultima pagina",pag:"Pag."}};jpvs.makeWidget({widget:jpvs.Pager,type:"Pager",cssClass:"Pager",create:function(a){var b=document.createElement("table");$(a).append(b);return b},init:function(i){var g=jpvs.writeTag(i.element,"tbody");var h=jpvs.writeTag(g,"tr");var c=jpvs.writeTag(h,"td");var f=jpvs.writeTag(h,"td");var b=jpvs.writeTag(h,"td");var e=jpvs.writeTag(h,"td");var d=jpvs.writeTag(h,"td");jpvs.Pager.strings=jpvs.Pager.allStrings[jpvs.currentLocale()];jpvs.LinkButton.create(c).text(jpvs.Pager.strings.firstPage).click(function(){i.page(Math.min(0,i.totalPages()-1));i.change.fire(i)});jpvs.LinkButton.create(e).text(jpvs.Pager.strings.nextPage).click(function(){i.page(Math.min(i.page()+1,i.totalPages()-1));i.change.fire(i)});jpvs.LinkButton.create(f).text(jpvs.Pager.strings.previousPage).click(function(){i.page(Math.max(0,i.page()-1));i.change.fire(i)});jpvs.LinkButton.create(d).text(jpvs.Pager.strings.lastPage).click(function(){i.page(i.totalPages()-1);i.change.fire(i)});var a=jpvs.DropDownList.create(b).change(function(){var j=parseInt(this.selectedValue());i.page(Math.min(j,i.totalPages()-1));i.change.fire(i)});this.element.data("cmbPages",a)},canAttachTo:function(a){return false},prototype:{page:jpvs.property({get:function(){return this.element.data("page")||0},set:function(b){this.element.data("page",b);var a=this.element.data("cmbPages");a.selectedValue(b.toString())}}),totalPages:jpvs.property({get:function(){return this.element.data("totalPages")||0},set:function(d){var c=this.totalPages();if(c!=d){var a=this.element.data("cmbPages");a.clearItems();for(var b=0;b<d;b++){a.addItem(b.toString(),jpvs.Pager.strings.pag+" "+(b+1)+" / "+d)}}this.element.data("totalPages",d)}})}})})();(function(){var a={};jpvs.Popup=function(b){this.attach(b);this.close=jpvs.event(this)};jpvs.Popup.getTopMost=function(){var b,c;$.each(a,function(d,e){if(!e.open){return}var f=e.widget.zIndex();if(!c||f>c){b=e;c=f}});return b?b.widget:null};jpvs.makeWidget({widget:jpvs.Popup,type:"Popup",cssClass:"Popup",create:function(b){var c=document.createElement("div");$(c).attr("id",jpvs.randomString(20));$(b).append(c);return c},init:function(g){a[this.element.attr("id")]={open:false,widget:this};var b=this.element.contents();this.blanketElement=$(document.createElement("div"));this.blanketElement.addClass("DimScreen").css({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%"});this.element.append(this.blanketElement);this.contentsElement=$(document.createElement("div"));this.contentsElement.addClass("Contents").append(b);this.element.append(this.contentsElement);this.element.hide();var h=this.element.data("jpvsWidth");if(h){this.contentsElement.css({width:h})}var c=this.contentsElement.children("h1").detach();var f=this.contentsElement.contents();this.titleElement=$(document.createElement("div"));this.titleElement.addClass("Title");this.contentsElement.append(this.titleElement);this.bodyElement=$(document.createElement("div"));this.bodyElement.addClass("Body");this.contentsElement.append(this.bodyElement);this.bodyElement.append(f);this.closeButton=jpvs.ImageButton.create(this.titleElement);this.closeButton.imageUrls({normal:jpvs.Resources.images.closeButton,hover:jpvs.Resources.images.closeButtonHover});this.closeButton.click.bind(function(){g.hide();g.close.fire(g)});var d=jpvs.writeTag(this.titleElement,"h1");d.append(c.contents());if(this.contentsElement.draggable){this.contentsElement.draggable({addClasses:false,containment:"window",cursor:"move",handle:d,scroll:false})}this.contentsElement.mousedown(e(this));function e(i){return function(){i.bringForward()}}},canAttachTo:function(b){return false},destroy:function(){var b=this;this.hide(function(){b.element.remove()});return false},getMainContentElement:function(){return this.bodyElement},prototype:{modal:jpvs.property({get:function(){return this.blanketElement.is(":visible")},set:function(b){if(b){this.blanketElement.show()}else{this.blanketElement.hide()}}}),show:function(){var b=this;this.element.show();this.center();setTimeout(function(){b.center()},0);this.contentsElement.hide();this.contentsElement.fadeIn(function(){b.center()});if(this.modal()){this.blanketElement.show()}else{this.blanketElement.hide()}a[this.element.attr("id")].open=true;this.bringForward();return this},hide:function(b){this.blanketElement.hide();this.contentsElement.fadeOut(b);a[this.element.attr("id")].open=false;return this},center:function(){var c=this.contentsElement.outerWidth();var b=this.contentsElement.outerHeight();var d=$(window);var f=d.width();var e=d.height();var g=(f-c)/2;var h=(e-b)/2;this.contentsElement.css({position:"fixed",top:h+"px",left:g+"px"});return this},bringForward:function(){var b=jpvs.Popup.getTopMost();if(b){if(b!==this){this.zIndex(b.zIndex()+1)}}else{this.zIndex(10000)}return this},title:jpvs.property({get:function(){return this.titleElement.children("h1").text()},set:function(b){this.titleElement.children("h1").text(b);if(b){this.titleElement.show()}else{this.titleElement.hide()}}}),width:jpvs.property({get:function(){return this.contentsElement.width()},set:function(b){this.contentsElement.css("width",b)}}),maxWidth:jpvs.property({get:function(){return this.contentsElement.css("max-width")},set:function(b){this.contentsElement.css("max-width",b)}}),zIndex:jpvs.property({get:function(){var b=parseInt(this.contentsElement.css("zIndex"));return isFinite(b)?b:10000},set:function(b){this.blanketElement.css("zIndex",b);this.contentsElement.css("zIndex",b)}})}});jpvs.alert=function(){var f={title:jpvs.alert.defaultTitle,text:"",onclose:null,buttons:[{text:"OK"}]};var e=false,d=false;for(var c=0;c<arguments.length;c++){var b=arguments[c];if(!b){continue}if(typeof(b)=="string"){if(!d){f.text=b;d=true}else{if(!e){f.title=f.text;f.text=b;e=true}}}else{if(typeof(b)=="function"||b.__WIDGET__){f.onclose=b}else{if(b.length){f.buttons=b}}}}var g=jpvs.Popup.create();g.maxWidth("75%").title(f.title||null);jpvs.write(g.bodyElement,f.text);if(f.buttons){$.each(f.buttons,function(k,j){if(j){j.click=h(g,j.click)}})}jpvs.writeButtonBar(g.bodyElement,f.buttons);g.show();g.center();g.close.bind(function(){g.hide();if(f.onclose){if(typeof(f.onclose)=="function"){f.onclose()}else{if(f.onclose.__WIDGET__){f.onclose.focus()}}}setTimeout(function(){g.destroy()},5000)});function h(j,i){return function(){if(i){i()}j.close.fire()}}};jpvs.confirm=function(i,f,e,d,h,g){var b=false;function c(){if(b){if(e){e()}}else{if(d){d()}}}jpvs.alert(i,f,c,[{text:h||"OK",click:function(){b=true}},{text:g||"Cancel",click:function(){b=false}}])};$(document).ready(function(){$(document).keydown(function(b){if(b.which==27){var c=jpvs.Popup.getTopMost();if(c){c.closeButton.click.fire(c);return false}}})})})();(function(){jpvs.Scroller=function(b){this.attach(b);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.Scroller,type:"Scroller",cssClass:"Scroller",create:function(b){var c=document.createElement("div");$(b).append(c);return c},init:function(e){var c={width:e.element.width(),height:e.element.height()};e.element.css({position:"relative",width:"200px",height:"200px"});var b=e.element.contents();e.contentBox=jpvs.writeTag(e.element,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"});e.content=jpvs.writeTag(e.contentBox,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"});e.scrollerBox=jpvs.writeTag(e.element,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"auto"});e.scrollerSizer=jpvs.writeTag(e.scrollerBox,"div").css({position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"});var d=e.scrollerBox.css("overflow");e.scrollerBox.css("overflow","scroll");var f=e.scrollerSizer.innerWidth();var g=e.scrollerBox.innerWidth();e.scrollerBox.css("overflow",d);e.scrollbarW=Math.abs(f-g);e.scrollbarH=e.scrollbarW;e.scrollerSizer.css({width:"100%",height:"100%"});e.scrollerBox.scroll(a(e));if(b.length){e.content.append(b);c.height+=e.scrollbarH;c.width+=e.scrollbarW;e.scrollableSize(c).contentSize(c)}},canAttachTo:function(b){return false},getMainContentElement:function(){return this.content},prototype:{objectSize:jpvs.property({get:function(){return{width:this.element.width(),height:this.element.height()}},set:function(b){this.element.width(b.width).height(b.height)}}),scrollableSize:jpvs.property({get:function(){return{width:this.scrollerSizer.width(),height:this.scrollerSizer.height()}},set:function(b){this.scrollerSizer.width(b.width).height(b.height)}}),contentSize:jpvs.property({get:function(){return{width:this.content.width(),height:this.content.height()}},set:function(b){this.content.width(b.width).height(b.height)}}),scrollPosition:jpvs.property({get:function(){var c=this.scrollerBox.scrollTop();var b=this.scrollerBox.scrollLeft();return{top:c,left:b}},set:function(b){this.scrollerBox.scrollTop(b.top).scrollLeft(b.left)}}),contentPosition:jpvs.property({get:function(){var c=this.contentBox.scrollTop();var b=this.contentBox.scrollLeft();return{top:c,left:b}},set:function(b){this.contentBox.scrollTop(b.top).scrollLeft(b.left)}})}});function a(b){return function(){b.change.fire(b)}}})();(function(){jpvs.Table=function(d){this.attach(d)};jpvs.makeWidget({widget:jpvs.Table,type:"Table",cssClass:"Table",create:function(d){var e=document.createElement("table");$(d).append(e);return e},init:function(d){},canAttachTo:function(d){return $(d).is("table")},prototype:{addClass:function(d){this.element.addClass(d);return this},removeClass:function(d){this.element.removeClass(d);return this},css:function(){this.element.css.apply(this.element,arguments);return this},writeHeaderRow:function(){return c(this,"thead")},writeBodyRow:function(){return c(this,"tbody")},writeRow:function(){return this.writeBodyRow()},writeFooterRow:function(){return c(this,"tfoot")},caption:jpvs.property({get:function(){var d=this.element.children("caption");if(d.length!=0){return d.text()}else{return null}},set:function(e){var d=this.element.children("caption");if(d.length==0){d=$(document.createElement("caption"));this.element.prepend(d)}d.text(e)}}),clear:function(){this.element.find("tr").remove();return this}}});function a(f,d){var e=f.element.children(d);if(e.length==0){e=$(document.createElement(d));f.element.append(e)}return e}function c(g,d){var e=a(g,d);var f=$(document.createElement("tr"));e.append(f);return new b(g,f)}function b(e,d){this.table=e;this.element=d}b.prototype.writeHeaderCell=function(d){return jpvs.writeTag(this.element,"th",d)};b.prototype.writeCell=function(d){return jpvs.writeTag(this.element,"td",d)};b.prototype.getMainContentElement=function(){return this.element}})();jpvs.TextBox=function(a){this.attach(a);this.change=jpvs.event(this)};jpvs.makeWidget({widget:jpvs.TextBox,type:"TextBox",cssClass:"TextBox",create:function(a){var b=document.createElement("input");$(b).attr("type","text");$(a).append(b);return b},init:function(a){this.element.change(function(){return a.change.fire(a)})},canAttachTo:function(a){return $(a).is('input[type="text"],input[type="password"]')},prototype:{text:jpvs.property({get:function(){return this.element.val()},set:function(a){this.element.val(a)}}),width:jpvs.property({get:function(){return this.element.css("width")},set:function(a){this.element.css("width",a)}})}});